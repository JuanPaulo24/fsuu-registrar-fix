!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl","commons"]],t):"object"==typeof exports?exports.PageEditor=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons):e.PageEditor=t(e.UIExtension,e.UIExtension.PDFViewCtrl.commons)}(self,((e,t)=>(()=>{var n={4395:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<layer \nclass="fv__ui-PE-props-dialog center websdk-modal"\n@draggable \n@controller="page-editor:PropsDialogController as ctrl"\nname="pageEditorProps"\n>\n<layer-header></layer-header>\n<layer-view @stop-drag>\n<div class="fv__ui-PE-props-nav" name="PE-props-tabs" @alt.menu=">::activated()">\n<gtab name="general-tab" group="PE-props-tab" body="PE-props-general" text="page-editor:general.title" active></gtab>\n<gtab name="text-ap-tab" @show="ctrl.getActiveType()==1" group="PE-props-tab" body="PE-props-text-ap" text="page-editor:textAp.title"></gtab>\n<gtab name="path-ap-tab" @show="ctrl.getActiveType()==2" group="PE-props-tab" body="PE-props-path-ap" text="page-editor:textAp.title"></gtab>\n<gtab name="image-ap-tab" @show="ctrl.getActiveType()==3" group="PE-props-tab" body="PE-props-image-ap" text="page-editor:textAp.title"></gtab>\n</div>\n<div class="fv__ui-PE-props-bodies" name="PE-props-bodies">\n<div class="PE-props-general" name="PE-props-general">\n<div class="d_f fv__ui-PE-props-item">\n<div class="PE-general-input inchesPostfix">\n<label>page-editor:general.posx</label>\n<input \n@on.blur="ctrl.blurInput" \n@on.focus="ctrl.focusInput" \n@model="ctrl.positionX|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n<div class="PE-general-input inchesPostfix">\n<label>page-editor:general.posy</label>\n<input \n@on.blur="ctrl.blurInput" \n@on.focus="ctrl.focusInput" \n@model="ctrl.positionY|page-editor:format_number($component)" \n@stop-propagation="keydown,keyup"\n></input>\n</div>\n</div>\n<div class="d_f fv__ui-PE-props-item">\n<div class="PE-general-input inchesPostfix">\n<label>page-editor:general.width</label>\n<input\nname="width"\nclass="rangeLimit"\nmin=0\n@on.blur="ctrl.blurInput"\n@on.focus="ctrl.focusInput"\n@model="ctrl.width|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n<div class="PE-general-input inchesPostfix">\n<label>page-editor:general.height</label>\n<input\nname="height"\nclass="rangeLimit"\nmin=0\n@on.blur="ctrl.blurInput"\n@on.focus="ctrl.focusInput"\n@model="ctrl.height|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n',t+='\n</div>\n<div class="d_f fv__ui-PE-props-item">\n<div class="PE-general-input PE-noMargin">\n<label>page-editor:general.scalex</label>\n<input \n@on.blur="ctrl.blurInput"\nclass="rangeLimit"\nmin=0 \nmax=10000 \ndata-dir=\'horizon\'\n@on.focus="ctrl.focusInput"\n@model="ctrl.scaleX|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n<div class="PE-general-input">\n<label>page-editor:general.scaley</label>\n<input\n@on.blur="ctrl.blurInput"\nclass="rangeLimit"\nmin=0\nmax=10000\n@on.focus="ctrl.focusInput"\n@model="ctrl.scaleY|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n</div>\n</div>\n<div name="PE-props-text-ap" style="cursor: initial;">\n<div class="PE-general-input fullWidth">\n<label>page-editor:textAp.fontName</label>\n<dropdown class="PE-fillInput fv__ui-dropdown-limit-options" name="PE-fontName">\n<xbutton @foreach="item in ctrl.baseFontFamilies" @setter.text="item.name" @on.click="ctrl.selectFontName(item.name)" tabindex=\'0\' @class="{\'active\':ctrl.fontName === item.name}"></xbutton>\n<xbutton @foreach="item in ctrl.fontFamilies" @setter.text="item.name" @on.click="ctrl.selectFontName(item.name)" tabindex=\'0\' @class="{\'active\':ctrl.fontName === item.name}"></xbutton>\n</dropdown>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.fontSize</label>\n<input @on.blur="ctrl.fontSizeBlur" type="number" class="rangeLimit" min=1 max=9999 @model="ctrl.fontSize" data-i18n="[title]page-editor:textAp.fontSizeRangeLimit" name="PE-fontSize"></input>\n</div>\n<div class="PE-general-input PE-horizonScale">\n<label>page-editor:textAp.HScale</label>\n<input type="number" class="rangeLimit" min=1 max=1000 @model="ctrl.horizonScale" data-i18n="[title]page-editor:textAp.HScaleRangeLimit" name="PE-horizonScale"></input>\n<span>%</span>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.charSpace</label>\n<input type="number" class="rangeLimit" min=0 max=32 @model="ctrl.charSpace" data-i18n="[title]page-editor:textAp.charSpaceRangeLimit" name="PE-charSpace"></input>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.wordSpace</label>\n<input type="number" class="rangeLimit" min=0 max=32 @model="ctrl.wordSpace" class="PE-w100px" data-i18n="[title]page-editor:textAp.wordSpaceRangeLimit" name="PE-wordSpace"></input>\n</div>\n\n<div class="PE-general-input fullWidth">\n<label>page-editor:textAp.textMode</label>\n<dropdown class="PE-fillInput" name="PE-textMode">\n<xbutton @foreach="item in ctrl.textModes" @setter.text="\'page-editor:textAp.\'+ item.text" @on.click="ctrl.selectTextMode(item.value)" tabindex=\'0\' @class="{\'active\':ctrl.textMode === item.value}"></xbutton>\n</dropdown>\n</div>\n\n<div class="PE-general-input fullWidth" name="PE-textStrokeColor">\n<label>page-editor:textAp.strokeColor</label>\n<dropdown class="PE-general-input fullWidth" name="textStrokeColor">\n<xbutton @foreach="item in ctrl.colorTypes" @setter.text="item.text" @on.click="ctrl.selectColor(\'strokeColor\',item.value)" tabindex=\'0\' @class="{\'active\':ctrl.textStrokeColor === item.value}"></xbutton>\n</dropdown>\n<div class="color-picker" @on.click="ctrl.showCP(\'PE-textStrokeColor\')"><div class="color"></div></div>\n<slider class="PE-slider"\n@model="ctrl.strokeGray" max="1" min="0" step="0.1" value="1" name="PE-stroke-slider" @stop-drag hideinput="true"></slider>\n</div>\n\n<div class="PE-general-input fullWidth"  name="PE-textFillColor">\n<label>page-editor:textAp.fillColor</label>\n<dropdown class="PE-general-input fullWidth" name="textFillColor">\n<xbutton @foreach="item in ctrl.colorTypes" @setter.text="item.text" @on.click="ctrl.selectColor(\'fillColor\',item.value)" tabindex=\'0\' @class="{\'active\':ctrl.textFillColor === item.value}"></xbutton>\n</dropdown>\n<div class="color-picker" @on.click="ctrl.showCP(\'PE-textFillColor\')"><div class="color"></div></div>\n<slider class="PE-slider"\n@model="ctrl.fillGray" max="1" min="0" step="0.1" value="1" name="PE-fill-slider" @stop-drag hideinput="true"></slider>\n</div>\n\n<div class="PE-general-input fullWidth"  name="opacity">\n<label>page-editor:textAp.opacity</label>\n<input min="0" value="100" max="100" type="number" @model="ctrl.opacity" name="PE-opacity"></input>\n<span>%</span>\n<slider class="PE-slider"\n@model="ctrl.opacity"\nmax="100" min="0" step="1" value="100" name="PE-opacity-slider" @stop-drag hideinput="true"></slider>\n</div>\n</div>\n<div name="PE-props-path-ap" style="cursor: initial;">\n<div class="PE-general-input fullWidth" name="PE-pathStrokeColor">\n<label>page-editor:textAp.lineColor</label>\n<dropdown class="PE-general-input fullWidth" name="pathStrokeColor">\n<xbutton @foreach="item in ctrl.lineColorTypes" @setter.text="item.text" @on.click="ctrl.selectColor(\'strokeColor\',item.value)" tabindex=\'0\' @class="{\'active\':ctrl.pathStrokeColor === item.value}"></xbutton>\n</dropdown>\n<div class="color-picker" @aria:role="button" tabindex="0" @on.click="ctrl.showCP(\'PE-pathStrokeColor\')" @on.native.keydown="ctrl.keyBoardHandler($event,\'PE-pathStrokeColor\')"><div class="color"></div></div>\n<slider class="PE-slider"\n@model="ctrl.strokeGray" max="1" min="0" step="0.1" value="1" name="PE-stroke-slider" @stop-drag hideinput="true"></slider>\n</div>\n\n<div class="PE-general-input fullWidth" name="PE-pathFillColor">\n<label>page-editor:textAp.fillColor</label>\n<dropdown class="PE-general-input fullWidth" name="pathFillColor">\n<xbutton @foreach="item in ctrl.lineColorTypes" @setter.text="item.text" @on.click="ctrl.selectColor(\'fillColor\',item.value)" tabindex=\'0\' @class="{\'active\':ctrl.pathFillColor === item.value}"></xbutton>\n</dropdown>\n<div class="color-picker" @aria:role="button" tabindex="0" @on.click="ctrl.showCP(\'PE-pathFillColor\')" @on.native.keydown="ctrl.keyBoardHandler($event,\'PE-pathFillColor\')"><div class="color"></div></div>\n<slider class="PE-slider"\n@model="ctrl.fillGray" max="1" min="0" step="0.1" value="1" name="PE-fill-slider" @stop-drag hideinput="true"></slider>\n</div>\n\n<div class="PE-general-input">\n<label>page-editor:textAp.lineWidth</label>\n<number type="number" min=0.1 max=1000 step=0  @model="ctrl.lineWidth"></number>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.Dashed</label>\n<choice class="fv__property-component PE-lineStyle" name="PE-lineStyle" @aria:labelledby="::previousSiblings()"></choice>\n</div>\n\n<div class="PE-general-input">\n<label>page-editor:textAp.miterLimit</label>\n<number type="number" min=0 max=1000 @model="ctrl.miterLimit"></number>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.capStyle</label>\n<dropdown name="PE-lineCap" class="PE-w100px">\n<xbutton @foreach="item in ctrl.lineCaps" @setter.text="\'page-editor:textAp.\' + item.text" @on.click="ctrl.selectLineCap(item.value)" tabindex=\'0\' @class="{\'active\':ctrl.lineCap === item.value}"></xbutton>\n</dropdown>\n</div>\n\n<div class="PE-general-input PE-fillInput">\n<label>page-editor:textAp.joinStyle</label>\n<dropdown name="PE-lineJoin">\n<xbutton @foreach="item in ctrl.lineJoins" @setter.text="\'page-editor:textAp.\' + item.text" @on.click="ctrl.selectLineJoin(item.value)" tabindex=\'0\' @class="{\'active\': ctrl.lineJoin === item.value}"></xbutton>\n</dropdown>\n</div>\n\n<div class="PE-general-input fullWidth" name="opacity">\n<label>page-editor:textAp.opacity</label>\n<input  min="0" max="100" value="100" type="number" \n@model="ctrl.opacity"></input>\n<span>%</span>\n<slider class="PE-slider" \n@model="ctrl.opacity" max="100" min="0" step="1" value="100" name="PE-opacity-slider" @stop-drag hideinput="true"></slider>\n</div>\n</div>\n<div name="PE-props-image-ap" style="cursor: initial;">\n<div class="PE-general-input fullWidth" name="opacity">\n<label>page-editor:textAp.opacity</label>\n<input\ntype="number"\nmin=0 \nmax=100\n@model="ctrl.opacity"></input>\n<span>%</span>\n<slider class="PE-slider"\n@model="ctrl.opacity"\n max="100" min="0" step="1" value="100" name="PE-opacity-slider" @stop-drag hideinput="true"></slider>\n</div>\n</div>\n</div>\n</layer-view>\n<layer-toolbar>\n<xbutton class="fv__ui-dialog-button fv__ui-dialog-ok-button" @on.click="ctrl.hideDialog()">dialog.close</xbutton>\n</layer-toolbar>\n</layer>'}},9848:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'\n<ribbon-button @tooltip tooltip-title="page-editor:addShape.title"  name="create-shapeObject-dropdown" icon-class="fv__icon-menu-add-shapes" text="page-editor:addShape.title" @controller="page-editor:AddShapesController as asc" not-immediately="true">\n<dropdown name="shape-drop-down-ui" popup-class="fv__ui-shapes-dropdown" separate="false">\n<div class="fv__ui-shape-type-title">page-editor:addShape.addPath</div>\n<dropdown-item name="path">\n<xbutton data-i18n="[title]page-editor:addShape.buttons.line" icon-class=\'fv__icon-path-line\' @on.click="asc.addPath(\'Line\')" name="Line" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.rect" icon-class=\'fv__icon-path-rect\' @on.click="asc.addPath(\'Rectangle\')" name="Rectangle" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.roundedRect" icon-class=\'fv__icon-path-roundedRect\' @on.click="asc.addPath(\'RoundRect\')" name="RoundRect" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.circle" icon-class=\'fv__icon-path-circle\' @on.click="asc.addPath(\'Ellipse\')" name="Ellipse" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.brokenLine" icon-class=\'fv__icon-path-brokenLine\' @on.click="asc.addPath(\'Polyline\')" name="Polyline" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.pentagonal" icon-class=\'fv__icon-path-pentagonal\' @on.click="asc.addPath(\'Polygon\')" name="Polygon" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.curve" icon-class=\'fv__icon-path-curve\' @on.click="asc.addPath(\'Polybezier\')" name="Polybezier" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.closedCurve" icon-class=\'fv__icon-path-closedCurve\' @on.click="asc.addPath(\'Curve\')" name="Curve" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.closedIrregularFigure" icon-class=\'fv__icon-path-closedIrregularFigure\' @on.click="asc.addPath(\'Freedom\')" name="Freedom" tabindex=\'0\'></xbutton>\n</dropdown-item>\n<div class="fv__ui-shape-type-title">page-editor:addShape.addShading</div>\n<dropdown-item name="shading">\n<xbutton data-i18n="[title]page-editor:addShading.buttons.rect" icon-class=\'fv__icon-shading-rect\' @on.click="asc.addShading(\'Rectangle\')" name="Rectangle" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.roundedRect" icon-class=\'fv__icon-shading-roundedRect\' @on.click="asc.addShading(\'RoundRect\')" name="RoundRect" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.circle" icon-class=\'fv__icon-shading-circle\' @on.click="asc.addShading(\'Ellipse\')" name="Ellipse" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.brokenLine" icon-class=\'fv__icon-shading-brokenLine\' @on.click="asc.addShading(\'Polyline\')" name="Polyline" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.Pentagonal" icon-class=\'fv__icon-shading-Pentagonal\' @on.click="asc.addShading(\'Polygon\')" name="Polygon" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.curve" icon-class=\'fv__icon-shading-curve\' @on.click="asc.addShading(\'Polybezier\')" name="Polybezier" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.closedCurve" icon-class=\'fv__icon-shading-closedCurve\' @on.click="asc.addShading(\'Curve\')" name="Curve" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.closedIrregularFigure" icon-class=\'fv__icon-shading-closedIrregularFigure\' @on.click="asc.addShading(\'Freedom\')" name="Freedom" tabindex=\'0\'></xbutton>\n</dropdown-item>\n</dropdown>\n</ribbon-button>','\n<ribbon-button @tooltip tooltip-title="page-editor:addShape.title"  name="create-shapeObject-dropdown" icon-class="fv__icon-menu-add-shapes" text="page-editor:addShape.title" @controller="page-editor:AddShapesController as asc" not-immediately="true">\n<dropdown name="shape-drop-down-ui" popup-class="fv__ui-shapes-dropdown" separate="false">\n<div class="fv__ui-shape-type-title">page-editor:addShape.addPath</div>\n<dropdown-item name="path">\n<xbutton data-i18n="[title]page-editor:addShape.buttons.line" icon-class=\'fv__icon-path-line\' @on.click="asc.addPath(\'Line\')" name="Line" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.rect" icon-class=\'fv__icon-path-rect\' @on.click="asc.addPath(\'Rectangle\')" name="Rectangle" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.roundedRect" icon-class=\'fv__icon-path-roundedRect\' @on.click="asc.addPath(\'RoundRect\')" name="RoundRect" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.circle" icon-class=\'fv__icon-path-circle\' @on.click="asc.addPath(\'Ellipse\')" name="Ellipse" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.brokenLine" icon-class=\'fv__icon-path-brokenLine\' @on.click="asc.addPath(\'Polyline\')" name="Polyline" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.pentagonal" icon-class=\'fv__icon-path-pentagonal\' @on.click="asc.addPath(\'Polygon\')" name="Polygon" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.curve" icon-class=\'fv__icon-path-curve\' @on.click="asc.addPath(\'Polybezier\')" name="Polybezier" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.closedCurve" icon-class=\'fv__icon-path-closedCurve\' @on.click="asc.addPath(\'Curve\')" name="Curve" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.closedIrregularFigure" icon-class=\'fv__icon-path-closedIrregularFigure\' @on.click="asc.addPath(\'Freedom\')" name="Freedom" tabindex=\'0\'></xbutton>\n</dropdown-item>\n<div class="fv__ui-shape-type-title">page-editor:addShape.addShading</div>\n<dropdown-item name="shading">\n<xbutton data-i18n="[title]page-editor:addShading.buttons.rect" icon-class=\'fv__icon-shading-rect\' @on.click="asc.addShading(\'Rectangle\')" name="Rectangle" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.roundedRect" icon-class=\'fv__icon-shading-roundedRect\' @on.click="asc.addShading(\'RoundRect\')" name="RoundRect" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.circle" icon-class=\'fv__icon-shading-circle\' @on.click="asc.addShading(\'Ellipse\')" name="Ellipse" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.brokenLine" icon-class=\'fv__icon-shading-brokenLine\' @on.click="asc.addShading(\'Polyline\')" name="Polyline" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.Pentagonal" icon-class=\'fv__icon-shading-Pentagonal\' @on.click="asc.addShading(\'Polygon\')" name="Polygon" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.curve" icon-class=\'fv__icon-shading-curve\' @on.click="asc.addShading(\'Polybezier\')" name="Polybezier" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.closedCurve" icon-class=\'fv__icon-shading-closedCurve\' @on.click="asc.addShading(\'Curve\')" name="Curve" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.closedIrregularFigure" icon-class=\'fv__icon-shading-closedIrregularFigure\' @on.click="asc.addShading(\'Freedom\')" name="Freedom" tabindex=\'0\'></xbutton>\n</dropdown-item>\n</dropdown>\n</ribbon-button>'}},5442:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button name="edit-object-ribbon-dropdown" @tooltip tooltip-title="page-editor:editObject.title" text="page-editor:editObject.title" icon-class="fv__icon-menu-edit" not-immediately="true" class="edit-object-ribbon-dropdown" @controller="page-editor:EditObjectController as eord">\n<dropdown separate="false">\n<dropdown-button @on.click="eord.setEditType(\'All\')" name="All" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.all</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Text\')" name="Text" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.text</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Image\')" name="Image" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.image</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Path\')" name="Path" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.shape</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Shading\')" name="Shading" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.shading</dropdown-button>\n</dropdown>\n</ribbon-button>','<ribbon-button name="edit-object-ribbon-dropdown" @tooltip tooltip-title="page-editor:editObject.title" text="page-editor:editObject.title" icon-class="fv__icon-menu-edit" not-immediately="true" class="edit-object-ribbon-dropdown" @controller="page-editor:EditObjectController as eord">\n<dropdown separate="false">\n<dropdown-button @on.click="eord.setEditType(\'All\')" name="All" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.all</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Text\')" name="Text" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.text</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Image\')" name="Image" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.image</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Path\')" name="Path" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.shape</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Shading\')" name="Shading" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.shading</dropdown-button>\n</dropdown>\n</ribbon-button>'}},683:e=>{e.exports=null},5585:(e,t,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},o=Object.create(r),a=/["&'<>]/;function i(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?i(e.call(e)):JSON.stringify(e)),e}o.$escape=function(e){return function(e){var t=""+e,n=a.exec(t);if(!n)return e;var r="",o=void 0,i=void 0,c=void 0;for(o=n.index,i=0;o<t.length;o++){switch(t.charCodeAt(o)){case 34:c="&#34;";break;case 38:c="&#38;";break;case 39:c="&#39;";break;case 60:c="&#60;";break;case 62:c="&#62;";break;default:continue}i!==o&&(r+=t.substring(i,o)),i=o+1,r+=c}return i!==o?r+t.substring(i,o):r}(i(e))},o.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var o in e)t(e[o],o)},e.exports=o},5779:(e,t,n)=>{"use strict";e.exports=n(5585)},7297:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAN0lEQVR42m3NMQ7AMBACweH+/2dSOLIdKZSrBdIWJCm0DcyBRbcQvPBOVuMvszbzsdtmzmE2hAeBeRkFLldufwAAAABJRU5ErkJggg=="},4945:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVR42m2NSQrAQBCEtP//Z3NImAXiUSzKCgA1gEqAWTKgHQi88sRv8cdU4l1Xzjp0S4AHhHsZBRHojyUAAAAASUVORK5CYII="},8649:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAW0lEQVR42rXQsQ3AIAxE0X8oG9BSsv9ElLTMcCkiJxQkoslVtvRkW5ZtIpKeBrCtqI8ZjVJnhyQHTm8IYJR6bxGwRHNyb9fEnfwAbSv39nmfbaX41woHAtDuw09owS/ec9h8cQAAAABJRU5ErkJggg=="},7665:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADBUlEQVR42tVXS27TUBQ99zngIJXiBSBhVkA6wskEdwUQBSExol1B3CQTRnFmDPpxV5AyqkSVul1BzIREYtCwgroSCzBVB2mVvMsgpYodx83HQnBntt675/jcr4H/yQzrUE/bp5jrNKl2oXZ8Vqi0NtIiQPMcfllxLUG8d/voE3NDyhuv67z3/4oCgobjQDoTNUlRzwtVt7loeGZSwLSa2o3QykxsAdCmn+STzk6pmKoC+epp+Vp5cs7EdiI4wx8MRWMycY/MhQkUam4dGDrJXz0CZ0nr351iLwReOzJJUdqFilufm0Ch5taZ2b5PIQY8VdJa1yn6k/FV6gDAxPY0ErE5YFRaG0TUjLwOQNzAkHQIlEfg8nN3521sSRq1I5NYaYfZ8lZnt+QkKmBYhzoR1SckHtJaZ7vkMHFv5Isb08ABAIOMD0ZYFaK6aTe1RAKkPLABjJdUwJLW7yQW0memze5uKTE8Xafos6R1AMHYa61/uWpNDYFhHeqkqOdhRrzV2Q7LNo/lKy0LRHvjH6Q+/vXcszeDSQXEQzMq/TLgAHAb85AK15erG7EhEOA3kRzfT6PfM4X9EMSL+BwQ4lnoopC9dEaO9CKEzFgCzMiNP2dXrlIhkB1kon60mTrhn0RZ1jynGMxKIHQwWrOLmmm52qytOESgf7WSS4NAPzOI+unF54DE13DuCDOVKpCZXCTXLuIJEPXCnZPKqex9xOVIuZ/EEngkcRBtGvlKy1oGPF89LUdaO6QUXiwBzykG0aYBovqi69bo3tAONyE6GB/dYrJmxUTrJEVtz0vidq60Q8sMw5dDNBKnoecUAzBHVyudFPVs1nDkq6dlUtSzqPQEbkQXl6lLqVFr2cQUt8X4YN5nIXvZwVXPczYD02pqfazkhMi8mra4MnMjboQnbsUJJOYrwyngAKAkXfz57Yv3NP/ugkA5EBbpigGIP3Z3Sp+W+i8wLFeHwjYBH2YFZuL97EA4MXNg8V8zw3J1CGkSidcA68Dd9AwYCATIY5Y/VCkO7gP+Z+w3g7JLOd6W0HAAAAAASUVORK5CYII="},8552:(e,t,n)=>{var r=n(852)(n(5639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(1789),o=n(401),a=n(7667),i=n(1327),c=n(1866);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=c,e.exports=s},8407:(e,t,n)=>{var r=n(7040),o=n(4125),a=n(2117),i=n(7518),c=n(4705);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=c,e.exports=s},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),o=n(1285),a=n(6e3),i=n(9916),c=n(5265);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=c,e.exports=s},3818:(e,t,n)=>{var r=n(852)(n(5639),"Promise");e.exports=r},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},8668:(e,t,n)=>{var r=n(3369),o=n(619),a=n(2385);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},6384:(e,t,n)=>{var r=n(8407),o=n(7465),a=n(3779),i=n(7599),c=n(4758),s=n(4309);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=c,l.prototype.set=s,e.exports=l},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},1149:(e,t,n)=>{var r=n(5639).Uint8Array;e.exports=r},577:(e,t,n)=>{var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},4636:(e,t,n)=>{var r=n(2545),o=n(5694),a=n(1469),i=n(4144),c=n(5776),s=n(6719),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),u=!n&&o(e),p=!n&&!u&&i(e),d=!n&&!u&&!p&&s(e),g=n||u||p||d,h=g?r(e.length,String):[],f=h.length;for(var v in e)!t&&!l.call(e,v)||g&&("length"==v||p&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,f))||h.push(v);return h}},2488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},2908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},8866:(e,t,n)=>{var r=n(2488),o=n(1469);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},4239:(e,t,n)=>{var r=n(2705),o=n(9607),a=n(2333),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},9454:(e,t,n)=>{var r=n(4239),o=n(7005);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},939:(e,t,n)=>{var r=n(2492),o=n(7005);e.exports=function e(t,n,a,i,c){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,c))}},2492:(e,t,n)=>{var r=n(6384),o=n(7114),a=n(8351),i=n(6096),c=n(4160),s=n(1469),l=n(4144),u=n(6719),p="[object Arguments]",d="[object Array]",g="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,f,v,m){var b=s(e),y=s(t),P=b?d:c(e),C=y?d:c(t),x=(P=P==p?g:P)==g,S=(C=C==p?g:C)==g,w=P==C;if(w&&l(e)){if(!l(t))return!1;b=!0,x=!1}if(w&&!x)return m||(m=new r),b||u(e)?o(e,t,n,f,v,m):a(e,t,P,n,f,v,m);if(!(1&n)){var E=x&&h.call(e,"__wrapped__"),k=S&&h.call(t,"__wrapped__");if(E||k){var _=E?e.value():e,I=k?t.value():t;return m||(m=new r),v(_,I,n,f,m)}}return!!w&&(m||(m=new r),i(e,t,n,f,v,m))}},8458:(e,t,n)=>{var r=n(3560),o=n(5346),a=n(3218),i=n(346),c=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,u=s.toString,p=l.hasOwnProperty,d=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?d:c).test(i(e))}},8749:(e,t,n)=>{var r=n(4239),o=n(1780),a=n(7005),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},280:(e,t,n)=>{var r=n(5726),o=n(6916),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},7561:(e,t,n)=>{var r=n(7990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},7114:(e,t,n)=>{var r=n(8668),o=n(2908),a=n(4757);e.exports=function(e,t,n,i,c,s){var l=1&n,u=e.length,p=t.length;if(u!=p&&!(l&&p>u))return!1;var d=s.get(e),g=s.get(t);if(d&&g)return d==t&&g==e;var h=-1,f=!0,v=2&n?new r:void 0;for(s.set(e,t),s.set(t,e);++h<u;){var m=e[h],b=t[h];if(i)var y=l?i(b,m,h,t,e,s):i(m,b,h,e,t,s);if(void 0!==y){if(y)continue;f=!1;break}if(v){if(!o(t,(function(e,t){if(!a(v,t)&&(m===e||c(m,e,n,i,s)))return v.push(t)}))){f=!1;break}}else if(m!==b&&!c(m,b,n,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}},8351:(e,t,n)=>{var r=n(2705),o=n(1149),a=n(7813),i=n(7114),c=n(8776),s=n(1814),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,p,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var g=c;case"[object Set]":var h=1&r;if(g||(g=s),e.size!=t.size&&!h)return!1;var f=d.get(e);if(f)return f==t;r|=2,d.set(e,t);var v=i(g(e),g(t),r,l,p,d);return d.delete(e),v;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},6096:(e,t,n)=>{var r=n(8234),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,c){var s=1&n,l=r(e),u=l.length;if(u!=r(t).length&&!s)return!1;for(var p=u;p--;){var d=l[p];if(!(s?d in t:o.call(t,d)))return!1}var g=c.get(e),h=c.get(t);if(g&&h)return g==t&&h==e;var f=!0;c.set(e,t),c.set(t,e);for(var v=s;++p<u;){var m=e[d=l[p]],b=t[d];if(a)var y=s?a(b,m,d,t,e,c):a(m,b,d,e,t,c);if(!(void 0===y?m===b||i(m,b,n,a,c):y)){f=!1;break}v||(v="constructor"==d)}if(f&&!v){var P=e.constructor,C=t.constructor;P==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof P&&P instanceof P&&"function"==typeof C&&C instanceof C||(f=!1)}return c.delete(e),c.delete(t),f}},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:(e,t,n)=>{var r=n(8866),o=n(9551),a=n(3674);e.exports=function(e){return r(e,a,o)}},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:(e,t,n)=>{var r=n(8458),o=n(7801);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[c]=n:delete e[c]),o}},9551:(e,t,n)=>{var r=n(4963),o=n(479),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=c},4160:(e,t,n)=>{var r=n(8552),o=n(7071),a=n(3818),i=n(8525),c=n(577),s=n(4239),l=n(346),u="[object Map]",p="[object Promise]",d="[object Set]",g="[object WeakMap]",h="[object DataView]",f=l(r),v=l(o),m=l(a),b=l(i),y=l(c),P=s;(r&&P(new r(new ArrayBuffer(1)))!=h||o&&P(new o)!=u||a&&P(a.resolve())!=p||i&&P(new i)!=d||c&&P(new c)!=g)&&(P=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case f:return h;case v:return u;case m:return p;case b:return d;case y:return g}return t}),e.exports=P},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,o=n(4429),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),o=n(8407),a=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},6916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},1167:(e,t,n)=>{e=n.nmd(e);var r=n(1957),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,c=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=c},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5639:(e,t,n)=>{var r=n(1957),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},7465:(e,t,n)=>{var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,n)=>{var r=n(8407),o=n(7071),a=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},3279:(e,t,n)=>{var r=n(3218),o=n(7771),a=n(4841),i=Math.max,c=Math.min;e.exports=function(e,t,n){var s,l,u,p,d,g,h=0,f=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=s,r=l;return s=l=void 0,h=t,p=e.apply(r,n)}function y(e){var n=e-g;return void 0===g||n>=t||n<0||v&&e-h>=u}function P(){var e=o();if(y(e))return C(e);d=setTimeout(P,function(e){var n=t-(e-g);return v?c(n,u-(e-h)):n}(e))}function C(e){return d=void 0,m&&s?b(e):(s=l=void 0,p)}function x(){var e=o(),n=y(e);if(s=arguments,l=this,g=e,n){if(void 0===d)return function(e){return h=e,d=setTimeout(P,t),f?b(e):p}(g);if(v)return clearTimeout(d),d=setTimeout(P,t),b(g)}return void 0===d&&(d=setTimeout(P,t)),p}return t=a(t)||0,r(n)&&(f=!!n.leading,u=(v="maxWait"in n)?i(a(n.maxWait)||0,t):u,m="trailing"in n?!!n.trailing:m),x.cancel=function(){void 0!==d&&clearTimeout(d),h=0,s=g=l=d=void 0},x.flush=function(){return void 0===d?p:C(o())},x}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:(e,t,n)=>{var r=n(9454),o=n(7005),a=Object.prototype,i=a.hasOwnProperty,c=a.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!c.call(e,"callee")};e.exports=s},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var r=n(3560),o=n(1780);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},4144:(e,t,n)=>{e=n.nmd(e);var r=n(5639),o=n(5062),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,c=i&&i.exports===a?r.Buffer:void 0,s=(c?c.isBuffer:void 0)||o;e.exports=s},8446:(e,t,n)=>{var r=n(939);e.exports=function(e,t){return r(e,t)}},3560:(e,t,n)=>{var r=n(4239),o=n(3218);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,n)=>{var r=n(4239),o=n(7005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},6719:(e,t,n)=>{var r=n(8749),o=n(1717),a=n(1167),i=a&&a.isTypedArray,c=i?o(i):r;e.exports=c},3674:(e,t,n)=>{var r=n(4636),o=n(280),a=n(8612);e.exports=function(e){return a(e)?r(e):o(e)}},7771:(e,t,n)=>{var r=n(5639);e.exports=function(){return r.Date.now()}},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},4841:(e,t,n)=>{var r=n(7561),o=n(3218),a=n(3448),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):i.test(e)?NaN:+e}},4616:t=>{"use strict";t.exports=e},732:e=>{"use strict";e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return n[e](a,a.exports,o),a.loaded=!0,a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var a={};return(()=>{"use strict";o.d(a,{default:()=>qa});var e={};function t(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(o,a){var i=e.apply(n,r);function c(e){t(i,o,a,c,s,"next",e)}function s(e){t(i,o,a,c,s,"throw",e)}c(void 0)}))}}function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):r(e,t)}function i(e,t){if(!r(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function p(e,t,n){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n||e):o.value}},p(e,t,n||e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function C(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function x(e){var t=P();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}o.r(e),o.d(e,{ArrangeAlignmentOptions:()=>Oa,ArrangeDistributeOptions:()=>Ra,ArrangeFlipOptions:()=>Da,ArrangePagecenterOptions:()=>Fa,ArrangeRotateOptions:()=>ja,ArrangeZorderOptions:()=>Ba});function S(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var w=o(4616),E=o(683),k=o.n(E);const _=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(i(this,e),"function"==typeof t.transformRect){var s=t;t=s.a,n=s.b,r=s.c,o=s.d,a=s.e,c=s.f}else if(Array.isArray(t)){var l=t;t=l[0],n=l[1],r=l[2],o=l[3],a=l[4],c=l[5]}this.a=t,this.b=n,this.c=r,this.d=o,this.e=a,this.f=c}return s(e,[{key:"set",value:function(e,t,n,r,o,a){this.a=e,this.b=t,this.c=n,this.d=r,this.e=o,this.f=a}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}},{key:"reverse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=t.a*t.d-t.b*t.c;if(0==n)return t;var r=-n;return new e(t.d/n,t.b/r,t.c/r,t.a/n,(t.c*t.f-t.d*t.e)/n,(t.a*t.f-t.b*t.e)/r)}},{key:"setReverse",value:function(e){var t=this.reverse(e);this.set(t.a,t.b,t.c,t.d,t.e,t.f)}},{key:"rotate",value:function(t,n){var r,o=Math.cos(t),a=Math.sin(t),i=new e(o,a,-a,o,0,0);r=n?e.Concat2mt(i,this):e.Concat2mt(this,i),this.set(r.a,r.b,r.c,r.d,r.e,r.f)}},{key:"rotateAt",value:function(e,t,n,r){this.translate(e,t,r),this.rotate(n,r),this.translate(-e,-t,r)}},{key:"translate",value:function(e,t,n){n?(this.e+=e*this.a+t*this.c,this.f+=t*this.d+e*this.b):(this.e+=e,this.f+=t)}},{key:"concat",value:function(t,n,o,a,i,c,s){var l,u;r(t,e)?(l=t,s=n):l=new e(t,n,o,a,i,c),u=s?e.Concat2mt(l,this):e.Concat2mt(this,l),this.set(u.a,u.b,u.c,u.d,u.e,u.f)}},{key:"is90Rotated",value:function(){var e=1e3*this.a;e<0&&(e*=-1);var t=1e3*this.d;t<0&&(t*=-1);var n=this.b;n<0&&(n*=-1);var r=this.c;return r<0&&(r*=-1),e<n&&t<r}},{key:"isScaled",value:function(){var e=1e3*this.b;e<0&&(e*=-1);var t=1e3*this.c;t<0&&(t*=-1);var n=this.a;n<0&&(n*=-1);var r=this.d;return r<0&&(r*=-1),e<n&&t<r}},{key:"getA",value:function(){return this.a}},{key:"getB",value:function(){return this.b}},{key:"getC",value:function(){return this.c}},{key:"getD",value:function(){return this.d}},{key:"getE",value:function(){return this.e}},{key:"getF",value:function(){return this.f}},{key:"scale",value:function(e,t,n){this.a*=e,this.d*=t,n?(this.b*=e,this.c*=t):(this.b*=t,this.c*=e,this.e*=e,this.f*=t)}},{key:"transformXDistance",value:function(e){var t=this.a*e,n=this.b*e;return Math.sqrt(t*t+n*n)}},{key:"transformYDistance",value:function(e){var t=this.c*e,n=this.d*e;return Math.sqrt(t*t+n*n)}},{key:"transformDistance",value:function(e,t){var n=this.a*e+this.c*t,r=this.b*e+this.d*t;return Math.sqrt(n*n+r*r)}},{key:"transformPoint",value:function(e,t){return[this.a*e+this.c*t+this.e,this.b*e+this.d*t+this.f]}},{key:"transformRect",value:function(e,t,n,r){for(var o,a=[e,e,n,n],i=[t,r,t,r],c=0;c<4;c++)o=this.transformPoint(a[c],i[c]),a[c]=o[0],i[c]=o[1];for(var s=[a[0],a[0],i[0],i[0]],l=1;l<4;l++)s[0]>a[l]&&(s[0]=a[l]),s[1]<a[l]&&(s[1]=a[l]),s[2]>i[l]&&(s[2]=i[l]),s[3]<i[l]&&(s[3]=i[l]);return[s[0],s[2],s[1],s[3]]}},{key:"getXUnit",value:function(){var e=this.a,t=this.b;return 0===t?Math.abs(e):0===e?Math.abs(t):Math.sqrt(e*e+t*t)}},{key:"getYUnit",value:function(){var e=this.c,t=this.d;return 0===e?Math.abs(t):0===t?Math.abs(e):Math.sqrt(e*e+t*t)}},{key:"getUnitRect",value:function(){return this.transformRect(0,0,1,1)}},{key:"matchRect",value:function(e,t){var n=t[0]-t[2];this.a=Math.abs(n)<.001?1:(e[0]-e[2])/n,n=t[3]-t[1],this.d=Math.abs(n)<.001?1:(e[3]-e[1])/n,this.e=e[0]-t[0]*this.a,this.f=e[3]-t[3]*this.d,this.b=0,this.c=0}},{key:"getAngle",value:function(){return Math.atan2(this.b,this.a)}},{key:"toArray",value:function(){return[this.a,this.b,this.c,this.d,this.e,this.f]}}],[{key:"Concat2mt",value:function(t,n){return new e(t.a*n.a+t.b*n.c,t.a*n.b+t.b*n.d,t.c*n.a+t.d*n.c,t.c*n.b+t.d*n.d,t.e*n.a+t.f*n.c+n.e,t.e*n.b+t.f*n.d+n.f)}}]),e}();var I=w.PDFViewCtrl,A=I.shared.DebounceTaskExecutor,T=I.DeviceInfo.isIOS,M=w.vendors.jQuery,F="",O=M('<input style="opacity:0;position:fixed;z-index: -1;" tabindex="-1" title="input chart"/>');M("body").append(O);var R=!1,j=new A(20);T&&(j={exec:function(e){e()}});var D=function(e,t){},B={onChar:D};O.on("compositionstart",(function(){R=!0})).on("compositionend",(function(e){R=!1,B.onChar(e.originalEvent.data,e),O.val(""),F=""})).on("input",(function(e){var t=O.val();!R&&t.length>F.length&&B.onChar(t.replace(F,""),e),R?F=t:(O.val(""),F="")})).on("keydown",(function(e){(e.shiftKey&&e.ctrlKey&&90===e.keyCode||e.ctrlKey&&89===e.keyCode)&&e.preventDefault()}));var U=function(){O.val(F="")};const N={startInput:function(e){B.onChar=e,U(),j.exec((function(){O.focus()}))},endInput:function(){B.onChar=D,j.exec((function(){B.onChar===D&&O.blur()}))},refocusInput:function(){j.exec((function(){O.focus()}))},isCompositionInput:function(){return R},getElement:function(){return O},resetValue:U,setPos:function(e,t){O.css({left:e,top:t})}};var L=UIExtension.vendors.jQuery,V=function(){function e(t){var n=this;i(this,e),l(this,"keydown",void 0),l(this,"keyup",void 0),l(this,"trace",void 0),this.trace=!0,L(document).on("keydown",this.keydown=function(e){if(n.trace){var r=e.keyCode;if(t.skipKey(r))return;if(!N.isCompositionInput())return N.resetValue(),t.keydown(e)}}).on("keyup",this.keyup=function(e){if(n.trace){var r=e.keyCode;if(t.skipKey(r))return;if(!N.isCompositionInput())return N.resetValue(),t.keyup(e)}})}return s(e,[{key:"stop",value:function(){this.trace=!1}},{key:"start",value:function(){this.trace=!0}},{key:"destroy",value:function(){L(document).off("keydown",this.keydown),L(document).off("keyup",this.keyup)}}]),e}(),z={shiftKey:1,ctrlKey:2,altKey:4,metaKey:8},H=function(e){var t=0;for(var n in z)e[n]&&(t|=z[n]);return t},K=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Down";switch(e.button){case 0:t="OnLButton"+n;break;case 1:t="OnWheelButton"+n;break;case 2:t="OnRButton"+n}return t},$={37:"up",38:"left",39:"right",40:"down",46:"Delete",67:"c",86:"v",88:"x",8:"backspace",13:"enter",27:"esc"},W=w.PDFViewCtrl.shared.dpr,G=[];function Y(e,t){try{var n=t.$ui.find(".touchup_handler")[0];if(null==n)return;var r=n.getBoundingClientRect(),o=[],a=t.$ui.find(".fv__pdf-doc-handler-container"),i=t.$ui[0].getBoundingClientRect(),c=!0,s=!1,l=void 0;try{for(var u,p=e[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){var d=u.value,g=document.createElement("div");g.style.webkitBackdropFilter="invert(1)",g.style.backdropFilter="invert(1)",g.style.position="absolute",g.style.left=d.left/W+r.left-i.left+"px",g.style.top=d.bottom/W+r.top-i.top+"px",g.style.width=(d.right-d.left)/W+"px",g.style.height=(d.top-d.bottom)/W+"px",a.append(g),o.push(g)}}catch(e){s=!0,l=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw l}}G=o}catch(e){console.log("revert error",e)}}function J(){var e=!0,t=!1,n=void 0;try{for(var r,o=G[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;a.parentNode.removeChild(a)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}G=[]}function q(e,t,n){switch(t){case"font-family":e.handleEvent("OnFontNameChanged",{type:"WString",value:n});break;case"font-size":e.handleEvent("OnFontSizeChanged",Number(n));break;case"font-color":e.handleEvent("OnTextColorChanged","transparent"===(r=n)?0:parseInt("FF"+r.slice(1),16));break;case"font-bold":e.handleEvent("OnBoldItalicChanged",{type:"WString",value:""},n,!1,!0);break;case"font-italic":e.handleEvent("OnBoldItalicChanged",{type:"WString",value:""},!1,n,!1);break;case"font-underline":e.handleEvent("OnUnderlineChanged",n);break;case"font-strikethrough":e.handleEvent("OnCrossChanged",n);break;case"font-super-sub-script":"font-superscript"===n[0]?e.handleEvent("OnSuperScriptChanged",!0):"font-subscript"===n[0]?e.handleEvent("OnSubScriptChanged",!0):(e.handleEvent("OnSuperScriptChanged",!1),e.handleEvent("OnSubScriptChanged",!1));break;case"font-character-spacing":e.handleEvent("OnCharSpaceChanged",Number(n));break;case"paragraph-bullets":e.handleEvent("OnBulletedList",{type:"NumberingType",value:parseInt(n[n.length-1])});break;case"paragraph-numbering":e.handleEvent("OnNumberedList",{type:"BulletType",value:parseInt(n[n.length-1])});break;case"paragraph-align":"left"===n?e.handleEvent("OnAlignChanged",0):"center"===n?e.handleEvent("OnAlignChanged",1):"right"===n?e.handleEvent("OnAlignChanged",2):"justify"===n&&e.handleEvent("OnAlignChanged",3);break;case"paragraph-increase":e.handleEvent("OnInDentChanged");break;case"paragraph-decrease":e.handleEvent("OnDeDentChanged");break;case"paragraph-line-spacing":e.handleEvent("OnLineLeadingChanged",Number(n));break;case"paragraph-spacing":e.handleEvent("OnParagraphSpacingChanged",Number(n));break;case"paragraph-character-scale":e.handleEvent("OnCharHorzScaleChanged",parseInt(n))}var r}var X={Annotation:0,TextObject:1,PathObject:2,ImageObject:3,ShadingObject:4,FormXObject:5,TouchUp:6,Measure:7,DistanceObject:8,NoteObject:9,Drawing:10,EraserObject:11,FileObject:12,HighlightObject:13,PencilObject:14,FreeText:15},Q=UIExtension.PDFViewCtrl.FontUtil.FoxitFontMap,Z={0:"page-editor:popMenu.JoinTextBoxes",1:"page-editor:popMenu.SplitTextBoxes",2:"page-editor:popMenu.LinkTextBoxes",3:"page-editor:popMenu.UnlinkTextBoxes",4:"page-editor:popMenu.SelectNone",5:"page-editor:popMenu.MaxValue",32751:"page-editor:popMenu.Undo",32752:"page-editor:popMenu.Redo",32753:"page-editor:popMenu.Cut",32754:"page-editor:popMenu.Copy",32755:"page-editor:popMenu.Paste",32756:"page-editor:popMenu.Delete",32757:"page-editor:popMenu.SelectAll",32758:"page-editor:popMenu.RightToLeft",32759:"page-editor:popMenu.LeftToRight",32760:"SuggestStart"},ee=0,te=1,ne=2,re=3,oe=4,ae=5,ie={Line:0,Rectangle:1,RoundRect:2,Ellipse:3,Polyline:4,Polygon:5,Polybezier:6,Curve:7,Freedom:8},ce={Invalid:0,All:1,Text:2,Image:3,Path:4,Shading:5},se={LineCap:{1:"ProjectingSquareCap",2:"Round",3:"Butt",ProjectingSquareCap:1,Round:2,Butt:3},LineJoin:{1:"Round",2:"Bevel",3:"Miter",Round:1,Bevel:2,Miter:3}},le={0:"None",1:"Text",2:"Path",3:"Image",4:"Shading",5:"Mixed",None:0,Text:1,Path:2,Image:3,Shading:4,Mixed:5},ue={2:"Text",3:"Image",4:"Path",5:"Shading",Text:2,Image:3,Path:4,Shading:5},pe={0:"Left",1:"Right",2:"Top",3:"Bottom",4:"Vertical",5:"Horizontal",Left:0,Right:1,Top:2,Bottom:3,Vertical:4,Horizontal:5},de={0:"Left",1:"Center",2:"Right",3:"Justify",Left:0,Center:1,Right:2,Justify:3},ge={0:"Vertical",1:"Horizontal",2:"Both",Vertical:0,Horizontal:1,Both:2},he={0:"Back",1:"Front",Back:0,Front:2},fe={0:"Line",1:"Rectangle",2:"RoundRect",3:"Ellipse",4:"Polyline",5:"Polygon",6:"Polybezier",7:"Curve",8:"Freedom",9:"Unknow",Line:0,Rectangle:1,RoundRect:2,Ellipse:3,Polyline:4,Polygon:5,Polybezier:6,Curve:7,Freedom:8,Unknow:9},ve={0:"None",1:"Super",2:"Sub",None:0,Super:1,Sub:2},me={0:"None",1:"All",2:"Text",3:"Image",4:"Path",5:"Shading",None:0,All:1,Text:2,Image:3,Path:4,Shading:5},be={0:"Left2Right",1:"Right2Left",Left2Right:0,Right2Left:1},ye={0:"Butt",1:"Round",2:"ProjectingSquareCap",Butt:0,Round:1,ProjectingSquareCap:2},Pe={0:"Miter",1:"Round",2:"Bevel",Miter:0,Round:1,Bevel:2},Ce={PopupMenuItem_e_PopupMenuItemProperties:"Properties",PopupMenuItem_e_PopupMenuItemSetDefault:"SetDefault",PopupMenuItem_e_PopupMenuItemEditObject:"EditObject",PopupMenuItem_e_PopupMenuItemChangeOrderStartFlag:"ChangeOrderStartFlag",PopupMenuItem_e_PopupMenuItemBackward:"Backward",PopupMenuItem_e_PopupMenuItemForward:"ForwardGround",PopupMenuItem_e_PopupMenuItemBackGround:"BackGround",PopupMenuItem_e_PopupMenuItemFrontGround:"FrontGround",PopupMenuItem_e_PopupMenuItemChangeOrderEndFlag:"ChangeOrderEndFlag",PopupMenuItem_e_PopupMenuItemCut:"Cut",PopupMenuItem_e_PopupMenuItemCopy:"Copy",PopupMenuItem_e_PopupMenuItemPaste:"Paste",PopupMenuItem_e_PopupMenuItemPasteInPlace:"PasteInPlace",PopupMenuItem_e_PopupMenuItemDelete:"Delete",PopupMenuItem_e_PopupMenuItemAlignStartFlag:"AlignStartFlag",PopupMenuItem_e_PopupMenuItemAlignLeft:"AlignLeft",PopupMenuItem_e_PopupMenuItemAlignRight:"AlignRight",PopupMenuItem_e_PopupMenuItemAlignTop:"AlignTop",PopupMenuItem_e_PopupMenuItemAlignBottom:"AlignBottom",PopupMenuItem_e_PopupMenuItemAlignVertical:"AlignVertical",PopupMenuItem_e_PopupMenuItemAlignHorizontal:"AlignHorizontal",PopupMenuItem_e_PopupMenuItemAlignEndFlag:"AlignEndFlag",PopupMenuItem_e_PopupMenuItemCenterStartFlag:"CenterStartFlag",PopupMenuItem_e_PopupMenuItemCenterVertical:"CenterVertical",PopupMenuItem_e_PopupMenuItemCenterHorizontal:"CenterHorizontal",PopupMenuItem_e_PopupMenuItemCenterBoth:"CenterBoth",PopupMenuItem_e_PopupMenuItemCenterEndFlag:"CenterEndFlag",PopupMenuItem_e_PopupMenuItemDistributeStartFlag:"DistributeStartFlag",PopupMenuItem_e_PopupMenuItemDistributeVertical:"DistributeVertical",PopupMenuItem_e_PopupMenuItemDistributeHorizontal:"DistributeHorizontal",PopupMenuItem_e_PopupMenuItemDistributeEndFlag:"DistributeEndFlag",PopupMenuItem_e_PopupMenuItemSizeStartFlag:"SizeStartFlag",PopupMenuItem_e_PopupMenuItemSizeWidth:"SizeWidth",PopupMenuItem_e_PopupMenuItemSizeHeight:"SizeHeight",PopupMenuItem_e_PopupMenuItemSizeBoth:"SizeBoth",PopupMenuItem_e_PopupMenuItemSizeEndFlag:"SizeEndFlag",PopupMenuItem_e_PopupMenuItemRotateStartFlag:"RotateStartFlag",PopupMenuItem_e_PopupMenuItemRotateClockwise:"RotateClockwise",PopupMenuItem_e_PopupMenuItemRotateCounterClockwise:"RotateCounterClockwise",PopupMenuItem_e_PopupMenuItemRotateMoreOptions:"RotateMoreOptions",PopupMenuItem_e_PopupMenuItemRotateEndFlag:"RotateEndFlag",PopupMenuItem_e_PopupMenuItemFlipStartFlag:"FlipStartFlag",PopupMenuItem_e_PopupMenuItemFlipVertical:"FlipVertical",PopupMenuItem_e_PopupMenuItemFlipHorizontal:"FlipHorizontal",PopupMenuItem_e_PopupMenuItemFilpEndFlag:"FilpEndFlag",PopupMenuItem_e_PopupMenuItemShear:"Shear",PopupMenuItem_e_PopupMenuItemAddClipStartFlag:"AddClipStartFlag",PopupMenuItem_e_PopupMenuItemAddClipRectangle:"AddClipRectangle",PopupMenuItem_e_PopupMenuItemAddClipElipse:"AddClipElipse",PopupMenuItem_e_PopupMenuItemAddClipRoundRectangle:"AddClipRoundRectangle",PopupMenuItem_e_PopupMenuItemAddClipPolygon:"AddClipPolygon",PopupMenuItem_e_PopupMenuItemAddClipCurve:"AddClipCurve",PopupMenuItem_e_PopupMenuItemAddClipDrawing:"AddClipDrawing",PopupMenuItem_e_PopupMenuItemAddClipEndFlag:"AddClipEndFlag",PopupMenuItem_e_PopupMenuItemEditClip:"EditClip",PopupMenuItem_e_PopupMenuItemClearClip:"ClearClip",PopupMenuItem_e_PopupMenuItemConvert2Shape:"Convert2Shape",PopupMenuItem_e_PopupMenuItemMaxValue:"MaxValue",PopupMenuItem_e_PopupMenuItemShadingDelete:"Delete",PopupMenuItem_e_PopupMenuItemShadingInsertStartFlag:"InsertStartFlag",PopupMenuItem_e_PopupMenuItemShadingInsertLine:"InsertLine",PopupMenuItem_e_PopupMenuItemShadingInsertBessel:"InsertBessel",PopupMenuItem_e_PopupMenuItemShadingInsertEndFlag:"InsertEndFlag",PopupMenuItem_e_PopupMenuItemShadingChangeToStartFlag:"ChangeToStartFlag",PopupMenuItem_e_PopupMenuItemShadingChangeToLine:"ChangeToLine",PopupMenuItem_e_PopupMenuItemShadingChangeToBessel:"ChangeToBessel",PopupMenuItem_e_PopupMenuItemShadingChangeToEndFlag:"ChangeToEndFlag",PopupMenuItem_e_PopupMenuItemShadingClose:"Close",PopupMenuItem_e_PopupMenuItemShadingExit:"Exit",PopupMenuItem_e_PopupMenuItemShadingMaxValue:"MaxValue",PopupMenuItem_e_PopupMenuItemTextUndo:"Undo",PopupMenuItem_e_PopupMenuItemTextRedo:"Redo",PopupMenuItem_e_PopupMenuItemTextCut:"Cut",PopupMenuItem_e_PopupMenuItemTextCopy:"Copy",PopupMenuItem_e_PopupMenuItemTextPaste:"Paste",PopupMenuItem_e_PopupMenuItemTextDelete:"Delete",PopupMenuItem_e_PopupMenuItemTextDirection:"TextDirection",PopupMenuItem_e_PopupMenuItemTextDirectionL2R:"TextDirectionL2R",PopupMenuItem_e_PopupMenuItemTextDirectionR2L:"TextDirectionR2L",PopupMenuItem_e_PopupMenuItemTextSelectAll:"SelectAll",PopupMenuItem_e_PopupMenuItemPathDelete:"Delete",PopupMenuItem_e_PopupMenuItemPathInsertStartFlag:"InsertStartFlag",PopupMenuItem_e_PopupMenuItemPathInsertLine:"InsertLine",PopupMenuItem_e_PopupMenuItemPathInsertBessel:"InsertBessel",PopupMenuItem_e_PopupMenuItemPathInsertEndFlag:"InsertEndFlag",PopupMenuItem_e_PopupMenuItemPathChangeToStartFlag:"ChangeToStartFlag",PopupMenuItem_e_PopupMenuItemPathChangeToLine:"ChangeToLine",PopupMenuItem_e_PopupMenuItemPathChangeToBessel:"ChangeToBessel",PopupMenuItem_e_PopupMenuItemPathChangeToEndFlag:"ChangeToEndFlag",PopupMenuItem_e_PopupMenuItemPathClose:"Close",PopupMenuItem_e_PopupMenuItemPathAddLine:"AddLine",PopupMenuItem_e_PopupMenuItemPathAddRectangle:"AddRectangle",PopupMenuItem_e_PopupMenuItemPathAddEllipse:"AddEllipse",PopupMenuItem_e_PopupMenuItemPathAddLineDrawing:"AddLineDrawing",PopupMenuItem_e_PopupMenuItemPathExit:"Exit",PopupMenuItem_e_PopupMenuItemPathMaxValue:"MaxValue"},xe="EditObject",Se="AddText",we="AdvEditStateHandlerName",Ee=Object.assign({},{"Foxit Fixed OTF":"Courier","Foxit Sans OTF":"Helvetica","Foxit Serif OTF":"Times-Roman",FoxitSansOTF:"Helvetica"},Q);function ke(){return(ke=n((function(e,t,n,r,o){var a,i,c,s;return S(this,(function(l){switch(l.label){case 0:return a=["","font-superscript","font-subscript"],i=["left","center","right","justify"],c={fontFamily:{value:Ee[r]||r},fontSize:{value:Math.round(100*t.fontSize)/100},fontColor:{enable:!0,value:t.wordColor},fontBold:{value:t.isBold},fontItalic:{value:t.isItalic},fontUnderline:{value:t.isUnderline},fontStrikethrough:{value:t.isCross},fontSuperSubScript:{value:a[t.scriptType]},fontCharacterSpacing:{value:t.charSpace},fontWritingDirection:{enable:!1},paragraphBullets:{enable:!0},paragraphNumbering:{enable:!0},paragraphAlign:{enable:!0,value:i[n.alignment]},paragraphIncrease:{enable:!0},paragraphDecrease:{enable:!0},paragraphLineSpacing:{value:n.lineLeading},paragraphSpacing:{value:n.secSpace.toFixed(2)},paragraphWordSpacing:{enable:!1},paragraphCharacterScale:{value:t.horzScale},bulletType:o.bulletType,numberType:o.numberType},e?[4,e.getComponentByName("edit-properties")]:[2];case 1:return(s=l.sent())?(s.enable(),s.setHost(c,X.TouchUp),[2]):[2]}}))}))).apply(this,arguments)}function _e(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=n((function(e){var t;return S(this,(function(n){switch(n.label){case 0:return e?[4,e.getComponentByName("edit-properties")]:[2];case 1:return(t=n.sent())&&t.disable(),[2]}}))}))).apply(this,arguments)}function Ae(){return(Ae=n((function(e){var t;return S(this,(function(n){switch(n.label){case 0:return e?[4,e.getComponentByName("edit-properties")]:[2];case 1:return(t=n.sent())&&t.enable(),[2]}}))}))).apply(this,arguments)}var Te=function(){function e(){i(this,e),this.events={}}return s(e,[{key:"register",value:function(e,t,n){for(var o=r(t,Array)?t:[t],a=0;a<o.length;a++)this._addEventData(e,o[a],n);return this._addKeydownEvent(),this}},{key:"unregister",value:function(e,t){for(var n=0,o=t?r(t,Array)?t:[t]:Object.keys(this.events),a=0;a<o.length;a++)n=this._removeEventData(e,o[a]);0===n&&(this.keydownEvent&&this.keydownEvent.destroy(),this.keydownEvent=void 0,this.mouseoverEvent&&this.mouseoverEvent.destroy(),this.mouseoverEvent=void 0)}},{key:"_addEvent",value:function(e,t,n){if(e&&t){var r=n||document;r.addEventListener(e,t);return{destroy:function(){r.removeEventListener(e,t)}}}}},{key:"_addKeydownEvent",value:function(){var e=this;this.keydownEvent||(this.mouseoverEvent=this._addEvent("mouseover",(function(t){e.mouseoverElement=t.target}),document),this.keydownEvent=this._addEvent("keydown",(function(t){var n=e._matchEventData(e._getKeyFromEvent(t));n&&n(t)})))}},{key:"_addEventData",value:function(e,t,n){this.events[t]||(this.events[t]=[]);for(var r=this.events[t],o=0;o<r.length;o++){if(r[o][0]===e)return void console.error("Duplicate binding of shortcut key：",t,", on dom:",e)}this.events[t].push([e,n])}},{key:"_removeEventData",value:function(e,t){for(var n=this.events[t]||[],r=0;r<n.length;r++){if(n[r][0]===e){n.splice(r,1),0===n.length&&delete this.events[t];break}}return Object.keys(this.events).length}},{key:"_matchEventData",value:function(e){var t,n=this,r=this._getPrevKey(),o=this.events,a=r?"".concat(r,",").concat(e):"",i=function(e){if(!e)return null;for(var t in o)if(n._isKeyEqual(t,e))return o[t];return null};return(t=i(e)||i(a))?this._removePrevKey():this._addPrevKey(a||e),this._matchEventCallback(t)}},{key:"_matchEventCallback",value:function(e){if(!e||0===e.length)return null;var t=e.filter((function(e){var t=e[0];if(t===document)return!0;var n=t.getBoundingClientRect();return n.x+n.y+n.width+n.height>0}));e.length>1&&t.sort((function(e,t){var n=e[0],r=t[0];return n.contains(r)?-1:r.contains(n)?1:0})).reverse();for(var n=[document.activeElement,this.mouseoverElement],r=0;r<n.length;r++){var o=n[r];if(o)for(var a=["INPUT","TEXTAREA"].includes(o.nodeName)||"true"===o.contentEditable,i=0;i<t.length;i++){var c=t[i],s=c[0],l=c[1];if(s===o)return l;if(!a&&s.contains(o))return l}}}},{key:"_addPrevKey",value:function(e){var t=this;this._removePrevKey(),this._prev_key=e,this._prev_key_timer=setTimeout((function(){t._removePrevKey()}),2e3)}},{key:"_getPrevKey",value:function(){return this._prev_key}},{key:"_removePrevKey",value:function(){this._prev_key=void 0,this._prev_key_timer&&clearTimeout(this._prev_key_timer),this._prev_key_timer=void 0}},{key:"_getKeyFromEvent",value:function(e){var t=e.key,n=(e.keyCode,e.code,e.altKey),r=e.ctrlKey,o=e.shiftKey,a=e.metaKey,i=[t];return n&&"Alt"!==t&&i.unshift("Alt"),r&&"Control"!==t&&i.unshift("Ctrl"),o&&"Shift"!==t&&i.unshift("Shift"),a&&"Meta"!==t&&i.unshift("Meta"),i.join("+")}},{key:"_isKeyEqual",value:function(e,t){return e=e.toLowerCase().replaceAll("control","ctrl").replaceAll("escape","esc"),t=t.toLowerCase().replaceAll("control","ctrl").replaceAll("escape","esc"),e.indexOf("+")>-1&&t.indexOf("+")>-1?e.split("+").sort((function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)?-1:e.charCodeAt(0)<t.charCodeAt(0)?1:0})).join("+")===t.split("+").sort((function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)?-1:e.charCodeAt(0)<t.charCodeAt(0)?1:0})).join("+"):e===t}}],[{key:"getInstance",value:function(){return window.Shortcut?window.Shortcut:window.Shortcut=new e}}]),e}();Te.getInstance();var Me=o(732);function Fe(e,t,n,r,o,a){var i=e.target;if(!(i==t.getElement()[0]||0==n||Me.isIOS&&"div"===i.localName&&i.isContentEditable)){if("input"===i.localName||"textarea"===i.localName||i.isContentEditable)return"value"==i.name||i.classList.contains("fv__ui-dropdown-editor")?void o():(o(),void a());r(),t.getElement().focus()}}var Oe=w.PDFViewCtrl.commons.copyText;function Re(e,t,r){var o=[],a=!0,i=!1,c=void 0;try{for(var s,l=function(){var t=s.value,a=t.name,i=t.enable,c=t.id,l=t.subItems;if("-"===a||"touchup"===r&&0===a)o.push({type:"separator"});else{var u={text:Z[a],id:c,enable:i,shortcut:"",onClick:function(){return n((function(){var t,n;return S(this,(function(r){switch(r.label){case 0:return t=e.doc,32755!==c?[3,3]:[4,(0,Me.readFromClipboard)()];case 1:return n=r.sent(),[4,e.handleEvent("UpdateClipboardText",n)];case 2:r.sent(),r.label=3;case 3:return e.triggerTUPopMenuAction(c).then((function(){[32753,32754].includes(a)&&t.api.handleTouchUpEvent(t.getId(),"GetClipboardText").then((function(e){Oe(e)}))})),[2]}}))}))()}};l&&(contentSubItems=Re(e,l),u.subMenu=contentSubItems),o.push(u)}},u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)l()}catch(e){i=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}return o}function je(e,t,n,r,o,a){var i=Re(t,o,n),c=document.querySelector(".fv__ui-pdfviewer").getBoundingClientRect(),s=c.x,l=c.y;e.popMenu(r.x+s,r.y+l,i)}var De=o(3279),Be=o.n(De);function Ue(e){if("clientX"in e)return e.clientX;switch(e.type){case"touchstart":case"touchmove":return e.touches[0].clientX;case"touchend":case"touchcancel":return e.changedTouches[0].clientX}}function Ne(e){if("clientY"in e)return e.clientY;switch(e.type){case"touchstart":case"touchmove":return e.touches[0].clientY;case"touchend":case"touchcancel":return e.changedTouches[0].clientY}}var Le=w.vendors.jQuery,Ve=w.PDFViewCtrl,ze=w.UIEvents,He=w.vendors.Hammer,Ke=Ve.DeviceInfo,$e=Ke.isTouchDevice,We=Ke.isDesktop,Ge=w.PDFViewCtrl,Ye=Ge.commons,Je=Ye.copyText,qe=Ye.readFromClipboard,Xe=(Ge.shared.createDeferred,Ge.DeviceInfo),Qe=Xe.isMobile,Ze=Xe.isTablet,et=Promise.resolve(),tt=0,nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"OnKeyDown",n=arguments.length>2?arguments[2]:void 0;return et=et.then((function(r){return St.trigger(t,[e.keyCode]).then((function(t){n&&n.doc.getTouchup().handleEvent("GetCaretFootPositon").then((function(t){if(t){var r=e.target;if(r===N.getElement()[0]){var o=n.pdfViewer.$ui.parent().offset();r.style.top=o.top+t.y-r.offsetHeight+"px",r.style.left=o.left+t.x+"px"}}}));return t}))}))},rt=!0;var ot,at={3:"nesw-resize",0:"ns-resize",2:"nwse-resize",1:"ew-resize",4:"move"},it="touchup",ct=!1,st="",lt=function(){return"findReplace"===it&&ot&&0===ot.pdfViewer.currentPDFDoc.checkPermission(Ve.PDF.constant.User_Permissions.modify)},ut=function(e){g(r,e);var t=x(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).destroyHooks=[],n.canScroll=!0,n.rectsCache=[],n.index=-1,n.ocrCache=[],n.disableToggleCaret=!1,n.throttleRender=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){var r=this,o=arguments;n||(n=setTimeout((function(){e.apply(r,o),n=null}),t))}}((function(){n.pdfViewer.redraw(1,0)})),window&&(window.PageEditorTrigger=St),n}return s(r,[{key:"goToPage",value:function(e,t,n){if(this.docRender){var r=this.docRender.getPDFPageRender(e);if(r){var o=b(r.getPDFPointFromClientPoint(t,n,!0),2),a=o[0],i=o[1],c=this.docRender.pdfViewer,s=this.uiContainerRect.height||0;c.goToPage(e,i-s/4,a,!1)}}}},{key:"docHandler",value:function(e){var t=this,o=this;this.docRender=e;var a=this.pdfViewer;St.setDocRender(this.docRender,"touchup");var i=a.viewerUI.loading();St.trigger("restartTouchup").then((function(e){ht(a,1,0).then((function(e){i();var t="findReplace"==it?"touchup":it;St.trigger("OnActivate",[t,ct])}))})),this.setEditorNotifier(),this.keyMgr=new V({skipKey:function(e){var t=document.activeElement!==N.getElement()[0];return t?!$[e]&&void 0:t},keydown:function(n){if(t.pdfViewer.isShortcutKeyEnabled()){var r=t.handleSpecialKesEvent(n);if(([37,38,39,40].indexOf(n.keyCode)>=0||Me.isMac&&n.metaKey&&[89].indexOf(n.keyCode)>=0)&&(n.preventDefault(),n.stopPropagation()),27==n.keyCode&&St.trigger("ExitEditing",[!1]),8==n.keyCode&&St.trigger("OnChar",[String.fromCharCode(n.keyCode)]),r)return!1;nt(n,"OnKeyDown",e)}},keyup:function(n){t.pdfViewer.isShortcutKeyEnabled()&&(13==n.keyCode?St.trigger("OnChar",[String.fromCharCode(n.keyCode)]):nt(n,"OnKeyUp",e))}}),Le(document).on("focusin",this._focusinLisener=function(e){Fe(e,N,tt,(function(){return t.keyMgr.start()}),(function(){return t.keyMgr.stop()}),(function(){return s()}))}),Le(document).on("mouseup",this.cancelDown=function(e){if(!(e.target.classList&&e.target.classList.contains("fv__pdf-doc-handler-container")||Le(e.target).hasClass("icon-btn")||Le(e.target).parents('[name="fv--plugin-PageEditor-add-shape"]').length||Le(e.target).parents(".icon-btn").length||Le(e.target).parents('[name="edit-properties"]').length)){var n=K(e,"Up");return setTimeout((function(){if(t.docRender){var r=St.getPageIndex(e);-1!==r&&St.trigger(n,St.getArgs(r,e)).then((function(e){return t.actionFinalUpdate()}))}}),200)}}),this.setEditorNotifier();var c=function(){o.uiContainerRect=e.pdfViewer.$ui[0].parentElement.getBoundingClientRect();ht(a,1,0);st=""};[Ve.Events.fitWidthResizeViewport,Ve.Events.zoomToSuccess,Ve.Events.afterDocumentRotation,Ve.Events.pageRotationChanged,Ve.Events.pagesRotated,Ve.Events.importPages,Ve.Events.pageAdded,Ve.Events.pageMoved,Ve.Events.pagesMoved].forEach((function(e){t.destroyHooks.push(a.addEventListener(e,c))}));var s=function(){St.trigger("ExitEditing",[!1]);var e={clientX:50,clientY:150},t=St.getPageIndex(e);-1!==t&&St.trigger("OnLButtonUp",St.getArgs(t,e),2)},l=this.docRender.doc.getTouchup();this.destroyHooks.push(a.addEventListener(ze.editPropertiesAction,(function(e){var n=e.name,r=e.value;$e&&!We&&("font-family"!==n&&"paragraph-numbering"!==n&&"paragraph-align"!==n&&"paragraph-increase"!==n&&"paragraph-decrease"!==n||(t.disableToggleCaret=!0)),q(l,n,r)})),a.addEventListener("restartTouchup",(function(){St.trigger("restartTouchup").then((function(e){ht(a,1,0).then((function(e){var t="findReplace"==it?"touchup":it;St.trigger("OnActivate",[t,!1])}))}))})),a.addEventListener("before-page-rotation-changed",s),a.addEventListener("exitTouchup",s),a.addEventListener(ze.switchStateHandler,s),$e&&!We?a.addEventListener("refocusInput",(function(){t.disableToggleCaret=!1,N.refocusInput()})):function(){});var u=this.$handler=e.$container.siblings(".fv__pdf-doc-handler-container");u.css("z-index",80);var p=u.get(0);if(Me.isIOS){var d=function(){t.disableTouchEndEvent?t.disableTouchEndEvent=!1:(t.tempInput=document.createElement("div"),t.tempInput.contentEditable=!0,t.tempInput.style="pointer-events: none;position:absolute;left:0;top:0;right:0;bottom:0;opacity: 0.001;",p.appendChild(t.tempInput),t.tempInput.focus({preventScroll:!0}))};p.addEventListener("touchend",d),this.destroyHooks.push((function(){p.removeEventListener("touchend",d),t.tempInput&&t.tempInput.parentElement&&t.tempInput.remove()}))}var g=this.hammer=new He.Manager(p,{recognizers:[[He.Pan,{direction:He.DIRECTION_ALL}]],time:150}),h=Le('<div class="touchup_handler_container"></div>'),f=Le('<canvas class="touchup_handler" style="backdrop-filter: url(#touchup-revert-bg)"></canvas>');h.append(f),u.before(h),this.destroyHooks.push((function(){u.css("z-index",0),u.off("mousemove mousedown mouseup contextmenu")}));var v,m=this;u.on("mousemove",this.hover=function(e){if(St.cacheMouseCoord(e),rt){var t=St.getPageIndex(e);-1!==t&&St.trigger("OnMouseMove",St.getArgs(t,e),1)}}).on("mousedown",this.RButtionDown=function(e){if(2==e.button){t.$handler.find(".touchup_rect").remove();var n=St.getPageIndex(e);-1!==n&&St.trigger("OnRButtonDown",St.getArgs(n,e),0)}}).on("mouseup",this.RButtionUp=(v=n((function(e){var t,n,r;return S(this,(function(o){switch(o.label){case 0:if(2!=e.button)return[3,6];t=m.docRender.doc.getTouchup(),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,qe()];case 2:return n=o.sent(),[4,t.handleEvent("UpdateClipboardText",n)];case 3:case 4:return o.sent(),[3,5];case 5:-1!==(r=St.getPageIndex(e))&&St.trigger("OnRButtonUp",St.getArgs(r,e),0),o.label=6;case 6:return[2]}}))})),function(e){return v.apply(this,arguments)})).on("contextmenu",(function(e){return!1})),window.addEventListener("wheel",this.cancelWheel=function(e){t.canScroll||e.preventDefault()},{passive:!1}),this.destroyHooks.push((function(){u.css("z-index",0),Le(document).off("mouseup",t.cancelDown),u.off("mousemove",t.hover),u.off("mousedown",t.RButtionDown),u.off("mouseup",t.RButtionUp),window.removeEventListener("wheel",t.cancelWheel),Le(document).off("focusin",t._focusinLisener)})),g.add(new He.Tap({event:"doubletap",taps:2})),g.add(new He.Tap({event:"singletap"})),g.add(new He.Press);try{g.get("doubletap").recognizeWith("singletap"),g.get("singletap").requireFailure("doubletap"),g.on("hammer.input",(function(e){if("mouse"==e.pointerType&&!lt())if("pointerdown"!=e.srcEvent.type){if("pointerup"==e.srcEvent.type){rt=!0,e=e.srcEvent;var n=St.getPageIndex(e);if(-1===n)return;var r=K(e,"Up");St.trigger(r,St.getArgs(n,e))}}else{rt=!1,e=e.srcEvent;var o=K(e);t.$handler.find(".touchup_rect").remove();var a=St.getPageIndex(e);-1!==a&&St.trigger(o,St.getArgs(a,e))}})),g.on("singletap",(function(e){if("mouse"!=e.pointerType&&(t.$handler.find(".touchup_rect").remove(),e=e.srcEvent,!lt())){t.LButtionEvent=e;var n=K(e),r=St.getPageIndex(e);if(-1!==r){var o=St.trigger(n,St.getArgs(r,e));n=K(e,"Up"),o.then((function(t){return St.trigger(n,St.getArgs(r,e),2)})),o.then((function(n){t.goToPage(r,Ue(e),Ne(e))}))}}})),g.on("panstart",(function(e){t.disableTouchEndEvent=!0,t.canScroll=!1,lt()||(t.LButtionEvent=e.srcEvent,t.$handler.find(".touchup_rect").remove(),r.panStartHandle(e))})),g.on("panmove",(function(e){r.panMoveHandle(e)})),g.on("panend",(function(e){t.canScroll=!0,r.panEndHandle(e)})),g.on("doubletap",(function(e){lt()||(t.LButtionEvent=e.srcEvent,t.$handler.find(".touchup_rect").remove(),r.doubleTapHandle(e))})),g.on("press",(function(e){if("mouse"!=e.pointerType){t.disableTouchEndEvent=!0;var n=St.getPageIndex(e.srcEvent);-1!==n&&St.trigger("OnRButtonUp",St.getArgs(n,e.srcEvent),0)}}))}catch(e){console.error(e)}c(!1)}},{key:"actionFinalUpdate",value:function(e){}},{key:"setEditorNotifier",value:function(){var e=this,t={gotoPageView:function(t){var n=JSON.stringify(t);if(st!=n){st=n;var o=t.index,a=t.left,i=t.top,c=e.uiContainerRect.height,s=e.pdfViewer.getPDFDocRender().getPDFPageRender(0),l=s.page;if(l){var u=b(l.reverseDeviceOffset([c,0],s.scale,s.rotate),2),p=u[0];u[1];i+=p/2}"findReplace"==r.getType()?e.pdfViewer.eventEmitter.emit("find-replace-goto",{pageIndex:o,top:i,left:a}):e.pdfViewer.goToPage(o,i,a)}},replaceAllProgress:function(t){var n=t.pageIndex,r=t.total;-1===n?e.pdfViewer.eventEmitter.emit("find-replace-abort"):e.pdfViewer.eventEmitter.emit("find-replace-progress",{pageIndex:n,total:r})},updateTextFormat:function(e){!function(e,t,n,r,o){ke.apply(this,arguments)}(ot,e.wordProp,e.secProps,e.fontName,e)},toggleCaret:function(t,n,r,o){if(!$e||We||!e.disableToggleCaret)if(t)N.startInput((function(e,t){return St.trigger("OnChar",[e])})),tt=3,Me.isIOS&&e.tempInput&&e.tempInput.remove();else{if(tt=0,Me.isIOS)return;N.endInput()}},showPopupMenu:function(t){var n=t.position,r=t.menu,o=(t.pageIndex,e.docRender.doc.getTouchup());je(ot,o,it,n,r)},showMessageBox:function(e){var t=e.id;e.flag,e.data;1===t?(J(),ot.alert(ot.i18n.t("page-editor:alert.joinFailed"))):2===t&&(J(),ot.alert(ot.i18n.t("page-editor:alert.notAvaliable")))},updateView:function(t){var n=t.bitmapInfo,r=t.revertRects;t.redraw;e.displayImage(n,r),"joinSplit"===it&&(!1,e.updateJoinSplitBtns())},enterEdit:function(){e.pdfViewer.eventEmitter.emit(ze.paragraphTextEnterEdit),function(e){Ae.apply(this,arguments)}(ot),N.startInput((function(e,t){return St.trigger("OnChar",[e]).then((function(e){var n=St.getPageIndex(t);-1!==n&&St.trigger("OnMouseMove",St.getArgs(n,t,0,-1))}))})),e.throttleRender(),tt=3,Me.isIOS&&e.tempInput&&e.tempInput.remove()},exitEdit:function(){e.pdfViewer.eventEmitter.emit(ze.paragraphTextExitEdit),ot.getAddonInstance("UndoRedoAddon").then((function(e){e&&e.pushUndoStack("touchup","exitEdit")})),tt=0,ot.getComponentByName("edit-properties").then((function(e){e&&e.hostType===X.TouchUp&&_e(ot)})),vt(ot,{},{}),e.throttleRender()},cursorChange:function(t){e.$handler&&(7==t?(e.$handler.css("cursor",""),e.$handler.addClass("fv__cursor-text")):(e.$handler.removeClass("fv__cursor-text"),e.$handler.css("cursor",at[t]||"")),ct&&(void 0===t||5===t||4===t&&(Qe||Ze))&&e.$handler.css("cursor",ct?"text":""))},progressRelease:function(){},progressCreate:function(e){var t=b(e,2);t[0],t[1]},progressSetText:function(e){var t=b(e,2);t[0],t[1]},progressSetRange:function(e){var t=b(e,3);t[0],t[1],t[2]},progressSetCurrentValue:function(e){var t=b(e,2);t[0],t[1]},progressDestroy:function(e){b(e,1)[0]},fontNameChange:function(e){},docModified:function(){e.docRender&&e.docRender.doc.setDocModified()},OnActivate:Be()((function(){e.pdfViewer.eventEmitter.emit(ze.paragraphTextOnActivate)}),50),OnDeactivate:function(){e.pdfViewer.eventEmitter.emit(ze.paragraphTextOnDeactivate)},pageWithoutText:Be()((function(t){var n=ot;t===e.docRender.currentPageNumber&&n.getPDFPageRender(t).then((function(t){e.ocrPage(t)}))}),300),contentChange:function(t){var n=t.pageIndex,r=t.type;e.throttleRender(),e.docRender&&e.docRender.doc.setDocModified(),e.pdfViewer.eventEmitter.emit(ze.paragraphContentChanged,{pageIndex:n,type:r})},onTextInputReachesLimit:Be()((function(e){ot.alert(ot.i18n.t("page-editor:alert.textInputReachesLimit"))}),300)};this.docRender.doc.getTouchup().setNotifier(t)}},{key:"displayImage",value:function(e,t){var n=ot.pdfViewer.getPDFDocRender();if(n.matrixes){var r=n.matrixes.uiRect,o=r.left,a=r.top,i=e.width,c=e.height,s=e.buffer,l=e.left,u=e.top,p=e.docRect;if(s&&o==l&&a==u){var d=n.$ui[0].getBoundingClientRect(),g=n.pdfViewer.$ui[0].parentElement,h=(this.uiContainerRect=g.getBoundingClientRect(),Le('<div class="touchup_handler_container"></div>')),f=Le('<canvas class="touchup_handler" style="backdrop-filter: url(#touchup-revert-bg)"></canvas>');h.append(f),h.css({left:l-d.left+"px",top:u-d.top+"px",width:g.clientWidth+"px",height:g.clientHeight+"px"});var v=f[0];v.width=i,v.height=c;var m=v.getContext("2d");m.clearRect(0,0,i,c);var b=new(Uint8ClampedArray||Uint8Array)(s),y=m.createImageData(i,c);y.data.set(b);var P=0,C=0;if(p.width==d.width&&p.height==d.height){var x=devicePixelRatio||1;P=Math.floor((d.left-p.left)*x),C=Math.floor((d.top-p.top)*x)}m.putImageData(y,P,C);var S=n.$ui.find(".touchup_handler_container");this.$handler&&this.$handler.before(h),S.hide().remove(),J(),Y(t,n)}}}},{key:"destroyDocHandler",value:function(){St.trigger("OnDeactivate"),this.destroyHooks.forEach((function(e){return e()})),this.docRender.$ui.find(".touchup_handler_container").remove(),this.keyMgr.destroy(),this.hammer.destroy(),"touchup"===it&&_e(ot),J(),this.ocrCache=[],this.docRender=null,this.$handler=null}},{key:"handleSpecialKesEvent",value:function(e){var t=null,n=this.docRender.doc.getTouchup();if(e.ctrlKey||e.metaKey){var r=document.activeElement===N.getElement()[0];switch(e.keyCode){case 67:t=this.doCopy();break;case 86:t=this.doPaste();break;case 90:e.shiftKey?n.handleEvent("Undo",!1,r):n.handleEvent("Undo",!0,r);break;case 89:n.handleEvent("Undo",!1,r)}}return t}},{key:"doCopy",value:function(){var e=this.docRender.doc.getTouchup();return e.handleEvent("DoCopy").then((function(){return e.handleEvent("GetClipboardText").then((function(e){return Je(e)}))}))}},{key:"doPaste",value:function(){var e=this;return qe().then((function(t){if(t){var n=e.docRender.doc.getTouchup();return n.handleEvent("UpdateClipboardText",t).then((function(){return n.handleEvent("DoPaste")}))}}),(function(){e.pdfViewer.viewerUI.alert({level:"warning",message:"alert.clipboard-permission"})}))}},{key:"updateJoinSplitBtns",value:function(){if(this.docRender){var e=this.docRender.doc.getTouchup();e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:ee}).then((function(e){ot.getComponentByName("join-split-join").then((function(t){t&&(e?t.enable():t.disable())}))})),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:te}).then((function(e){ot.getComponentByName("join-split-split").then((function(t){t&&(e?t.enable():t.disable())}))})),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:ne}).then((function(e){ot.getComponentByName("join-split-link").then((function(t){t&&(e?t.enable():t.disable())}))})),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:re}).then((function(e){ot.getComponentByName("join-split-unlink").then((function(t){t&&(e?t.enable():t.disable())}))})),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:oe}).then((function(e){ot.getComponentByName("join-split-select-none").then((function(t){t&&(e?t.enable():(t.disable(),J()))}))})),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:ae}).then((function(e){ot.getComponentByName("join-split-close").then((function(t){t&&(e?t.enable():t.disable())}))}))}}},{key:"ocrPage",value:function(e){var t=e.index;if(!(this.ocrCache.indexOf(t)>-1)){this.ocrCache.push(t);var n=ot,r=e.page;if(!(n.customs&&n.customs.isDisableButton&&n.customs.isDisableButton("edit-text"))){var o=this.getEditingData(),a=this.getScannedEditingSettingData(),i=function(){var t=a.makeAllPages?"":e.index+1;n.customs&&n.customs.convert&&n.customs.convert.doConvertScannedDocument({languages:a.languages.join(","),is_editable:!0,to_find_all_suspects:!1,to_recognize_line_as_path:!1,pageRange:t},(function(e){var r=Promise.resolve();t&&t>1&&(r=n.goToPage(t-1,0,0,!1)),r.then((function(){return n.getRootComponent()})).then((function(e){e.querySelector("edit-text").controller.handle()}))}))};o.alert?n.$confirm({message:"page-editor:confirm.content",id:r.doc.id+"-edit-text-"+e.index,again:!0,autoHide:!1,againText:"page-editor:confirm.againText",level:"question",customBtns:[{id:"setting",text:"page-editor:confirm.buttons.setting"},{id:"recognize",text:"page-editor:confirm.buttons.recognize"},{id:"no",text:"page-editor:confirm.buttons.no"}]}).then((function(e){if("setting"!==e)return i(),!0;n.customs&&n.customs.showScannedEditing&&n.customs.showScannedEditing()})):o.recognize&&i()}}}},{key:"getEditingData",value:function(){var e=localStorage.getItem("EDITING_DATA"),t=ot.customs&&ot.customs.sendGAEvent&&ot.customs.getPreferencesDefaultData&&ot.customs.getPreferencesDefaultData("EditingDefaultData");return e=Object.assign(t||{},e?JSON.parse(e):{})}},{key:"getScannedEditingSettingData",value:function(){var e=localStorage.getItem("SCANNED-EDITING-SETTING-DATA"),t=ot.customs&&ot.customs.sendGAEvent&&ot.customs.getPreferencesDefaultData&&ot.customs.getPreferencesDefaultData("ScannedDocumentSettingDefaultData");return e=Object.assign(t||{},e?JSON.parse(e):{})}}],[{key:"getStateName",value:function(){return"touch-up-editor"}},{key:"setType",value:function(e){it=e,J()}},{key:"isAddingText",value:function(){return ct}},{key:"activateType",value:function(e,t,n,o,a){return r.setType(n),ot=e,ct=o,ht(t,1,0).then((function(t){var n="findReplace"==it?"touchup":it;return e.getPDFDocRender().then((function(e){return St.setDocRender(e,"touchup"),St.trigger("OnActivate",[n,o]).then((function(e){return a&&St.trigger("SelectContent",a)}))}))}))}},{key:"joinSplit2EditText",value:function(e,t){return r.setType("touchup"),ot=e,ht(t,1,0).then((function(e){return St.trigger("JoinSplitToEditText")}))}},{key:"getType",value:function(){return it}},{key:"doubleTapHandle",value:function(e){var t=St.getPageIndex(e.srcEvent);return-1===t?Promise.resolve():St.trigger("OnLButtonDoubleClick",St.getArgs(t,e.srcEvent,0,-1))}},{key:"panEndHandle",value:function(e){e=e.srcEvent;var t=K(e,"Up"),n=St.getPageIndex(e);-1!==n&&St.trigger(t,St.getArgs(n,e),2)}},{key:"panMoveHandle",value:function(e){e=e.srcEvent;var t=St.getPageIndex(e);return-1!==t?St.trigger("OnMouseMove",St.getArgs(t,e),1):Promise.resolve()}},{key:"panStartHandle",value:function(e){var t=St.getPageIndex(e.srcEvent);return-1===t?Promise.resolve():St.trigger("OnLButtonDown",St.getArgs(t,{clientX:e.srcEvent.clientX-e.deltaX,clientY:e.srcEvent.clientY-e.deltaY}))}}]),r}(Ve.IStateHandler);const pt=ut;var dt=0,gt=[];function ht(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=e.getPDFDocRender();if(i&&delete i.matrixes,"page-editor"!==e.getStateHandlerManager().currentStateHandler.getStateName()&&1!=o)return Promise.resolve();if(dt){var c=i.getContainerVisiblePageIndexes();if(t=c,r=gt,Array.isArray(t)&&Array.isArray(r)&&t.length===r.length&&t.every((function(e){return r.includes(e)})))return Promise.resolve()}return new Promise((function(e){return dt=setTimeout(e,a)})).then((function(){var t=e.$ui[0].parentElement,r=t.getBoundingClientRect();if(!i)return dt=0,gt=[],Promise.resolve();var a,c=i.doc,s=i.getContainerVisiblePageIndexes();return gt=s,s.length?s.reduce((a=n((function(e,t){var n,o,a,c,s,l,u,p,d;return S(this,(function(g){switch(g.label){case 0:return[4,e];case 1:return n=g.sent(),(o=i.getPDFPageRender(t)).isRendering()?[4,o.waitRendered()]:[3,3];case 2:g.sent(),g.label=3;case 3:return[4,o.getPDFPage()];case 4:return g.sent()&&(a=o.$ui[0].getBoundingClientRect(),c=a.x-r.x,s=a.y-r.y,l=o.page.getDeviceMatrix(o.rotate),u=o.getScale(),l.scale(u,u),p=new _(l),l.translate(c,s),h=a,f=r,d={left:(d={left:Math.max(h.left,f.left),top:Math.max(h.top,f.top),right:Math.min(h.right,f.right),bottom:Math.min(h.bottom,f.bottom)}).left-r.x,right:d.right-r.x,top:d.top-r.y,bottom:d.bottom-r.y},a={left:a.left-r.x,right:a.right-r.x,top:a.top-r.y,bottom:a.bottom-r.y},n[t]=[u,o.rotate,l,d,a,p]),[2,n]}var h,f}))})),function(e,t){return a.apply(this,arguments)}),Promise.resolve({})).then((function(e){e.visibleIndexes=s,e.uiRect={left:r.left,top:r.top,width:Math.max(1,t.clientWidth),height:Math.max(1,t.clientHeight)},e.dpr=devicePixelRatio||1,i.matrixes=e,dt=0,gt=[];var n=i.$ui[0].getBoundingClientRect();return e.docRect=n,c.api.updateWinlessMatrix(c.id,o,e)})):(dt=0,Promise.resolve())})).finally((function(){dt=0,gt=[]}))}function ft(e,t){return{type:e,value:t}}function vt(e){return mt.apply(this,arguments)}function mt(){return mt=n((function(e){return S(this,(function(t){var r;return e.getRootComponent().then((r=n((function(t){var n,r,o,a,i,c,s,l,u,p,d,g;return S(this,(function(h){switch(h.label){case 0:return n=t.getComponentByName("edit-text"),r=t.getComponentByName("join-split"),o=t.getComponentByName("edit-tab"),[4,e.getStateHandlerManager()];case 1:return a=h.sent(),(i=t.getComponentByName("joinsplit-tab"))||(c=t.getComponentByName("toolbar-tabs"),s=t.getComponentByName("toolbar-tab-bodies"),l=t.getComponentByName("fv--protect-tab-paddle"),u=l?l.index():0,s&&s.insert('<paddle exclude-devices="tablet" name="fv--joinsplit-tab-paddle" visible="false">\n                <group-list name="joinsplit-toolbar-group-list">\n                    <group name="joinsplit-tab-group-join">\n                        <page-editor:join></page-editor:join>\n                        <page-editor:split></page-editor:split>\n                    </group>\n                    <group name="joinsplit-tab-group-link">\n                        <page-editor:link></page-editor:link>\n                        <page-editor:unlink></page-editor:unlink>\n                    </group>\n                    <group name="joinsplit-tab-group-select">\n                        <page-editor:select-none></page-editor:select-none>\n                    </group>\n                    <group name="joinsplit-tab-group-exit">\n                        <page-editor:edit-text @async class="fv__ui-toolbar-show-text-button"></page-editor:edit-text>\n                        <page-editor:close></page-editor:close>\n                    </group>\n                </group-list>\n            </paddle>',u+1),c&&c.insert('<gtab group="toolbar-tab" body="fv--joinsplit-tab-paddle" name="joinsplit-tab" text="toolbar.tabs.join&split.title" @portfolio.unsupport visible="false"></gtab>',6),i=t.getComponentByName("joinsplit-tab")),(p=a.getCurrentStates())!==pt||p.isAddingText()?(n&&n.deactive(),r&&r.deactive(),i&&i.hide()):"touchup"===(d=pt.getType())||"findReplace"==d?(o&&o.active(),n&&n.active(),r&&r.deactive(),i&&i.hide()):"joinSplit"===d&&(n&&n.deactive(),i&&i.show(),i&&i.active(),r&&r.active()),(g=t.getComponentByName("fv--plugin-PageEditor-add-text"))?(p===pt&&p.isAddingText()?g.active():g.deactive(),[2]):[2]}}))})),function(e){return r.apply(this,arguments)})),[2]}))})),mt.apply(this,arguments)}var bt=PDFViewCtrl.shared,yt=bt.getClientX,Pt=bt.getClientY,Ct=w.UIEvents,xt=function(){function e(){i(this,e),this.cache={}}return s(e,[{key:"destroy",value:function(){this.docRender=null}},{key:"setDocRender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pageEditor";this.docRender=e,this.type=t}},{key:"getPageIndex",value:function(e){var t=this;return this.docRender&&this.docRender.pagesRender?this.docRender.pagesRender.pageDOMs.findIndex((function(n){var r=n.getBoundingClientRect(),o=yt(e),a=Pt(e);return void 0===o&&(o=t._clientX),void 0===a&&(a=t._clientY),o>r.left&&o<r.right&&a>r.top&&a<r.bottom})):-1}},{key:"getArgs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=this.docRender,a=[];if(a.push(ft("EditorPage",e)),t){var i=o.pdfViewer.$ui[0].parentElement.getBoundingClientRect(),c=yt(t),s=Pt(t),l=devicePixelRatio||1,u=(c-i.x)*l,p=(s-i.y)*l;a.push(ft("PointF",[u,p]))}return n&&a.push(n),-1!==r&&a.push(r),a}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.docRender)return Promise.resolve();var r=this.docRender,o=r.doc,a=r.pdfViewer;if(o.isDestroyed)return Promise.resolve();var i=document.activeElement,c=i===N.getElement()[0],s=i&&i.getComponent&&i.getComponent();if(s&&"contextmenu"===s.nodeName&&(c=!0),"pageEditor"==this.type){var l=[o.id,e,n].concat(y(t));return o.api.handlePageEditorEvent.apply(o.api,l).then((function(){["OnKeyUp","OnLButtonUp"].includes(e)&&setTimeout((function(){c=document.activeElement===N.getElement()[0],o.api.handlePageEditorEvent.apply(o.api,[o.id,"GetUndoManager",void 0,c]).then((function(e){a.eventEmitter.emit(Ct.undoRedoStoreChange,e,"pageEditor",c)}))}),500)}))}"OnChar"===e&&a.eventEmitter.emit(Ct.paragraphTextOnChar,{char:t[0]});var u=[o.id,e].concat(y(t));return o.api.handleTouchUpEvent.apply(o.api,u).then((function(t){["OnKeyUp","OnLButtonUp"].includes(e)&&o.api.handleTouchUpEvent.apply(o.api,[o.id,"GetUndoManager",void 0,c]).then((function(e){a.eventEmitter.emit(Ct.undoRedoStoreChange,e,"touchUp")}))}))}},{key:"cacheMouseCoord",value:function(e){this._clientX=yt(e),this._clientY=Pt(e)}},{key:"clearPageEditorTouchupRedo",value:function(e,t){var n=this.docRender,r=n.doc,o=n.pdfViewer,a=document.activeElement===N.getElement()[0],i=this.cache.pageEditor,c=(i?i[0].length:0)+(i?i[1].length:0),s=t[0].length,l=t[1].length;c&&c!==s+l?r.api.handlePageEditorEvent.apply(r.api,[r.id,"ClearRedo",void 0,a]).then((function(e){o.eventEmitter.emit(Ct.undoRedoStoreChange,e,"pageEditor",a)})):"pageEditor"===e&&o.eventEmitter.emit(Ct.undoRedoStoreChange,t,"pageEditor",a);var u=this.cache.touchup,p=(u?u[0].length:0)+(u?u[1].length:0),d=t[0].length,g=t[1].length;p&&p!==d+g?r.api.handleTouchUpEvent.apply(r.api,[r.id,"ClearRedo"]).then((function(e){o.eventEmitter.emit(Ct.undoRedoStoreChange,e,"touchUp")})):"touchup"===e&&o.eventEmitter.emit(Ct.undoRedoStoreChange,t,"touchUp"),this.cache[e]=t}}]),e}();const St=new xt;var wt=o(7665),Et=o.n(wt),kt=o(8649),_t=o.n(kt),It=o(7297),At=o.n(It),Tt=o(4945),Mt=o.n(Tt);const Ft={1:"crosshair",3:"nesw-resize",4:"ns-resize",5:"nwse-resize",6:"ew-resize",11:"no-drop",24:"text"};var Ot=UIExtension.vendors.jQuery,Rt=Ot('<div class="pe_tip"></div>');Ot("body").append(Rt);const jt=Rt;var Dt={Courier:{regular:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",bolditalic:"Courier-BoldOblique"},Helvetica:{regular:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",bolditalic:"Helvetica-BoldOblique"},"Times-Roman":{regular:"Times-Roman",bold:"Times-Bold",italic:"Times-Italic",bolditalic:"Times-BoldItalic"}};var Bt={popMenu:{activeObject:null,editingObject:null,position:null,pageIndex:null},addingText:!1,shapeElement:null};function Ut(){return Bt.addingText}function Nt(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Lt(e){for(var t=e.length,n=[],r=0;r<t-1;r++)n.push({fromColor:e[r].color,from:e[r].offset,toColor:e[r+1].color,to:e[r+1].offset});return n}function Vt(e){return"transparent"===e?0:parseInt("FF"+e.slice(1),16)}function zt(e){var t,n,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c="";switch("number"==typeof e&&(e=["int",e]),e[0]){case"int":t=(16711680&e[1])>>16,n=(65280&e[1])>>8,r=255&e[1];break;case"T":t=0,n=0,r=0,i=0;break;case"G":t=n=r=255*e[1];break;case"RGB":t=255*e[1],n=255*e[2],r=255*e[3];break;case"CMYK":t=(1-e[4])*(1-e[1])*255,n=(1-e[4])*(1-e[2])*255,r=(1-e[4])*(1-e[3])*255;break;case"r":t=+(o=e.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/))[1],n=+o[2],r=+o[3];break;case"#":var s=4==e.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;o=e.match(s),t=parseInt(o[1],16),n=parseInt(o[2],16),r=parseInt(o[3],16);break;default:throw new Error("Unsupported color format")}switch(a){case"HTML":c=t===n&&n===r&&-1===r?"transparent":"rgba("+parseInt(t)+","+parseInt(n)+","+parseInt(r)+","+i+")";break;case"RGB":c=["RGB",t/255,n/255,r/255];break;case"#":c+=t<16?"#0"+t.toString(16):"#"+t.toString(16),c+=n<16?"0"+n.toString(16):n.toString(16),c+=r<16?"0"+r.toString(16):r.toString(16);break;case"int":c=0,c|=(i*=255)<<24,c|=t<<16,c|=n<<8,c|=r,c>>>=0}return c}function Ht(){return(Ht=n((function(e,t,n){var r;return S(this,(function(o){switch(o.label){case 0:return t!==ue.Text?[3,2]:[4,e.getActiveObjectProperty(le.Text)];case 1:r=o.sent(),qt({fontName:(a=r).fontName||"Helvetica",fontSize:a.fontSize||18,rtl:a.rtl||!1,charSpace:a.charSpace||0,wordSpace:a.wordSpace||0,fontColor:a.fillColor||"#000000",horzScale:a.horzScale||100,isBold:a.isBold||!1,isItalic:a.isItalic||!1,isCross:a.isCross||!1,isUnderline:a.isUnderline||!1,scriptType:a.scriptType||ve.None,alignment:a.alignment||de.Left,isAdding:Ut(),lineSpace:0},n),o.label=2;case 2:return[2]}var a}))}))).apply(this,arguments)}function Kt(){return(Kt=n((function(e,t,n,r){var o,a,i;return S(this,(function(c){switch(c.label){case 0:switch(a={},e&&(a=e.json,o=a.type),o){case le.Text:return[3,1];case le.Image:return[3,2];case le.Path:return[3,3];case le.Shading:return[3,4];case le.Mixed:return[3,5]}return[3,6];case 1:return $t(a,n,r),[3,8];case 2:return Jt(a,n,r),[3,8];case 3:return Wt(a,n,r),[3,8];case 4:return Gt(a,n,r),[3,8];case 5:return Yt(a,n,r),[3,8];case 6:return[4,t.getEditingObject()];case 7:return(i=c.sent())&&i.type===ue.Text?i&&i.type===ue.Text?[2]:[3,8]:(Zt(n),[2]);case 8:return[2]}}))}))).apply(this,arguments)}function $t(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=b(function(e){var t,n,r=Dt[e.baseFontName];return r?(t=r.bold===e.fontName||r.bolditalic===e.fontName,n=r.italic===e.fontName||r.bolditalic===e.fontName):(t=e.fontIsBold,n=e.fontIsItalic),[e.baseFontName,t,n]}(e),3),o=r[0],a=r[1],i=r[2],c={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:tn(e)},effectClearClipping:{enable:nn(e)},fontFamily:{enable:!0,value:o},fontSize:{enable:!0,value:Math.round(100*e.fontSize)/100},fontBold:{enable:!0,value:a},fontItalic:{enable:!0,value:i},fontColor:{enable:!0,value:zt(e.fillColor,"#")},fontUnderline:{enable:!1},fontStrikethrough:{enable:!1},fontSuperSubScript:{enable:!1},fontCharacterSpacing:{enable:!1},fontWritingDirection:{enable:!1},paragraphBullets:{enable:!1},paragraphNumbering:{enable:!1},paragraphAlign:{enable:!1},paragraphIncrease:{enable:!1},paragraphDecrease:{enable:!1},paragraphLineSpacing:{enable:!1},paragraphSpacing:{enable:!1},paragraphCharacterScale:{enable:!0,value:e.horizontalScale},paragraphWordSpacing:{enable:e.isWordSpaceValid,value:e.wordSpace},splitMergeText:{enable:e.canMergeText},splitRemoveKerning:{enable:e.canRemoveTextKerning},splitText:{enable:e.canSplitText,value:e.text},splitToShape:{enable:e.canText2Path},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity},arrangeRotateMoreOptions:{enable:!0,value:e.rotateOption},arrangeRotateMoreOptionsInput:{enable:!0,value:e.rotateOption}};n||en(t,c,e.type)}function Wt(e,t){var n,r,o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=ye,c=se.LineCap,s=Pe,l=se.LineJoin;switch(e.lineCap){case i.Butt:n=c.Butt;break;case i.Round:n=c.Round;break;case i.ProjectingSquareCap:n=c.ProjectingSquareCap}switch(e.lineJoin){case s.Miter:r=l.Miter;break;case s.Round:r=l.Round;break;case s.Bevel:r=l.Bevel}Nt(e.lineStyle,[])?o=1:Nt(e.lineStyle,[2,2])?o=2:Nt(e.lineStyle,[3,3])?o=3:Nt(e.lineStyle,[4,4])?o=4:Nt(e.lineStyle,[4,3,2,3])?o=5:Nt(e.lineStyle,[4,3,16,3])?o=6:Nt(e.lineStyle,[8,4,4,4])&&(o=7);var u={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:tn(e)},effectClearClipping:{enable:nn(e)},shapeStyleLineColor:{enable:!0,value:e.strokeColorSpace?zt(e.strokeColor,"#"):"#fff"},shapeStyleFillColor:{enable:!0,value:zt(e.fillColor,"#")},shapeStyleMiterLimit:{enable:!0,value:e.miterLimit},shapeStyleLineJoin:{enable:!0,value:r},shapeStyleLineCap:{enable:!0,value:n},shapeStyleDashType:{enable:!0,value:o},shapeStyleOpacity:{enable:!0,value:e.opacity},shapeStyleLineWidth:{enable:!0,value:e.lineWidth},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity},arrangeRotateMoreOptions:{enable:!0,value:e.rotateOption},arrangeRotateMoreOptionsInput:{enable:!0,value:e.rotateOption}};a||en(t,u,e.type)}function Gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n.push({color:e[r].fromColor,offset:e[r].from}),r===t-1&&n.push({color:e[r].toColor,offset:e[r].to});return n}(e.gradientArray),o={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:tn(e)},effectClearClipping:{enable:nn(e)},shadingStyleGradientStops:{enable:!0,value:r},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity},arrangeRotateMoreOptions:{enable:!0,value:e.rotateOption},arrangeRotateMoreOptionsInput:{enable:!0,value:e.rotateOption}};n||en(t,o,e.type)}function Yt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:tn(e)},effectClearClipping:{enable:nn(e)},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity}};n||en(t,r,le.Image)}function Jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:tn(e)},effectClearClipping:{enable:nn(e)},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity},arrangeRotateMoreOptions:{enable:!0,value:e.rotateOption},arrangeRotateMoreOptionsInput:{enable:!0,value:e.rotateOption}};n||en(t,r,e.type)}function qt(e,t){var n;switch(e.scriptType){case ve.None:n="";break;case ve.Sub:n="font-subscript";break;case ve.Super:n="font-superscript"}var r={fontFamily:{enable:!0,value:Ee[e.fontName]||e.fontName},fontSize:{enable:!0,value:e.fontSize},fontColor:{enable:!0,value:zt(e.fontColor,"#")},fontBold:{enable:!0,value:e.isBold},fontItalic:{enable:!0,value:e.isItalic},fontStrikethrough:{enable:!0,value:e.isCross},fontUnderline:{enable:!0,value:e.isUnderline},fontSuperSubScript:{enable:!0,value:n},fontCharacterSpacing:{enable:!0,value:e.charSpace},fontWritingDirection:{enable:e.isAdding,value:e.isAdding?e.rtl?"rtl":"ltr":""},paragraphWordSpacing:{enable:!0,value:e.wordSpace},paragraphCharacterScale:{enable:!0,value:e.horzScale},paragraphAlign:{enable:!0,value:["left","center","right","justify"][e.alignment]},paragraphBullets:{enable:!1},paragraphNumbering:{enable:!1},paragraphIncrease:{enable:!1},paragraphDecrease:{enable:!1},paragraphLineSpacing:{enable:!0,value:e.lineSpace},paragraphSpacing:{enable:!1},splitMergeText:{enable:!1},splitRemoveKerning:{enable:!1},splitText:{enable:!1},splitToShape:{enable:!1},effectClippingType1:{enable:!1},effectClippingType2:{enable:!1},effectClippingType3:{enable:!1},effectClippingType4:{enable:!1},effectClippingType5:{enable:!1},effectClippingType6:{enable:!1},effectEditClipping:{enable:!1},effectClearClipping:{enable:!1},effectOpacity:{enable:!1},effectShear:{enable:!1},arrangePagecenterVertically:{enable:!1},arrangePagecenterHorizontally:{enable:!1},arrangePagecenterBoth:{enable:!1},arrangeAlignmentVertically:{enable:!1},arrangeAlignmentHorizontally:{enable:!1},arrangeAlignmentLeft:{enable:!1},arrangeAlignmentRight:{enable:!1},arrangeAlignmentTop:{enable:!1},arrangeAlignmentBottom:{enable:!1},arrangeDistributeVertically:{enable:!1},arrangeDistributeHorizontally:{enable:!1},arrangeRotateClockwise:{enable:!1},arrangeRotateCounterClockwise:{enable:!1},arrangeRotateMoreOptions:{enable:!1},arrangeFlipVertically:{enable:!1},arrangeFlipHorizontally:{enable:!1},arrangeZorderToBack:{enable:!1},arrangeZorderToFront:{enable:!1}};Me.isTouchDevice&&(r.showKeyboard=!0),en(t,r,le.Text)}function Xt(e,t){return Qt.apply(this,arguments)}function Qt(){return Qt=n((function(e,t){var n,r,o=arguments;return S(this,(function(a){return n=o.length>2&&void 0!==o[2]&&o[2],e&&((r=e.type)===le.Text?$t(e,t,n):r===le.Path?Wt(e,t,n):r===le.Shading?Gt(e,t,n):r===le.Mixed?Yt(e,t,n):r===le.Image&&Jt(e,t,n)),[2]}))})),Qt.apply(this,arguments)}function Zt(e){if(e){var t=e.getComponentByName("edit-properties");if(t){if(t.formatTab&&t.formatTab.$element){var n=t.formatTab.$element.find('[name="arrange-rotate-more-options-input"]');n&&n.val("")}t.disable()}}}function en(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e){var r=e.getComponentByName("sidebar-right");if(!r){var o=e.getComponentByName("edit-properties");if(!o)return;return o.enable(),void o.setHost(t,n)}r.show();var a=e.getComponentByName("sidebar-right-tabs");a.openTab("edit-properties-panel"),a.setActivetab("edit-properties-panel"),e.getComponentByName("edit-properties").setHost(t,n)}}function tn(e){return!(e.count>1)&&(e.type===le.Shading||e.clipPathCount>0)}function nn(e){return!(e.count>1)&&(e.type!==le.Shading&&e.clipPathCount>0)}function rn(e,t){return on.apply(this,arguments)}function on(){return(on=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setOpacity(t)];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function an(e,t){return cn.apply(this,arguments)}function cn(){return cn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.rotate(parseFloat(t))];case 1:return n.sent(),[2]}}))})),cn.apply(this,arguments)}function sn(e,t){return ln.apply(this,arguments)}function ln(){return(ln=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.flip(t)];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function un(e,t){return pn.apply(this,arguments)}function pn(){return(pn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.shear(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function dn(e,t){return gn.apply(this,arguments)}function gn(){return(gn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.align(t)];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function hn(e,t){return fn.apply(this,arguments)}function fn(){return(fn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.center(t)];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function vn(e,t){return mn.apply(this,arguments)}function mn(){return(mn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.distribute(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function bn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.changeRenderingOrder(t)];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function Pn(e){return Cn.apply(this,arguments)}function Cn(){return(Cn=n((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,e.clearClipPath()];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function xn(e){return Sn.apply(this,arguments)}function Sn(){return(Sn=n((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,e.editClipPath()];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function wn(e,t){return En.apply(this,arguments)}function En(){return(En=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.addClipPath(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function kn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setFontSize(parseInt(t))];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function In(e,t){return An.apply(this,arguments)}function An(){return(An=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setHorizontalScale(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function Tn(e,t){return Mn.apply(this,arguments)}function Mn(){return(Mn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setCharSpace(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function Fn(e,t){return On.apply(this,arguments)}function On(){return(On=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setWordSpace(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function Rn(e,t,n,r,o){return jn.apply(this,arguments)}function jn(){return(jn=n((function(e,t,n,r,o){return S(this,(function(a){return[2,e.setFont(t,n,r,o)]}))}))).apply(this,arguments)}function Dn(e){return Bn.apply(this,arguments)}function Bn(){return(Bn=n((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,e.removeTextKerning()];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function Un(e){return Nn.apply(this,arguments)}function Nn(){return(Nn=n((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,e.mergeText()];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function Ln(e,t){return Vn.apply(this,arguments)}function Vn(){return(Vn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return t=t.sort((function(e,t){return e-t})),[4,e.splitText(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function zn(e,t,n){return Hn.apply(this,arguments)}function Hn(){return(Hn=n((function(e,t,n){return S(this,(function(r){switch(r.label){case 0:return e.json.fillColorSpace=2,[4,e.setFillColor(Vt(t),n)];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function Kn(e,t){return $n.apply(this,arguments)}function $n(){return($n=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setLineWidth(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function Wn(e,t){return Gn.apply(this,arguments)}function Gn(){return(Gn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setMiterLimit(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function Yn(e,t){return Jn.apply(this,arguments)}function Jn(){return(Jn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setLineCap(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function qn(e,t){return Xn.apply(this,arguments)}function Xn(){return(Xn=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,e.setLineJoin(t)];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function Qn(e,t){return Zn.apply(this,arguments)}function Zn(){return(Zn=n((function(e,t){return S(this,(function(n){return[2,e.setLineStyle(t)]}))}))).apply(this,arguments)}function er(e,t){return tr.apply(this,arguments)}function tr(){return tr=n((function(e,t){var n,r=arguments;return S(this,(function(o){switch(o.label){case 0:return n=r.length>2&&void 0!==r[2]&&r[2],e.setColorSpace("fillColorSpace",2),[4,e.setFillColor(Vt(t),n)];case 1:return[2,o.sent()]}}))})),tr.apply(this,arguments)}function nr(e,t){return rr.apply(this,arguments)}function rr(){return rr=n((function(e,t){var n,r=arguments;return S(this,(function(o){return n=r.length>2&&void 0!==r[2]&&r[2],e.setColorSpace("strokeColorSpace",2),[2,e.setStrokeColor(Vt(t),n)]}))})),rr.apply(this,arguments)}function or(e,t){return ar.apply(this,arguments)}function ar(){return(ar=n((function(e,t){return S(this,(function(n){return[2,e.changeShadingColor(t)]}))}))).apply(this,arguments)}function ir(){return(ir=n((function(e){return S(this,(function(t){return[2,e.editReferenceLine()]}))}))).apply(this,arguments)}function cr(e,t){return sr.apply(this,arguments)}function sr(){return(sr=n((function(e,t){return S(this,(function(n){return[2,e.setGradientColorShowRect(t)]}))}))).apply(this,arguments)}function lr(e,t){return ur.apply(this,arguments)}function ur(){return(ur=n((function(e,t){return S(this,(function(n){return[2,e.setGradientCurrentInfo(t)]}))}))).apply(this,arguments)}function pr(e){return dr.apply(this,arguments)}function dr(){return(dr=n((function(e){var t;return S(this,(function(n){switch(n.label){case 0:return[4,e.getEditingObject()];case 1:return t=n.sent(),[2,e.createEditingObjectProxy(t)]}}))}))).apply(this,arguments)}function gr(){return(gr=n((function(e,t,n){return S(this,(function(r){switch(r.label){case 0:return[4,pr(e)];case 1:return[2,r.sent().OnFontNameChanged(t,n)]}}))}))).apply(this,arguments)}function hr(){return(hr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnFontSizeChanged(t)]}}))}))).apply(this,arguments)}function fr(){return(fr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnTextColorChanged(Vt(t))]}}))}))).apply(this,arguments)}function vr(){return(vr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnBoldChanged(t)]}}))}))).apply(this,arguments)}function mr(){return(mr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnItalicChanged(t)]}}))}))).apply(this,arguments)}function br(e,t){return yr.apply(this,arguments)}function yr(){return(yr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnAlignChanged(t)]}}))}))).apply(this,arguments)}function Pr(){return(Pr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnCharSpaceChanged(t)]}}))}))).apply(this,arguments)}function Cr(){return(Cr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnWordSpaceChanged(t)]}}))}))).apply(this,arguments)}function xr(){return(xr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnCharHorzScaleChanged(t)]}}))}))).apply(this,arguments)}function Sr(){return(Sr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnLineLeadingChanged(t)]}}))}))).apply(this,arguments)}function wr(){return(wr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnUnderlineChanged(t)]}}))}))).apply(this,arguments)}function Er(){return(Er=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnCrossChanged(t)]}}))}))).apply(this,arguments)}function kr(e,t){return _r.apply(this,arguments)}function _r(){return(_r=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnSuperScriptChanged(t)]}}))}))).apply(this,arguments)}function Ir(e,t){return Ar.apply(this,arguments)}function Ar(){return(Ar=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnSubScriptChanged(t)]}}))}))).apply(this,arguments)}function Tr(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,pr(e)];case 1:return[2,n.sent().OnWritingDirectionChanged(t)]}}))}))).apply(this,arguments)}function Fr(e,t,n,r,o){return Or.apply(this,arguments)}function Or(){return Or=n((function(e,t,n,r,o){var a,i,c,s,l,u,p,d,g=arguments;return S(this,(function(h){switch(h.label){case 0:switch(a=g.length>5&&void 0!==g[5]&&g[5],c={},e&&(c=e.json,i=c.type),s=o.getComponentByName("edit-properties"),l=s.formatTab,i){case le.Text:return[3,1];case le.Path:return[3,3];case le.Shading:return[3,5];case le.Image:return[3,7];case le.Mixed:return[3,9]}return[3,11];case 1:return[4,Rr(t,l,e,n,r)];case 2:return h.sent(),[3,15];case 3:return[4,Dr(t,l,e,n,r)];case 4:return h.sent(),[3,15];case 5:return[4,Ur(t,l,e,n,r)];case 6:return h.sent(),[3,15];case 7:return[4,Lr(t,l,e,n,r)];case 8:return h.sent(),[3,15];case 9:return[4,zr(t,l,e,n,r)];case 10:return h.sent(),[3,15];case 11:return[4,t.getEditingObject()];case 12:return(u=h.sent())?u.type!==ue.Text?[3,14]:[4,Kr(t,l,u,n,r)]:[2];case 13:h.sent(),h.label=14;case 14:return[3,15];case 15:return[4,t.getActiveObject()];case 16:return(p=h.sent())?(d=p.json,"arrange-rotate-more-options"===n&&(d.rotateOption=r),Xt(d,o,a),[2]):[2]}}))})),Or.apply(this,arguments)}function Rr(e,t,n,r,o){return jr.apply(this,arguments)}function jr(){return(jr=n((function(e,t,n,r,o){var a,i,c,s,l;return S(this,(function(u){switch(u.label){case 0:return[4,t];case 1:switch(a=u.sent()&&t.getStates(["fontFamily","fontBold","fontItalic"])||{},i=a.fontFamily,c=a.fontBold,s=a.fontItalic,r){case"font-family":return[3,2];case"font-bold":return[3,4];case"font-italic":return[3,6];case"font-size":return[3,8];case"font-color":return[3,10];case"font-character-spacing":return[3,12];case"paragraph-word-spacing":return[3,14];case"paragraph-character-scale":return[3,16];case"split-merge-text":return[3,18];case"split-remove-kerning":return[3,20];case"split-text":return[3,22];case"split-to-shape":return[3,24]}return[3,26];case 2:return c=void 0===c?n.json.fontIsBold:c,s=void 0===s?n.json.fontIsItalic:s,[4,Rn(n,o,c,s,0)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:case 19:case 21:case 23:case 25:return u.sent(),[3,26];case 4:return s=void 0===s?n.json.fontIsItalic:s,0==(l=i||n.json.baseFontName).length?[2]:[4,Rn(n,l,o,s,1)];case 6:return c=void 0===c?n.json.fontIsBold:c,0==(i||n.json.baseFontName).length?[2]:[4,Rn(n,i||n.json.baseFontName,c,o,2)];case 8:return[4,kn(n,parseInt(o))];case 10:return[4,zn(n,o,!0)];case 12:return[4,Tn(n,parseInt(o))];case 14:return[4,Fn(n,parseInt(o))];case 16:return[4,In(n,parseInt(o))];case 18:return[4,Qr(n,t)];case 20:return[4,Dn(n)];case 22:return[4,Ln(n,o)];case 24:return[4,e.text2Path()];case 26:return[4,Wr(e,n,r,o)];case 27:return u.sent(),[4,Yr(e,n,r,o)];case 28:return u.sent(),[2]}}))}))).apply(this,arguments)}function Dr(e,t,n,r,o){return Br.apply(this,arguments)}function Br(){return(Br=n((function(e,t,n,r,o){var a,i,c,s;return S(this,(function(e){switch(e.label){case 0:switch(a=se.LineCap,i=ye,c=se.LineJoin,s=Pe,r){case"shape-style-color":return[3,1];case"shape-style-line-color":return[3,6];case"shape-style-fill-color":return[3,8];case"shape-style-opacity":return[3,10];case"shape-style-line-width":return[3,12];case"shape-style-dash-type":return[3,14];case"shape-style-line-cap":return[3,16];case"shape-style-line-join":return[3,24];case"shape-style-miter-limit":return[3,32]}return[3,34];case 1:return"string"!=typeof o.borderColor?[3,3]:[4,nr(n,o.borderColor)];case 2:e.sent(),e.label=3;case 3:return"string"!=typeof o.backgroundColor?[3,5]:[4,er(n,o.backgroundColor)];case 4:e.sent(),e.label=5;case 5:return[3,34];case 6:return[4,nr(n,o)];case 7:return e.sent(),[3,34];case 8:return[4,er(n,o)];case 9:return e.sent(),[3,34];case 10:return[4,rn(n,parseFloat(o))];case 11:return e.sent(),[3,34];case 12:return[4,Kn(n,parseInt(o))];case 13:return e.sent(),[3,34];case 14:return[4,qr(n,o)];case 15:return e.sent(),[3,34];case 16:switch(o){case a.ProjectingSquareCap:return[3,17];case a.Round:return[3,19];case a.Butt:return[3,21]}return[3,23];case 17:return[4,Yn(n,i.ProjectingSquareCap)];case 18:return e.sent(),[3,23];case 19:return[4,Yn(n,i.Round)];case 20:return e.sent(),[3,23];case 21:return[4,Yn(n,i.Butt)];case 22:return e.sent(),[3,23];case 23:return[3,34];case 24:switch(o){case c.Miter:return[3,25];case c.Round:return[3,27];case c.Bevel:return[3,29]}return[3,31];case 25:return[4,qn(n,s.Miter)];case 26:return e.sent(),[3,31];case 27:return[4,qn(n,s.Round)];case 28:return e.sent(),[3,31];case 29:return[4,qn(n,s.Bevel)];case 30:return e.sent(),[3,31];case 31:return[3,34];case 32:return[4,Wn(n,parseInt(o))];case 33:return e.sent(),[3,34];case 34:return[4,Wr(n,n,r,o)];case 35:return e.sent(),[4,Yr(n,n,r,o)];case 36:return e.sent(),[2]}}))}))).apply(this,arguments)}function Ur(e,t,n,r,o){return Nr.apply(this,arguments)}function Nr(){return Nr=n((function(e,t,n,r,o){return S(this,(function(t){switch(t.label){case 0:switch(r){case"shading-style-gradient-stops":return[3,1];case"shading-style-color":return[3,5];case"shading-style-reference-line":return[3,9]}return[3,10];case 1:case 5:return[4,cr(n,{left:0,bottom:60,right:225,top:40})];case 2:case 6:return t.sent(),[4,lr(n,Lt(o))];case 3:case 7:return t.sent(),[4,or(n,!0)];case 4:case 8:return t.sent(),[3,10];case 9:return function(e){ir.apply(this,arguments)}(n),[3,10];case 10:return[4,Wr(e,n,r,o)];case 11:return t.sent(),[4,Yr(e,n,r,o)];case 12:return t.sent(),[2]}}))})),Nr.apply(this,arguments)}function Lr(e,t,n,r,o){return Vr.apply(this,arguments)}function Vr(){return(Vr=n((function(e,t,n,r,o){return S(this,(function(t){switch(t.label){case 0:return[4,Wr(e,n,r,o)];case 1:return t.sent(),[4,Yr(e,n,r,o)];case 2:return t.sent(),[2]}}))}))).apply(this,arguments)}function zr(e,t,n,r,o){return Hr.apply(this,arguments)}function Hr(){return(Hr=n((function(e,t,n,r,o){return S(this,(function(t){switch(t.label){case 0:return[4,Wr(e,n,r,o)];case 1:return t.sent(),[4,Yr(e,n,r,o)];case 2:return t.sent(),[2]}}))}))).apply(this,arguments)}function Kr(e,t,n,r,o){return $r.apply(this,arguments)}function $r(){return $r=n((function(e,t,n,r,o){var a;return S(this,(function(n){switch(n.label){case 0:return[4,t];case 1:switch(a=(n.sent()&&t.getStates(["fontBold"])||{}).fontBold,r){case"font-family":a=void 0===a?selection.json.fontIsBold:a,function(e,t,n){gr.apply(this,arguments)}(e,o,a);break;case"font-size":!function(e,t){hr.apply(this,arguments)}(e,parseInt(o));break;case"font-color":!function(e,t){fr.apply(this,arguments)}(e,o);break;case"font-bold":!function(e,t){vr.apply(this,arguments)}(e,o);break;case"font-italic":!function(e,t){mr.apply(this,arguments)}(e,o);break;case"font-underline":!function(e,t){wr.apply(this,arguments)}(e,o);break;case"font-strikethrough":!function(e,t){Er.apply(this,arguments)}(e,o);break;case"font-super-sub-script":o.indexOf("font-superscript")>=0?(Ir(e,!1),kr(e,!0)):o.indexOf("font-subscript")>=0?(kr(e,!1),Ir(e,!0)):(Ir(e,!1),kr(e,!1));break;case"font-character-spacing":!function(e,t){Pr.apply(this,arguments)}(e,o);break;case"font-writing-direction":o.indexOf("rtl")>=0?Tr(e,be.Right2Left):o.indexOf("ltr")>=0&&Tr(e,be.Left2Right);break;case"paragraph-align":switch(o){case"left":br(e,de.Left);break;case"right":br(e,de.Right);break;case"center":br(e,de.Center);break;case"justify":br(e,de.Justify)}break;case"paragraph-word-spacing":!function(e,t){Cr.apply(this,arguments)}(e,parseFloat(o));break;case"paragraph-character-scale":!function(e,t){xr.apply(this,arguments)}(e,parseFloat(o));break;case"paragraph-line-spacing":!function(e,t){Sr.apply(this,arguments)}(e,parseFloat(o))}return[2]}}))})),$r.apply(this,arguments)}function Wr(e,t,n,r){return Gr.apply(this,arguments)}function Gr(){return(Gr=n((function(e,t,n,r){return S(this,(function(e){switch(e.label){case 0:switch(n){case"effect-clipping-type1":return[3,1];case"effect-clipping-type2":return[3,3];case"effect-clipping-type3":return[3,5];case"effect-clipping-type4":return[3,7];case"effect-clipping-type5":return[3,9];case"effect-clipping-type6":return[3,11];case"effect-edit-clipping":return[3,13];case"effect-clear-clipping":return[3,15];case"effect-opacity":return[3,17];case"effect-shear":return[3,19]}return[3,21];case 1:return[4,wn(t,fe.RoundRect)];case 2:case 4:case 6:case 8:case 10:case 12:case 14:case 16:case 18:case 20:return e.sent(),[3,21];case 3:return[4,wn(t,fe.Ellipse)];case 5:return[4,wn(t,fe.Rectangle)];case 7:return[4,wn(t,fe.Polygon)];case 9:return[4,wn(t,fe.Curve)];case 11:return[4,wn(t,fe.Freedom)];case 13:return[4,xn(t)];case 15:return[4,Pn(t)];case 17:return[4,rn(t,parseFloat(r))];case 19:return[4,un(t,parseInt(r))];case 21:return[2]}}))}))).apply(this,arguments)}function Yr(e,t,n,r){return Jr.apply(this,arguments)}function Jr(){return(Jr=n((function(e,t,n,r){return S(this,(function(e){switch(e.label){case 0:switch(n){case"arrange-rotate-clockwise":return[3,1];case"arrange-rotate-counter-clockwise":return[3,2];case"arrange-flip-vertically":return[3,3];case"arrange-flip-horizontally":return[3,4];case"arrange-rotate-more-options":return[3,5];case"arrange-zorder-to-back":return[3,6];case"arrange-zorder-to-front":return[3,8];case"arrange-pagecenter-vertically":return[3,10];case"arrange-pagecenter-horizontally":return[3,11];case"arrange-pagecenter-both":return[3,12];case"arrange-alignment-vertically":return[3,13];case"arrange-alignment-horizontally":return[3,14];case"arrange-alignment-left":return[3,15];case"arrange-alignment-right":return[3,16];case"arrange-alignment-top":return[3,17];case"arrange-alignment-bottom":return[3,18];case"arrange-distribute-vertically":return[3,19];case"arrange-distribute-horizontally":return[3,20]}return[3,21];case 1:return an(t,-Math.PI/2),[3,21];case 2:return an(t,Math.PI/2),[3,21];case 3:return sn(t,!0),[3,21];case 4:return sn(t,!1),[3,21];case 5:return an(t,-parseFloat(r)/180*Math.PI),[3,21];case 6:return[4,bn(t,he.Back)];case 7:case 9:return e.sent(),[3,21];case 8:return[4,bn(t,he.Front)];case 10:return hn(t,ge.Vertical),[3,21];case 11:return hn(t,ge.Horizontal),[3,21];case 12:return hn(t,ge.Both),[3,21];case 13:return dn(t,pe.Vertical),[3,21];case 14:return dn(t,pe.Horizontal),[3,21];case 15:return dn(t,pe.Left),[3,21];case 16:return dn(t,pe.Right),[3,21];case 17:return dn(t,pe.Top),[3,21];case 18:return dn(t,pe.Bottom),[3,21];case 19:return vn(t,!0),[3,21];case 20:return vn(t,!1),[3,21];case 21:return[2]}}))}))).apply(this,arguments)}function qr(e,t){return Xr.apply(this,arguments)}function Xr(){return(Xr=n((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,Qn(e,{1:[],2:[2,2],3:[3,3],4:[4,4],5:[4,3,2,3],6:[4,3,16,3],7:[8,4,4,4]}[t])];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function Qr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=n((function(e,t){var n;return S(this,(function(r){switch(r.label){case 0:return[4,Un(e)];case 1:return r.sent()||(n=t.pdfUI).alert(n.i18n.t("page-editor:alert.mertTextFaided")),[2]}}))}))).apply(this,arguments)}var eo="unique_"+Date.now().toString(36),to=0;var no,ro=(no="contextmenu",function(e){return"fv--plugin-".concat(no,"-").concat(e)});function oo(e){var t=e.text,n=e.isEnabled,r=e.submenu,o="";!1===n&&(o=' disabled="true"');var a="";a+="\n      <dropdown".concat(o," separate='false' align='out-right' valign='top' text='").concat(t,"'>");var i=!0,c=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var p=l.value;p.submenu?a+=oo(p):a+=ao(p)}}catch(e){c=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw s}}return a+="\n      </dropdown>"}function ao(e){var t,n=e.type,r=e.text,o=e.isEnabled,a=e.onClickId;if(n&&"default"!==n){if("separator"!==n)return"";t="contextmenu-separator"}else t="contextmenu-item";var i="";!1===o&&(i=' disabled="true"');var c="";return void 0!==a&&(c=" @on.click=\"ctrl.itemClick('".concat(a,"')\"")),"\n      <".concat(t).concat(i).concat(c," class='fv__plugin-contextmenu-item'>").concat(r||"","</").concat(t,">")}function io(e,t){var n,r=ro([n||"",eo,to++].join("_")),o=function(e,t){var n="";n+="<contextmenu name='".concat(t||"","' @controller.alias='ctrl' @on.hide='ctrl.onClose'>");var r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=i.value;s.submenu?n+=oo(s):n+=ao(s)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n+"\n    </contextmenu>"}(t,r);return e.rootComponent.append(o,[{target:r,config:{callback:function(t){g(o,t);var n=x(o);function o(){return i(this,o),n.apply(this,arguments)}return s(o,[{key:"itemClick",value:function(t){switch(t){case"PopupMenuItem_e_PopupMenuItemProperties":e.openDialog("pageEditorProps");break;case"PopupMenuItem_e_PopupMenuItemShear":case"PopupMenuItem_e_PopupMenuItemRotateMoreOptions":break;default:e.pdfViewer.currentPDFDoc.pageEditor.triggerPopMenuAction(t)}}},{key:"onClose",value:function(){!function(e,t){var n=e.getComponentByName(t);n.hide()}(e.rootComponent,r)}}]),o}(w.Controller)}}]),r}var co=["PopupMenuItem_e_PopupMenuItemShear","PopupMenuItem_e_PopupMenuItemRotateMoreOptions"];function so(e,t,n){return lo.apply(this,arguments)}function lo(){return(lo=n((function(e,t,n){var r,o,a,i,c,s,l,u;return S(this,(function(p){switch(p.label){case 0:r=[],o=!0,a=!1,i=void 0,p.label=1;case 1:p.trys.push([1,6,7,8]),c=e[Symbol.iterator](),p.label=2;case 2:return(o=(s=c.next()).done)?[3,5]:[4,uo(s.value,t,n)];case 3:(l=p.sent())&&r.push(l),p.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return u=p.sent(),a=!0,i=u,[3,8];case 7:try{o||null==c.return||c.return()}finally{if(a)throw i}return[7];case 8:return[2,r=function(e){for(var t=[],n=0,r=e.length-1,o=0;o<e.length;o++){if("separator"!==e[o].type)break;n++}for(var a=e.length-1;a>=0;a--){if("separator"!==e[a].type)break;r--}if(r<n)return[];for(var i=!1,c=n;c<=r;c++){var s=e[c];if("separator"===s.type){if(i)continue;i=!0}else i=!1;t.push(s)}return t}(r)]}}))}))).apply(this,arguments)}function uo(e,t,n){return po.apply(this,arguments)}function po(){return(po=n((function(e,t,n){var r,o,a,i,c,s,l,u;return S(this,(function(p){switch(p.label){case 0:return(r=t.activeObject)?co.indexOf(e.name)>=0?[2]:(d=e.name,"separator"===(o="-"===d?"separator":"default")?[2,{type:o}]:(a=Ce[e.name],i=a?"page-editor:popMenu."+a:"","EditObject"!==a||r.type!==ue.Image?[3,1]:(c=!1,[3,3]))):[2];case 1:return[4,go(e,t,n)];case 2:c=p.sent(),p.label=3;case 3:return s=e.name,e.subItems?[4,so(e.subItems,t,n)]:[3,5];case 4:l=p.sent(),p.label=5;case 5:return u={text:i,isEnabled:c,onClickId:s},l&&(u.submenu=l),[2,u]}var d}))}))).apply(this,arguments)}function go(e,t,n){return ho.apply(this,arguments)}function ho(){return ho=n((function(e,t,r){var o,a;function i(e){return c.apply(this,arguments)}function c(){return(c=n((function(e){var n,o,a,i,c,s;return S(this,(function(l){switch(l.label){case 0:n=!0,o=!1,a=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=e[Symbol.iterator](),l.label=2;case 2:return(n=(c=i.next()).done)?[3,5]:[4,go(c.value,t,r)];case 3:if(l.sent())return[2,!0];l.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return s=l.sent(),o=!0,a=s,[3,8];case 7:try{n||null==i.return||i.return()}finally{if(o)throw a}return[7];case 8:return[2,!1]}}))}))).apply(this,arguments)}return S(this,(function(n){switch(n.label){case 0:return o=t.activeObject,a=t.editingObject,0!==Object.keys(o).length||0!==Object.keys(a).length?[3,4]:"PopupMenuItem_e_PopupMenuItemPaste"!==e.name?[3,2]:[4,r.currentPDFDoc.pageEditor.canPaste()];case 1:return[2,n.sent()];case 2:return[2,!1];case 3:return[3,8];case 4:return e.enable||void 0===e.enable?e.subItems?[4,i(e.subItems)]:[3,6]:[2,!1];case 5:return[2,n.sent()];case 6:if(e.enable||void 0===e.enable)return[2,!0];n.label=7;case 7:return[2,!1];case 8:return[2]}}))})),ho.apply(this,arguments)}function fo(e){Bt.addingText=e}var vo,mo=o(8446),bo=o.n(mo),yo=w.vendors.jQuery,Po=w.PDFViewCtrl,Co=Po.shared,xo=Co.debounce,So=Co.ThrottleAsyncTaskExecutor,wo=w.vendors.Hammer,Eo=w.UIEvents,ko=Promise.resolve(),_o=w.PDFViewCtrl,Io=_o.commons.copyText,Ao=_o.DeviceInfo,To=Ao.isTouchDevice,Mo=Ao.isDesktop,Fo=Ao.isMobile,Oo=Ao.isTablet,Ro=_o.shared.createDeferred,jo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"OnKeyDown";return ko=ko.then((function(n){return St.trigger(t,[e.keyCode,H(e)])}))},Do=!0,Bo=0,Uo=navigator.userAgent.toLowerCase(),No=/opera|opr/.test(Uo),Lo=/msie/.test(Uo),Vo=(/trident/.test(Uo)||Lo)&&!No&&"msSaveBlob"in navigator,zo=function(e){g(r,e);var t=x(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).destroyHooks=[],n.hasSelection=!1,n.canScroll=!0,n.component=e.viewerUI.rootComponent.getComponentByName("fv--plugin-PageEditor-add-text"),n.disableToggleCaret=!1,window&&(window.PageEditorTrigger=St),n}return s(r,[{key:"goToPage",value:function(e,t,n){if(this.docRender){var r=this.docRender.getPDFPageRender(e);if(r){var o=b(r.getPDFPointFromClientPoint(t,n,!0),2),a=o[0],i=o[1],c=this.docRender.pdfViewer,s=this.uiContainerRect.height||0;c.goToPage(e,i-s/4,a,!1)}}}},{key:"hitTest",value:function(e,t,n){if(!this.docRender)return!1;var r=this.docRender.getPDFPageRender(e);if(!r)return!1;var o=b(r.getPDFPointFromClientPoint(t,n,!1),2),a=o[0],i=o[1];if(!this.selectionText)return!1;var c=this.selectionText,s=c.x,l=c.y,u=c.width,p=c.height;return a>=s&&a<=s+u&&i>=l&&i<=l+p}},{key:"docHandler",value:function(e){var t=this,r=this;this.documentMouseupFinalUpdateCount=0;var o=this.pdfViewer;this.docRender=e;var a=this.doc=e.doc;vo=this;var i=o.viewerUI.loading(),c=this.startPromise=a.startPageEdit(Et(),_t(),At(),Mt()).then((function(e){o.getEventEmitter().emit("pageeditor-started"),i()}));St.setDocRender(this.docRender),this.keyMgr=new V({skipKey:function(e){var t=document.activeElement!==N.getElement()[0];return t?!$[e]&&void 0:t},keydown:function(e){if(t.pdfViewer.isShortcutKeyEnabled()){var n=t.handleSystemCommand(e);if([37,38,39,40].indexOf(e.keyCode)>=0&&t.hasSelection&&(e.preventDefault(),e.stopPropagation()),8==e.keyCode&&St.trigger("OnChar",[String.fromCharCode(e.keyCode)]),n)return!1;jo(e).then((function(n){return t.actionFinalUpdate(e)}))}},keyup:function(e){if(t.pdfViewer.isShortcutKeyEnabled()){13==e.keyCode?St.trigger("OnChar",[String.fromCharCode(e.keyCode)]).then((function(n){return t.actionFinalUpdate(e)})):jo(e,"OnKeyUp").then((function(n){return t.actionFinalUpdate(e)}));var n=document.activeElement===N.getElement()[0];!0!==t.doc.docModified&&n&&t.doc.setDocModified()}}}),yo(document).on("focusin",this.focusin=function(e){Fe(e,N,Bo,(function(){return t.keyMgr.start()}),(function(){return t.keyMgr.stop()}),(function(){return St.trigger("RestartEdit")}))}),yo(document).on("mouseup",this.cancelDown=function(e){if(!(e.target.classList&&e.target.classList.contains("fv__pdf-doc-handler-container")||yo(e.target).hasClass("icon-btn")||yo(e.target).parents(".icon-btn").length||yo(e.target).parents('[name="fv--plugin-PageEditor-add-shape"]').length||2===e.button||t.documentMouseupFinalUpdateCount>0||yo(e.target).parents(".fv__ui-contextmenu-item").length||yo(e.target).parents(".fv__ui-layer"))){var n=K(e,"Up");return setTimeout((function(){t.docRender&&St.trigger(n,St.getArgs(0,e,0,H(e))).then((function(e){return t.actionFinalUpdate()}))}),200)}}),window.addEventListener("wheel",this.cancelWheel=function(e){t.canScroll||e.preventDefault()},{passive:!1}),this.setEditorNotifier();var s=function(){r.uiContainerRect=e.pdfViewer.$ui[0].parentElement.getBoundingClientRect(),c.then((function(){return ht(o,0,0)}))};this.destroyHooks.push(o.addEventListener("before-zoom-to",(function(){var e=o.getPDFDocRender();if(e){var n=e.$ui.find(".pe_handler_container");["top","left","width","height","right","bottom"].forEach((function(e){n[0].style[e]=null,t.$handler&&(t.$handler[0].style[e]=null)}))}}))),["fitWidthResizeViewport","zoomToSuccess","afterDocumentRotation","pageRotationChanged","pagesRotated","importPages","pageAdded","pageMoved","pagesMoved"].map((function(e){return Po.Events[e]})).forEach((function(e){t.destroyHooks.push(o.addEventListener(e,s))}));var l=function(){var e=["","Text","Path","Image","Shading","XObject","Size"].map((function(e){return o.i18n.t("page-editor:"+e)}));return St.trigger("ChangeLanguage",[e])};this.destroyHooks.push(o.addEventListener("change-language-success",l)),c.then((function(){return l()})).then((function(){s(!1)})),this.destroyHooks.push(o.addEventListener("PageEditor_onStartClick",(function(){t.disableRightPanel=!0})),o.addEventListener("PageEditor_onEndClick",(function(){t.disableRightPanel=!1})),o.addEventListener("editPropertiesAction",(function(e){To&&!Mo?"font-family"!==e.name&&"paragraph-numbering"!==e.name&&"paragraph-align"!==e.name&&"paragraph-increase"!==e.name&&"paragraph-decrease"!==e.name||(t.disableToggleCaret=!0):Bo+0&&("font-family"===e.name||"font-size"===e.name)&&N.getElement().focus();var n=o.getCurrentPDFDoc();if(n&&"page-editor"===o.getStateHandlerManager().currentStateHandler.getStateName()){var r=n.getPageEditor();r.getActiveObject().then((function(t){Fr(t,r,e.name,e.value,o.viewerUI.rootComponent)}))}})),o.addEventListener("PE-mouseMoveEnd",(function(){var e=t.doc;e&&e.getPageEditor().getActiveObject().then((function(e){if(e){var t=e.json;t.type===le.Text&&$t(t,o.viewerUI.rootComponent)}}))})),o.addEventListener("pageeditor-notify",(function(e,n){var r=t.doc;if(r){var a,i,c,s=r.getPageEditor();switch(e){case"enterEdit":n===ue.Text&&(N.getElement().focus(),Me.isIOS&&t.tempInput&&t.tempInput.remove()),function(e,t,n){Ht.apply(this,arguments)}(s,n,o.viewerUI.rootComponent);break;case"exitEdit":fo(!1),Zt(o.viewerUI.rootComponent);break;case"selectionChange":s.getActiveObject().then((function(e){bo()((t.currActiveObject||{}).json,(e||{}).json)||(!function(e,t,n,r){Kt.apply(this,arguments)}(e,s,o.viewerUI.rootComponent,t.disableRightPanel),t.pdfViewer.eventEmitter.emit(Eo.objectSelectionChanged,e?e.json:void 0)),t.currActiveObject=e}));break;case"showPopupMenu":s.getActiveObject().then((function(e){var t=Promise.resolve(!0);e||(t=s.getEditingObject().then((function(e){return!!e}))),t.then((function(e){e&&so(n.menu,n,o).then((function(e){var t=io(o.viewerUI,e),r=n.position,a=r.x,i=r.y;!function(e,t,n,r){var o=document.querySelector(".fv__ui-pdfviewer").getBoundingClientRect(),a=o.x,i=o.y;e.getComponentByName(t).showAt(n+a,r+i)}(o.viewerUI.rootComponent,t,a,i)}))}))}));break;case"caretChange":Fo&&Oo||N.getElement().focus(),xo(50,qt((i=(a=n).charProp,c=a.wordProp,{fontName:a.fontName||"Helvetica",fontSize:c.fontSize||18,rtl:i.rtl||!1,charSpace:c.charSpace||0,wordSpace:c.wordSpace||0,fontColor:c.wordColor||"#000000",horzScale:c.horzScale||100,isBold:c.isBold||!1,isItalic:c.isItalic||!1,isCross:c.isCross||!1,isUnderline:c.isUnderline||!1,scriptType:c.scriptType,alignment:i.alignment||de.Left,isAdding:Ut(),lineSpace:i.lineLeading}),o.viewerUI.rootComponent))}}})),o.addEventListener(Eo.switchStateHandler,(function(){t.selectionText=null})),To&&!Mo?o.addEventListener("refocusInput",(function(){t.disableToggleCaret=!1,N.refocusInput()})):function(){});var u=this.$handler=e.$container.siblings(".fv__pdf-doc-handler-container");u.css("z-index",82);var p=u.get(0);Me.isIOS&&this.destroyHooks.push((function(){t.tempInput&&t.tempInput.parentElement&&t.tempInput.remove()}),(0,Me.onTap)({target:p,onDoubleTap:function(e){t.triggerDoubleClick(e);var n=St.getPageIndex(e);-1!==n&&t.selectionText&&t.hitTest(n,Ue(e.srcEvent),Ne(e.srcEvent))&&(t.tempInput=document.createElement("div"),t.tempInput.contentEditable=!0,t.tempInput.style="pointer-events: none;position:absolute;left:0;top:0;right:0;bottom:0;opacity: 0.001;",p.appendChild(t.tempInput),t.tempInput.focus({preventScroll:!0}))},onSingleTap:function(e){t.triggerClick(e,1).then((function(n){var r=St.getPageIndex(e);-1!==r&&t.doc.getPageEditor().getActiveObject().then((function(n){if(n){t.goToPage(r,Ue(e.srcEvent),Ne(e.srcEvent));var o=n.json;o.type===le.Text?t.selectionText={x:o.xPosition,y:o.yPosition,width:o.width,height:o.height}:t.selectionText=null}}))}))}}));var d,g,h,f=this.hammer=new wo.Manager(p,{recognizers:[[wo.Pan,{direction:wo.DIRECTION_ALL}]],time:150}),v=yo('<div class="pe_handler_container"></div>'),m=yo('<canvas class="pe_handler"></canvas>');v.append(m),u.before(v),u.on("mouseleave",this.mouseleave=function(e){jt.toggle(!1)}).on("mousemove",this.hover=(d=n((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return St.cacheMouseCoord(e),[4,C()];case 1:return t=r.sent(),!Do||-1!==t&&b||-1!==(n=St.getPageIndex(e))&&St.trigger("OnHitObjectTest",St.getArgs(n,e,0,-1),0),[2]}}))})),function(e){return d.apply(this,arguments)})).on("mousedown",this.RButtionDown=function(e){if(2==e.button){var n=St.getPageIndex(e);-1!==n&&St.trigger("OnRButtonDown",St.getArgs(n,e,0,H(e)))}else 0===e.button&&t.hasSelection&&(t.canScroll=!1)}).on("mouseup",this.RButtionUp=function(e){if(2==e.button){var n=St.getPageIndex(e);-1!==n&&St.trigger("OnRButtonUp",St.getArgs(n,e,0,H(e)))}else 0===e.button&&(t.canScroll=!0)}).on("mousein",(function(e){t.hasSelection&&(t.canScroll=!1)})).on("mouseout",(function(e){t.canScroll=!0})).on("contextmenu",(function(e){return!1})),this.destroyHooks.push((function(){t.startPromise=null,u.css("z-index",0),yo(document).off("mouseup",t.cancelDown),u.off("mouseleave",t.mouseleave),u.off("mousemove",t.hover),u.off("mousedown",t.RButtionDown),u.off("mouseup",t.RButtionUp),window.removeEventListener("wheel",t.cancelWheel)})),f.add(new wo.Tap({event:"doubletap",taps:2})),f.add(new wo.Tap({event:"singletap"})),f.add(new wo.Press);var b=!1;try{var y=this;f.get("doubletap").recognizeWith("singletap"),f.get("singletap").requireFailure("doubletap"),f.on("hammer.input",(function(e){if("mouse"==e.pointerType){var t=St.getPageIndex(e);if(-1!==t)return"pointerdown"==e.srcEvent.type?(Do=!1,h=Ro(),void(g=setTimeout((function(){e=e.srcEvent;var n=K(e);St.trigger(n,St.getArgs(t,e,0,H(e))).then((function(e){return h&&h.resolve(e)}))}),520))):void("pointerup"==e.srcEvent.type&&(Do=!0,h&&h.promise.then((function(n){e=e.srcEvent;var r=K(e,"Up");St.trigger(r,St.getArgs(t,e,0,H(e)))}))))}})),this.triggerClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y.documentMouseupFinalUpdateCount=0,clearTimeout(g),y.component&&y.component.deactive();var n=St.getPageIndex(e);if(-1!==n){h=null,e=e.srcEvent;var r=Promise.resolve();return t&&(r=St.trigger("OnHitObjectTest",St.getArgs(n,e,0,-1),0)),(r=r.then((function(t){return St.trigger(K(e),St.getArgs(n,e,0,H(e)))}))).then((function(t){return St.trigger(K(e,"Up"),St.getArgs(n,e,0,H(e)),2)}))}},this.triggerDoubleClick=function(e){t.documentMouseupFinalUpdateCount=0,clearTimeout(g),h=null,t.triggerClick(e).then((function(){setTimeout((function(){var n=St.getPageIndex(e.srcEvent);-1!==n&&St.trigger("OnLButtonDoubleClick",St.getArgs(n,e.srcEvent,0,0)).then((function(r){"mouse"!=e.pointerType&&t.goToPage(n,Ue(e.srcEvent),Ne(e.srcEvent)),t.actionFinalUpdate()}))}),100)}))},f.on("singletap",(function(e){"mouse"==e.pointerType||Me.isIOS||t.triggerClick(e,1).then((function(n){var r=St.getPageIndex(e);-1!==r&&t.doc.getPageEditor().getActiveObject().then((function(n){n&&t.goToPage(r,Ue(e.srcEvent),Ne(e.srcEvent))}))}))})),f.on("panstart",function(){var e=n((function(e){var t;return S(this,(function(n){switch(n.label){case 0:return b=!0,clearTimeout(g),h=null,-1!==(t=St.getPageIndex(e.srcEvent))?[3,2]:[4,C()];case 1:t=n.sent(),n.label=2;case 2:return-1===t||("mouse"!==e.pointerType&&St.trigger("OnHitObjectTest",St.getArgs(t,e.srcEvent,0,-1),0),St.trigger("OnLButtonDown",St.getArgs(t,{clientX:e.srcEvent.clientX-e.deltaX,clientY:e.srcEvent.clientY-e.deltaY},0,H(e)))),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),f.on("panmove",function(){var e=n((function(e){var t;return S(this,(function(n){switch(n.label){case 0:return e=e.srcEvent,-1!==(t=St.getPageIndex(e))?[3,2]:[4,C()];case 1:t=n.sent(),n.label=2;case 2:return-1!==t&&St.trigger("OnMouseMove",St.getArgs(t,e,0,H(e)),1),[2]}}))}));return function(t){return e.apply(this,arguments)}}());var P=this;f.on("panend",function(){var e=n((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return e=e.srcEvent,t=K(e,"Up"),-1!==(n=St.getPageIndex(e))?[3,2]:[4,C()];case 1:n=r.sent(),r.label=2;case 2:return-1!==n&&St.trigger(t,St.getArgs(n,e,0,H(e)),2).then((function(t){return P.actionFinalUpdate(e)})).finally((function(e){b=!1})),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),f.on("doubletap",(function(e){Me.isIOS||t.triggerDoubleClick(e)})),f.on("press",(function(e){if("mouse"!=e.pointerType){var t=St.getPageIndex(e.srcEvent);-1!==t&&(clearTimeout(g),St.trigger("OnRButtonUp",St.getArgs(t,e.srcEvent,0,H(e.srcEvent))))}}))}catch(e){console.error(e)}var C=function(){var e=n((function(){var e;return S(this,(function(t){switch(t.label){case 0:return a?[4,a.getPageEditor().getActiveObject()]:[2,-1];case 1:return[2,(e=t.sent())?e.json.pageIndex:-1]}}))}));return function(){return e.apply(this,arguments)}}()}},{key:"actionFinalUpdate",value:function(e){return this.pdfViewer.eventEmitter.emit("PE-mouseMoveEnd"),Promise.resolve()}},{key:"setEditorNotifier",value:function(){var e,t,r=this,o=this,a=(t=n((function(e,t){var n,r,a,i;return S(this,(function(c){switch(c.label){case 0:return o.pdfViewer.getEventEmitter().emit("pageeditor-notify",e,t),[4,o.pdfViewer.getCurrentPDFDoc().getPageEditor().getActiveObject()];case 1:return(n=c.sent())?(r=n.json,(a=o.pdfViewer.viewerUI.rootComponent).getComponentByName("sidebar-right")&&(i=a.getComponentByName("edit-properties"),Xt(r,i)),[2]):[2]}}))})),function(e,n){return t.apply(this,arguments)}),i={caretChange:function(e){a("caretChange",e)},propertyChanged:function(e){var t,n=e.type,o=e.fn,a=e.param,i={SetGradientCurrentInfo:"gradientColor",SetStrokeColor:"strokeColor",SetFillColor:"fillColor",SetLineWidth:"lineWidth",SetLineStyle:"lineStyle",SetLineCap:"lineCap",SetLineJoin:"lineJoin",SetMiterLimit:"miterLimit",SetFont:"font",SetFontSize:"fontSize",SetOpacity:"opacity",Shear:"shear",Center:"center",Align:"align",Distribute:"distribute",Rotate:"rotate",ChangeRenderingOrder:"renderOrder",SetWordSpace:"wordSpace",SetHorizontalScale:"horizontalScale"};o in i&&("SetFont"===o&&a.pop(),t=l({},i[o],a),r.pdfViewer.getEventEmitter().emit(Eo.objectPropertyChanged,{type:n,properties:t}))},contentChange:function(e){var t=r.pdfViewer.getPDFDocRender();if(t&&(t.doc.setDocModified(),r.pdfViewer.redraw(1,0),e)){var n=e.type,o=e.graphicsObject,a=e.pageIndex,i=e.stage;o&&o.type&&(0===n?r.pdfViewer.getEventEmitter().emit(Eo.objectAdded,{pageIndex:a,graphicsObject:o}):(1===n||2===n&&"end"===i)&&r.pdfViewer.getEventEmitter().emit(Eo.objectContentChanged,{pageIndex:a,graphicsObject:o}))}},toggleCaret:function(e){if(!To||Mo||!r.disableToggleCaret)if(e)Do=!1,N.startInput((function(e,t){return St.trigger("OnChar",[e]).then((function(e){var n=St.getPageIndex(t);-1!==n&&St.trigger("OnMouseMove",St.getArgs(n,t,0,0))}))})),Bo=3,Me.isIOS&&r.tempInput&&r.tempInput.remove();else{if(Bo=0,Me.isIOS)return;N.endInput(),Do=!0}},updateView:function(e){var t=e.bitmapInfo;r.displayImage(t),t.isRedraw&&(r.throttleExecutor||(r.throttleExecutor=new So(100)),r.throttleExecutor.exec((function(e){return r.pdfViewer.redraw(1,0)})))},moveTip:function(e){var t=r.uiContainerRect,n=t.left,o=t.top,a=devicePixelRatio||1;jt.css({left:e.x/a+15+n,top:e.y/a+20+o}),N.setPos(e.x+n-20,e.y+o+100)},setTipMsg:function(e){jt.html(e)},showTipMsg:function(t){jt.toggle(t),To&&!Mo&&t&&(e&&clearTimeout(e),e=setTimeout((function(){jt.toggle(!1),clearTimeout(e)}),500))},showPopupMenu:function(e){if(void 0!==e.activeObject.type||void 0!==e.editingObject.type)3==e.activeObject.type&&e.menu.some((function(e){if("PopupMenuItem_e_PopupMenuItemEditObject"==e.name)return e.enable=!1,!0})),a("showPopupMenu",e);else{var t=r.pdfViewer.viewerUI.rootComponent.getComponentByName("fv--page-contextmenu");if(t){var n=document.querySelector(".fv__ui-pdfviewer").getBoundingClientRect(),o=n.x,i=n.y;t.showAt(e.position.x+o,e.position.y+i)}}},selectionChange:function(){r.doc.getPageEditor().hasSelection().then((function(e){return r.hasSelection=e})),a("selectionChange")},setClipboardText:function(e){Io(e)},enterEdit:function(e){a("enterEdit",e),r.pdfViewer.redraw(1,0)},exitEdit:function(e){r.selectionText=null,a("exitEdit",e),r.pdfViewer.redraw(1,0)},processEdit:function(e){a("processEdit",e)},cursorChange:function(e){r.$handler&&(7==e?r.$handler.addClass("fv__cursor-rotation"):(r.$handler.removeClass("fv__cursor-rotation"),r.$handler.css("cursor",Ft[e]||"")))},onAddUndo:function(e){a("onAddUndo",e)},editObject:function(){r.pdfViewer.redraw(1,0)}};this.doc.getPageEditor().setNotifier(i)}},{key:"displayImage",value:function(e){var t=this.pdfViewer.getPDFDocRender();if(e&&t.matrixes){var n=e.width,r=e.height,o=e.buffer,a=e.left,i=e.top,c=e.docRect;if(o&&t){var s=yo('<div class="pe_handler_container"></div>'),l=yo('<canvas class="pe_handler"></canvas>');s.append(l);var u=t.$ui[0].getBoundingClientRect(),p=this.pdfViewer.$ui[0].parentElement;p.getBoundingClientRect();s.css({left:a-u.left+"px",top:i-u.top+"px",width:p.clientWidth+"px",height:p.clientHeight+"px"}),this.$handler&&this.$handler.css({left:a-u.left+"px",top:i-u.top+"px",width:p.clientWidth+"px",height:p.clientHeight+"px",right:"unset",bottom:"unset"});var d=l[0];if(d){d.width=n,d.height=r;var g=d.getContext("2d");g.clearRect(0,0,n,r),Vo&&g.beginPath();var h=new(Uint8ClampedArray||Uint8Array)(o),f=g.createImageData(n,r);f.data.set(h);var v=0,m=0;if(c.width==u.width&&c.height==u.height){var b=devicePixelRatio||1;v=Math.floor((u.left-c.left)*b),m=Math.floor((u.top-c.top)*b)}g.putImageData(f,v,m),Mo&&Bo&&(document.activeElement===document.body||document.activeElement===N.getElement()[0])&&N.getElement().focus();var y=t.$ui.find(".pe_handler_container");this.$handler&&this.$handler.before(s),y.hide().remove()}}}}},{key:"handleSystemCommand",value:function(e){var t=null,n=this.doc.getPageEditor(),r=function(e){t=n.getActiveObject().then((function(t){if(!t)return n.getEditingObject();var r;null===(r=t[e.toLowerCase()])||void 0===r||r.call(t)})).then((function(t){t&&n.createEditingObjectProxy(t)[e]()}))};if(e.ctrlKey||e.metaKey){var o=document.activeElement===N.getElement()[0];switch(e.keyCode){case 65:r("SelectAll");break;case 67:r("Copy");break;case 86:return o?t:n.getEditingObject().then((function(e){e?n.createEditingObjectProxy(e).Paste():n.paste()}));case 88:r("Cut");break;case 89:n.undoRedo(o,!1);break;case 90:e.shiftKey?n.undoRedo(o,!1):n.undoRedo(o,!0)}}return t}},{key:"pageHandler",value:function(e){this.pageRender=e}},{key:"destroyPageHandler",value:function(){}},{key:"destroyDocHandler",value:function(){this.docRender&&(yo(document).off("focusin",this.focusin),this.doc.endPageEdit(),Bo=0,St.destroy(),this.keyMgr.destroy(),this.hammer&&this.hammer.destroy(),this.destroyHooks.forEach((function(e){return e()})),this.resetHandler(),this.docRender.$ui.find(".pe_handler_container").remove(),jt.hide(),this.component&&this.component.deactive(),this.docRender=null,this.destroyHooks=null,this.keyMgr=null,this.hasSelection=!1,this.$handler.get(0).style.cssText="",this.$handler=null,this.component=null)}},{key:"out",value:function(){this.destroyDocHandler(),this.destroyPageHandler()}},{key:"resetHandler",value:function(){}}],[{key:"getStateName",value:function(){return"page-editor"}},{key:"setMatrix",value:function(e,t,n){vo.startPromise&&vo.startPromise.then((function(){ht(e,t,n)}))}}]),r}(Po.IStateHandler);const Ho=zo;var Ko=o(4395),$o=o.n(Ko),Wo=w.PDFViewCtrl.shared.colorConvertor,Go={0:[],1:[2,2],2:[3,3],3:[4,4],4:[4,3,2,3],5:[4,3,16,3],6:[8,4,4,4]},Yo=Object.keys(Go).map((function(e){return Go[e].join()})),Jo={1:"GRAY",2:"RGB",3:"CMYK"},qo=function(e,t){if(1==t&&e<=1||!t)return[e];var n=e;if(e<=1){var r=255*(1-e)|0;n=4278190080|r<<16|r<<8|r}var o=Wo(n,Jo[t]);return o.splice(0,1),o},Xo=[{value:0,text:"fillText"},{value:1,text:"strokeText"},{value:2,text:"fillStrokeText"},{value:3,text:"invisible"}],Qo=[{value:1,text:"page-editor:textAp.gray"},{value:2,text:"RGB"},{value:3,text:"CMYK"}],Zo=[{value:0,text:"page-editor:textAp.noColor"}].concat(y(Qo)),ea=[{value:2,text:"project"},{value:1,text:"round"},{value:0,text:"butt"}],ta=[{value:0,text:"miter"},{value:1,text:"round"},{value:2,text:"bevel"}],na=w.PDFViewCtrl._internal.consts.ADD_FONT_MAP_LIST,ra=w.UIEvents,oa=w.shared.AdditionalFamilies,aa=w.PDFViewCtrl.FontUtil.FontFamilies,ia=w.PDFViewCtrl.shared.colorConvertor,ca=w.PDFViewCtrl.Deps.jQuery,sa=w.PDFViewCtrl.KeyboardUtils.isMatch,la=w.PDFViewCtrl.KeyboardUtils.matchers.Enter,ua=function(e,t){Object.assign(e,{opacity:100*e.getPEObjectProp("getOpacity",0)|0,positionX:(e.getPEObjectProp("getXPosition",0)/72).toFixed(2)+" "+t,positionY:(e.getPEObjectProp("getYPosition",0)/72).toFixed(2)+" "+t,width:(e.getPEObjectProp("getWidth",0)/72).toFixed(2)+" "+t,height:(e.getPEObjectProp("getHeight",0)/72).toFixed(2)+" "+t,scaleX:"100%",scaleY:"100%",fontSize:e.getPEObjectProp("getFontSize").toFixed(2),horizonScale:e.getPEObjectProp("getHorizontalScale"),charSpace:e.getPEObjectProp("getCharSpace").toFixed(2),wordSpace:e.getPEObjectProp("getWordSpace").toFixed(2),strokeGray:e.getGrayColor("stroke"),fillGray:e.getGrayColor(),lineWidth:e.getPEObjectProp("getLineWidth"),miterLimit:e.getPEObjectProp("getMiterLimit")})},pa=aa.map((function(e){return f(h({},e),{family:e.value})})),da=function(e){g(n,e);var t=x(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).customFamilies=[],r.fontName="",r.baseFontFamilies=pa,r.fontFamilies=y(oa),r.textModes=Xo,r.textMode=Xo[0].value,r.colorTypes=Qo,r.textStrokeColor=Qo[0].value,r.textFillColor=Qo[0].value,r.lineColorTypes=Zo,r.pathStrokeColor=Zo[0].value,r.pathFillColor=Qo[0].value,r.lineCaps=ea,r.lineCap="",r.lineJoins=ta,r.lineJoin="",r}return s(n,[{key:"getGrayColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fill",t=this.obj;if(!t)return 1;var n="fill"==e?"fillColor":"strokeColor";return 1==t.json[n+"Space"]?1-(255&t.json[n])/255:1}},{key:"getPEObjectProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.obj&&this.obj[e]?this.obj[e]():t}},{key:"setPEObjectProp",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var a;if(!isNaN(t)&&!this.syncingUI&&this.obj&&this.obj[e])return(a=this.obj)[e].apply(a,y(r))}},{key:"forceSyncUI",value:function(){var e=this;return this.pdfUI.pdfViewer.currentPDFDoc.pageEditor.getActiveObject().then((function(t){return e.syncUI(t)}))}},{key:"mounted",value:function(){var e=this,t=this.pdfUI.pdfViewer,n=t.getEventEmitter();n.on("pageeditor-notify",(function(t,n){if("selectionChange"===t)e.forceSyncUI().then((function(t){t&&e.getComponentByName("general-tab").active()}))})),n.on("PE-mouseMoveEnd",(function(){e.forceSyncUI()})),n.on(ra.objectPropertyChanged,(function(){e.forceSyncUI()})),this.$width=this.getEle("width"),this.$height=this.getEle("height"),this.bindEvent(),t.currentPDFDoc&&(this.digest(),this.forceSyncUI()),this.watch("ctrl.positionX",(function(t,n){t.length&&!isNaN(t)&&e.setPEObjectProp("setXPosition",t,72*t)})),this.watch("ctrl.positionY",(function(t,n){t.length&&!isNaN(t)&&e.setPEObjectProp("setYPosition",t,72*t)})),this.watch("ctrl.width",this.watchCtrlWidth=function(t,n){if(t.length&&!isNaN(t)&&(e.setPEObjectProp("setWidth",t,72*t),e.$proportion&&e.$proportion.hasClass("lock"))){t=(t/e.constrain).toFixed(2);var r=e.$height,o=[t,t,{target:r[0]}];r.val(t),e.focusInput.apply(e,y(o)),e.blurInput.apply(e,y(o)),e.setPEObjectProp("setHeight",t,72*t)}}),this.watch("ctrl.height",this.watchCtrlHeight=function(t,n){if(t.length&&!isNaN(t)&&(e.setPEObjectProp("setHeight",t,72*t),e.$proportion&&e.$proportion.hasClass("lock"))){t=(e.constrain*t).toFixed(2);var r=e.$width,o=[t,t,{target:r[0]}];r.val(t),e.focusInput.apply(e,y(o)),e.blurInput.apply(e,y(o)),e.setPEObjectProp("setWidth",t,72*t)}}),this.watch("ctrl.opacity",(function(t,n){t.length&&!isNaN(t)&&(t>100&&(t=100),e.setPEObjectProp("setOpacity",t,t/100))})),[["ctrl.fontSize","setFontSize"],["ctrl.horizonScale","setHorizontalScale"],["ctrl.charSpace","setCharSpace"],["ctrl.wordSpace","setWordSpace"],["ctrl.lineWidth","setLineWidth"],["ctrl.miterLimit","setMiterLimit"]].forEach((function(t){var n=b(t,2),r=n[0],o=n[1];e.watch(r,(function(t,n){e.setPEObjectProp(o,t,+t)}))}))}},{key:"blurInput",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[2].target,o=t[0];r.type="","%"==r.postfix?(t[0]="100",this.setPEObjectProp("scale",1,o/100-1,"horizon"==r.dataset.dir)):t[0]=(+t[0]).toFixed(2),r.value=t[0]+" "+r.postfix}},{key:"fontSizeBlur",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[2].target,o=t[0];r.value=Number(o).toFixed(2)}},{key:"focusInput",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=parseFloat(t[0]),o=t[2].target;o.type="number",o.value=r,o.postfix=t[0].replace(""+r,""),"%"!==o.postfix&&(o.postfix=this.pdfUI.i18n.t("sidebar.layers.importDialog.inches"))}},{key:"getEle",value:function(e,t){var n=this.component.getComponentByName(e);return t?n:ca(n.element)}},{key:"bindEvent",value:function(){var e=this;ca(this.component.element).find(".rangeLimit").on("keyup",(function(e){var t=ca(e.target),n=t.val().split(".");n[1]&&n[1].length>2&&t.val(n[0]+"."+n[1].substring(0,2))})),ca(this.component.element).find('[name="opacity"] input').on("keyup",(function(e){+e.target.value>=100&&(e.target.value="100")})),this.component.getComponentByName("PE-lineStyle").on("change",(function(t){e.obj.setLineStyle(Go[t]).then((function(t){return e.forceSyncUI()}))})),Array.from(["PE-fontSize","PE-horizonScale","PE-charSpace","PE-wordSpace","PE-opacity"]).forEach((function(n){var r=e.component.getComponentByName(n);ca(r.element).on("input",(function(e){var o=e.target.value;if(/^-?\d*(\.\d+)?$/.test(o)&&o){var a=Number(r.getAttribute("max")),i=Number(r.getAttribute("min"));o>a||o<i?t(r,n):(["PE-horizonScale","PE-opacity"].includes(n)||(o=Number(o).toFixed(2)),r.setValue(o))}else t(r,n)}))}));var t=function(t,n){var r=e.obj.json[n.replace("PE-","")];"PE-opacity"===n&&(r=100*Number(r)),["PE-horizonScale","PE-opacity"].includes(n)||(r=Number(r).toFixed(2)),t.setValue(r)};this.component.querySelectorAll("@slider").forEach((function(t){switch(t.attrs["@model"]){case"ctrl.opacity":t.on("change",(function(t,n,r,o){o.isMoving||e.setPEObjectProp("setOpacity",r,r/100)}));break;case"ctrl.fillGray":t.on("change",(function(t,n,r,o){if(!o.isMoving){var a=e.obj,i=ia(["G",1-r],"int");a.setFillColor(qo(1-r,!0,a.json.fillColorSpace),!0,i,!0).then((function(t){return e.forceSyncUI()}))}}));break;case"ctrl.strokeGray":t.on("change",(function(t,n,r,o){if(!o.isMoving){var a=e.obj,i=ia(["G",1-r],"int");a.setStrokeColor(qo(1-r,!0,a.json.strokeColorSpace),!0,i,!0).then((function(t){return e.forceSyncUI()}))}}))}})),this.pdfUI.addViewerEventListener("languageChangeFinished",(function(t){ua(e,e.pdfUI.i18n.t("sidebar.layers.importDialog.inches")),e.digest()})),this.pdfUI.addUIEventListener(l({},ra.localFontLoaded,(function(t){e.updateFontFamilyUI()}))),this.pdfUI.getStore().then((function(t){e.component.addDestroyHook(t.subscribe(na,(function(t){e.updateCustomFamily(t)})));var n=t.getCurrentValue(na);n&&(e.customFamilies=n.all.map((function(e){return{name:e.name,family:e.name}}))),e.updateFontFamilyUI()}));var n=this.$proportion,r=this.getEle("width"),o=this.getEle("height");n&&n.on("click",(function(){if(n.hasClass("lock"))n.removeClass("lock"),n.addClass("unlock");else{n.removeClass("unlock"),n.addClass("lock");var t=parseFloat(r.val()),a=parseFloat(o.val());e.constrain=t/a}}))}},{key:"updateCustomFamily",value:function(e){e&&e.all.length&&(this.customFamilies=e.all.map((function(e){return{name:e.name,family:e.name}})),this.updateFontFamilyUI())}},{key:"updateFontFamilyUI",value:function(){var e=this.getLocalFamilies();this.fontFamilies.length>this.baseFontFamilies+oa.length&&e.length+this.customFamilies.length?(this.baseFontFamilies=[],this.fontFamilies=[].concat(additionalFamilies,this.customFamilies,this.mergeFamilies(e)),this.digest()):this.baseFontFamilies=[].concat(pa,this.mergeFamilies(e))}},{key:"getLocalFamilies",value:function(){var e=this.pdfUI.pdfViewer._localFontDatas||[];return this._localFamilies&&this._localFamilies.length?this._localFamilies:this._localFamilies=e.map((function(e){return{family:e.family,name:e.fullName}})).filter((function(e){return!pa.find((function(t){return t.family===e.family}))}))}},{key:"mergeFamilies",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.concat(t)})).sort((function(e,t){return e.name>t.name?1:-1}))}},{key:"keyBoardHandler",value:function(e,t){sa(e,la)&&this.showCP(t)}},{key:"showCP",value:function(e){var t=this,n=this.getEle(e).find(".color-picker"),r=n.attr("disabled");if(!r||!r.length){var o=this.obj,a=-1!=e.indexOf("StrokeColor"),i=-1!=e.indexOf("path"),c=a?o.getStrokeColor():o.getFillColor(),s=a?"setStrokeColor":"setFillColor",l=a?"strokeColorSpace":"fillColorSpace",u=o.json[l];if(2==u||3==u){var p=this.pdfUI.colorSpectrum;i&&p.showTransparent(!0),p.setDefaultColor(ia(c,"#")),p.show(n,(function(e){if(0===e)return o.setColorSpace(l,0),void o[s]([0],!0,4278190080,!1).then((function(e){return t.forceSyncUI()}));var n=ia(e,"int");o[s](qo(n,u),!0,n).then((function(e){return t.forceSyncUI()}))}))}}}},{key:"isCmpDisabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PE-textStrokeColor",t=this.obj;if(1==t.getType()){var n=t.getTextMode();return"PE-textStrokeColor"==e?1!=n&&2!=n:0!=n&&2!=n}return!1}},{key:"syncUI",value:function(e){var t=this;if(!e)return this.obj=e,this.component.disable(),!0;this.constrain=e.json.width/e.json.height,this.component.enable(),this.syncingUI=!0;var n=!this.obj||e.getType()!==this.obj.getType();this.obj=e,ua(this,this.pdfUI.i18n.t("sidebar.layers.importDialog.inches"));var r,o="disabled",a=function(n){var r=t.getEle(n),a=n.split("-")[1],i=t.component.getComponentByName(a),c=r.find(".color-picker .color");c.css("background-color","#000");var s=n.indexOf("path"),l=s>-1?t.lineColorTypes:t.colorTypes,u=t.getEle(n,!0).querySelector("@slider");if(t.isCmpDisabled(n))r.find(".color-picker").attr(o,o),i.disable(),t[a]=1,t.selectDropdownChild(i,l.findIndex((function(e){return 1===e.value}))),u.show(),u.lock();else{r.find(".color-picker").removeAttr(o),i.enable(),u.unlock();var p=-1!==n.indexOf("StrokeColor")?"strokeColor":"fillColor",d=e.json[p+"Space"];t[a]=d,t.selectDropdownChild(i,l.findIndex((function(e){return e.value===d})));var g=s&&!d?"#fff":ia(e.json[p],"#");c.css("background-color",g),1!==d?(c.removeAttr(o),u.hide()):(c.attr(o),u.setValue(t.getGrayColor(p.replace("Color",""))),u.show())}},i="page-editor:";switch(e.getType()){case 1:var c=e.getFontName();this.fontFamilies=this.fontFamilies.filter((function(e){return!e.external})),this.fontNameComp=this.getComponentByName("PE-fontName");for(var s=this.fontNameComp.children(),l=!1,u=0;u<s.length;u++)if(s[u].text&&s[u].text.replace(/\s|-/g,"").toLowerCase()===c.toLowerCase())return this.fontName=c,l=!0,this.selectDropdownChild(this.fontNameComp,u),this.syncingUI=!1,!1;l||(this.fontFamilies.push({name:c,family:c,external:!0}),this.fontName=c,this.fontNameComp.digest(),this.selectDropdownChild(this.fontNameComp,this.fontNameComp.children().length));var p=this.textModes.find((function(t){return t.value===e.getTextMode()}));this.textModeComp=this.getComponentByName("PE-textMode"),p&&(this.textMode=p.value,this.selectDropdownChild(this.textModeComp,this.textModes.findIndex((function(e){return e.value===+t.textMode}))));["PE-textStrokeColor","PE-textFillColor"].forEach((function(e){a(e)})),i+="TextProps";break;case 2:i+="PathProps";["PE-pathStrokeColor","PE-pathFillColor"].forEach((function(e){a(e)}));var d=0==(r=e.getLineStyle()).length?0:Yo.indexOf(r.join()),g=this.component.getComponentByName("PE-lineStyle");g&&g.setValue(d),this.lineCap=Number(e.getLineCap()),this.lineJoin=Number(e.getLineJoin());var h=this.component.getComponentByName("PE-lineCap");this.selectDropdownChild(h,this.lineCaps.findIndex((function(e){return e.value===t.lineCap})));var f=this.component.getComponentByName("PE-lineJoin");this.selectDropdownChild(f,this.lineJoins.findIndex((function(e){return e.value===t.lineJoin})));break;case 3:i+="ImageProps";break;case 4:i+="ShadingProps";break;case 5:i+="MixedProps"}return ca(this.component.element).find(".fv__ui-layer-header-title").text(this.pdfUI.i18n.t(i)).attr("data-i18n",i),this.component.hasFocus()?(this.syncingUI=!1,!1):(this.digest(),this.syncingUI=!1,n)}},{key:"getActiveType",value:function(){return this.obj?this.obj.getType():0}},{key:"hideDialog",value:function(){this.component.hide()}},{key:"selectFontName",value:function(e){var t=this;this.obj.setFont(e,this.obj.getFontIsBold(),this.obj.getFontIsItalic(),0).then((function(e){return t.forceSyncUI()}))}},{key:"selectTextMode",value:function(e){var t=this;this.obj.setTextMode({type:"TextMode",value:e}).then((function(e){return t.forceSyncUI()}))}},{key:"selectLineCap",value:function(e){var t=this;this.obj.setLineCap(+e).then((function(e){return t.forceSyncUI()}))}},{key:"selectLineJoin",value:function(e){var t=this;this.obj.setLineJoin(+e).then((function(e){return t.forceSyncUI()}))}},{key:"selectColor",value:function(e,t){var n=this,r=this.obj,o=+t,a=e+"Space",i=r.json[e];r.setColorSpace(a,o),r["set"+e[0].toUpperCase()+e.substring(1)](qo(i,o),!0,i,o).then((function(e){return n.forceSyncUI()}))}},{key:"selectDropdownChild",value:function(e,t){e.select(e.childAt(t)),e.digest()}}],[{key:"getName",value:function(){return"PropsDialogController"}}]),n}(w.Controller),ga=o(5442),ha=o.n(ga),fa=w.PDFViewCtrl.Events,va=w.PDFViewCtrl.Consts.PDFDocPermission,ma=w.vendors.jQuery,ba=(w.PDFViewCtrl.shared.Store,{"home-tab":"home-toolbar-group-list","edit-tab":"edit-toolbar-group-list"}),ya={"home-tab":"edit-object-ribbon-dropdown","edit-tab":"fv--plugin-PageEditor-edit"},Pa=function(e){g(r,e);var t=x(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then((function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])})).then((function(e){var n=b(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()}))}},{key:"mounted",value:function(){var e=this;p(u(r.prototype),"mounted",this).call(this),this.eventsHandler(),this.pdfUI.getStore().then((function(t){e.store=t})),this.addDestroyHook(this.getPDFUI().addViewerEventListener(fa.toolbarTabsClicked,(function(t){t&&["edit-tab","home-tab"].includes(t.name)&&(e.changeBtnStatus(t.name),e.currentTabName=t.name)})))}},{key:"toggleLock",value:function(e){Object.values(ya).forEach((function(t){pdfui.getComponentByName(t).then((function(t){t&&(e?t.lock():t.unlock())}))}))}},{key:"changeBtnStatus",value:function(e){var t=this;return n((function(){var n,r,o,a,i,c,s,l,u;return S(this,(function(p){switch(p.label){case 0:return n=t.getPDFUI().pdfViewer.getStateHandlerManager().currentStateHandler.getStateName(),(r=t.getPDFUI()).activeMainPageTab?(o=e||r.activeMainPageTab.name,(a=ya[o])?(i=ba[o],[4,r.getComponentByName(i)]):[2]):[2];case 1:return[4,p.sent().getComponentByName(a)];case 2:return(c=p.sent())&&(t.component=c),[4,r.getCurrentPDFDoc()];case 3:return(s=p.sent())?(l=s.getPageEditor(),(u=Number(l.filter))===me.None||n!==Ho.getStateName()?(t.component.deactive(),"function"==typeof t.component.getDropdown&&t.component.getDropdown().children().find((function(e){return e.deactive()})),t.removeAllActive()):(t.component.active(),t.setEditType(me[""+u],e)),[2]):[2]}}))}))()}},{key:"eventsHandler",value:function(){var e,t=this,n=this.getPDFUI();e=function(e){var n,r=t.store.getCurrentValue(we);if(e.getStateName()===Ho.getStateName()&&r==xe)t.component.active(),"function"==typeof t.component.getDropdown&&(null===(n=t.component.getDropdown())||void 0===n||n.children()[0].active());else if(t.component.deactive(),"function"==typeof t.component.getDropdown){var o,a=null===(o=t.component.getDropdown())||void 0===o?void 0:o.children();null==a||a.find((function(e){return e.deactive()}))}},this.addDestroyHook(n.addViewerEventListener(fa.beforeSwitchStateHandler,e))}},{key:"removeAllActive",value:function(){ma(this.component.element).find(".fv__ui-dropdown-list li").removeClass("active"),ma(this.component.element).find(".fv__ui-dropdown-list i.fv__ui-property-icon-selected-color-light").removeClass("fv__ui-property-icon-selected-color-light")}},{key:"updateItemFromDropdown",value:function(){var e=this;setTimeout(n((function(){var t,n,r,o,a,i;return S(this,(function(c){switch(c.label){case 0:return[4,e.getPDFUI().getCurrentPDFDoc()];case 1:return t=c.sent(),n=t.getPageEditor(),r=Number(n.filter),o=me[""+r],a="home-tab"===e.currentTabName?o:"fv--plugin-PageEditor-edit-".concat(o.toLowerCase()),"home-tab"!==e.currentTabName&&e.removeAllActive(),i=ma(e.component.element).find('li[name="'.concat(a,'"]')),ma(e.component.element).find(".fv__ui-dropdown-list li").removeClass("active"),i.addClass("active").find("i").addClass("fv__ui-property-icon-selected-color-light"),[2]}}))})))}},{key:"setEditType",value:function(e,t){var n=this,r=this.getPDFUI();r.getCurrentPDFDoc().then((function(o){o&&r.getStateHandlerManager().then((function(r){n.store.dispatch(we,xe),r.switchTo(Ho.getStateName()),o.getPageEditor().setObjectFilter(ce[e]),n.updateItem(e,t)}))}))}},{key:"updateItem",value:function(e,t){var r=this;return n((function(){var t,n;return S(this,(function(o){switch(o.label){case 0:return(t=r.component.getComponentByName(e))?(ma(t.element).addClass("active").siblings().removeClass("active"),[3,3]):[2];case 1:return[3,3];case 2:(n=o.sent())&&ma(n.element).addClass("active").siblings().removeClass("active").find("i").removeClass("fv__ui-property-icon-selected-color-light"),n&&ma(n.element).find("i").addClass("fv__ui-property-icon-selected-color-light"),o.label=3;case 3:return[2]}}))}))()}},{key:"handle",value:function(){if("dropdown"===this.component.parent.nodeName)return p(u(r.prototype),"handle",this).call(this);this.setEditType(this.component.getAttribute("edit-type"))}}],[{key:"getName",value:function(){return"EditObjectController"}},{key:"permission",get:function(){return va.ModifyDocument}}]),r}(w.Controller),Ca=w.PDFViewCtrl.Events,xa=w.PDFViewCtrl.Consts.PDFDocPermission,Sa=function(e){g(r,e);var t=x(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"mounted",value:function(){var e=this;p(u(r.prototype),"mounted",this).call(this),this.eventsHandler(),this.pdfUI.getStore().then((function(t){e.store=t}))}},{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then((function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])})).then((function(e){var n=b(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()}))}},{key:"eventsHandler",value:function(){var e=this,t=this.getPDFUI();this.addDestroyHook(t.addViewerEventListener(Ca.beforeSwitchStateHandler,(function(t,n){var r=e.store.getCurrentValue(we);t.getStateName()===pt.getStateName()&&r==Se?e.component.active():e.component.deactive()})))}},{key:"handle",value:function(){var e=this,t=this.getPDFUI();t.getCurrentPDFDoc().then((function(n){if(n)return t.getStateHandlerManager().then((function(n){e.store.dispatch(we,Se);var r=pt.getType();n.switchTo("touch-up-editor"),"touchup"!==r&&"touch-up-editor"===n.currentStateHandler.getStateName()&&e.openRightTextEditPanel(t,0),fo(!0),n.getCurrentStates().activateType(t,n.pdfViewer,"touchup",!0)}))}))}},{key:"openRightTextEditPanel",value:function(e,t){return n((function(){var n,r,o;return S(this,(function(a){switch(a.label){case 0:return[4,e.getComponentByName("sidebar-right")];case 1:return(n=a.sent())?(n.show(),[4,e.getComponentByName("sidebar-right-tabs")]):[2];case 2:return(r=a.sent())?(r.openTab("edit-properties-panel"),r.setActivetab("edit-properties-panel"),[4,e.getComponentByName("edit-properties")]):[2];case 3:return o=a.sent(),!t&&o&&(o.setHost({},X.TouchUp),o.disable()),[2]}}))}))()}}],[{key:"getName",value:function(){return"AddTextController"}},{key:"permission",get:function(){return xa.ModifyDocument}}]),r}(w.Controller),wa=w.PDFViewCtrl.Consts.PDFDocPermission,Ea=function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"mounted",value:function(){var e=this;p(u(n.prototype),"mounted",this).call(this),this.pdfUI.getStore().then((function(t){e.store=t}))}},{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then((function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])})).then((function(e){var n=b(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()}))}},{key:"activeImage",value:function(e,t){St.trigger("OnHitObjectTest",St.getArgs(t,e,0,-1),0),St.trigger("OnLButtonDown",St.getArgs(t,e,0,H(e))),St.trigger("OnLButtonUp",St.getArgs(t,e,0,H(e)))}},{key:"handle",value:function(e){var t=this,n=this.getPDFUI(),r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){try{n.getCurrentPDFDoc().then((function(r){r&&n.getStateHandlerManager().then((function(o){t.store.dispatch(we,xe);var a=o.currentStateHandler.getStateName()===Ho.getStateName()?0:1e3;o.switchTo(Ho.getStateName()),setTimeout((function(){var o=r.getPageEditor(),a=n.pdfViewer.getPDFDocRender(),i=a.getCurrentPageIndex();return r.getPageByIndex(i).then((function(r){var c=a.$ui.get(0).getBoundingClientRect().x,s=a.$ui.parents(".fv__ui-pdfviewer").get(0).getBoundingClientRect().y;return St.trigger("OnHitObjectTest",St.getArgs(i,{clientX:c,clientY:s},0,-1),0).then((function(r){return o.createImage(e.target.result).then((function(e){e?t.activeImage({clientX:c+5,clientY:s+5},i):n.alert({message:"page-editor:alert.createImageFailed",level:"warning"})}))}))}))}),a)}))}))}catch(e){n.alert({message:"page-editor:alert.createImageFailed",level:"warning"})}}}}],[{key:"getName",value:function(){return"AddImageAdvController"}},{key:"permission",get:function(){return wa.ModifyDocument}}]),n}(w.Controller),ka=o(9848),_a=o.n(ka),Ia=w.PDFViewCtrl.Consts.PDFDocPermission,Aa=(w.vendors.jQuery,function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"mounted",value:function(){var e=this;p(u(n.prototype),"mounted",this).call(this),this.pdfUI.getStore().then((function(t){e.store=t}))}},{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then((function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])})).then((function(e){var n=b(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()}))}},{key:"addPath",value:function(e){var t=this,n=this.getPDFUI();n.getCurrentPDFDoc().then((function(r){r&&n.getStateHandlerManager().then((function(n){t.store.dispatch(we,xe),n.switchTo(Ho.getStateName()),r.getPageEditor().createPath(ie[e]),t.updateUI("path-".concat(e))}))}))}},{key:"addShading",value:function(e){var t=this,n=this.getPDFUI();n.getCurrentPDFDoc().then((function(r){r&&n.getStateHandlerManager().then((function(n){t.store.dispatch(we,xe),n.switchTo(Ho.getStateName()),r.getPageEditor().createShading(ie[e]),t.updateUI("shading-".concat(e))}))}))}},{key:"updateUI",value:function(e){var t=this,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active",r=e.split("-"),o=t.component.getComponentByName(r[0]).getComponentByName(r[1]);o&&o[n]&&o[n]()};this.activeType&&n(this.activeType,"deactive"),n(e),this.activeType=e}}],[{key:"getName",value:function(){return"AddShapesController"}},{key:"permission",get:function(){return Ia.ModifyDocument}}]),n}(w.Controller));const Ta={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReplyAdded:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationReviewStateAnnotAdded:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationMarkedStateAnnotAdded:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationPositionMoved:"annotation-moved-position",annotationOrderChanged:"annotation-order-changed",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionAdded:"action-add",actionRemove:"action-remove",actionRemoved:"action-remove",layerVisibleChange:"layer-visible-change",layerVisibleChanged:"layer-visible-change",layerRemoved:"layer-removed",layerMerged:"layer-merged",layerAdded:"layer-added",bookmarkAdded:"bookmark-added",structureBookmarkAdded:"structure-bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageInfoChanged:"page-info-change",pageRotationChange:"page-rotation-change",beforePageRotationChanged:"before-page-rotation-changed",pageRotationChanged:"page-rotation-change",imageAdded:"image-added",watermarksAdded:"watermarks-added",watermarkAdded:"watermark-added",watermarkRemoved:"watermark-removed",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptSucceeded:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pwdAndPermRemoved:"remove-password-and-permission",securityTypeChanged:"security-type-changed",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",pagesInserted:"import-pages",importPages:"import-pages",documentAttachmentAdd:"document-attachment-add",docAttachmentAdded:"document-attachment-add",documentAttachmentModify:"document-attachment-modify",docAttachmentModified:"document-attachment-modify",documentAttachmentRemove:"document-attachment-remove",docAttachmentRemoved:"document-attachment-remove",applyRedaction:"apply-redaction",redactionApplied:"apply-redaction",removeReviewState:"remove-review-state",reviewStateRemoved:"remove-review-state",removeMarkedState:"remove-marked-state",markedStateRemoved:"remove-marked-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",flattenAnnotation:"flatten-annotation",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",calculationOrderUpdated:"calculationOrderUpdated",COChange:"COChange",COChanged:"COChange",pagesMoved:"pages-moved",pagesReverseStart:"pagesReverseStart",pagesReversed:"pagesReversed",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated",pageMeasureScaleRatioChanged:" page-measure-scale-ratio-changed",obtainsPageFromEngine:"obtains-page-from-engine",pagesBoxChange:"pages-box-changed",pagesBoxChanged:"pages-box-changed",pagesLabelChange:"pages-label-change",pagesLabelChanged:"pages-label-change",pagesLabelNeedUpdate:"pages-label-need-change",pagesLabelNeedUpdated:"pages-label-need-change",pagesReplace:"pages-replace",pagesReplaced:"pages-replace",recognitionForm:"recognition-form",removeEmbeddedPageThumbnail:"remove-embedded-page-thumbnail",embeddedPageThumbnailRemoved:"remove-embedded-page-thumbnail",objectStartEdit:"object-start-edit",objectEndEdit:"object-end-edit",objectSelectionChanged:"object-selection-changed",objectAdded:"object-added",objectPropertyChanged:"object-property-changed",objectContentChanged:"object-content-changed",paragraphContentChanged:"paragraph-text-changed",paragraphTextOnActivate:"paragraph-text-on-activate",paragraphTextOnDeactivate:"paragraph-text-on-deactivate",paragraphTextEnterEdit:"paragraph-text-enter-edit",paragraphTextExitEdit:"paragraph-text-exit-edit",paragraphTextOnChar:"paragraph-text-on-char",findSuccess:"find-success",replaceSuccess:"replace-success",replaceAllSuccess:"replace-all-success",articleThreadAdded:"article-thread-added",articleThreadUpdated:"article-thread-updated",articleThreadRemoved:"article-thread-removed",articleBeadAdded:"article-bead-added",articleBeadRemoved:"article-bead-removed",articleBeadUpdated:"article-bead-updated",articleEnterReadMode:"article-enter-read-mode",articleOutReadMode:"article-out-read-mode",invalidRect:"invalidRect",xfaContentChanged:"xfa-content-changed",formReloaded:"formReloaded",formFieldImported:"form-field-imported",pagingSealUpdated:"paging-seal-updated",xfaFormImported:"xfa-form-imported",xfaFormReset:"xfa-form-reset",xfaFormRemoved:"xfa-form-removed",textSplited:"text-splited",formFieldPropertyUpdated:"form-field-property-updated",formFieldRenamed:"form-field-renamed",formFieldRemoved:"form-field-removed",formReset:"form-reset",formImported:"form-imported",tabOrderTypeUpdated:"tab-order-type-updated",pageAdditionalActionAdded:"page-additional-action-added",pageAdditionalActionUpdated:"page-additional-action-updated",pageAdditionalActionRemoved:"page-additional-action-removed",docAdditionalActionAdded:"doc-additional-action-added",docAdditionalActionUpdated:"doc-additional-action-updated",docAdditionalActionRemoved:"doc-additional-action-removed",docOpenActionUpdated:"doc-open-action-updated",docOpenActionRemoved:"doc-open-action-removed",formWidgetCreated:"form-widget-created",pdfDocCreated:"pdf-doc-created"};const Ma=Object.assign({jrLicenseSuccess:"jr-license-success",srLicenseSuccess:"sr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",beforeLoadPDFDoc:"before-load-pdf-document",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",documentClosed:"document-closed",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",beforeRenderPage:"before-render-page",renderPageSuccess:"render-page-success",updateZoomMode:"update-zoom-mode",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",toggleFullScreen:"toggle-full-screen",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",activeMultipleAnnotations:"active-multiple-annotations",unActiveAnnotation:"unactive-annotation",updateActiveAnnotation:"update-action-annotation",updateActionAnnotation:"update-action-annotation",removeActiveAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationBefore:"remove-action-annotation-before",removeActiveAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActiveAnnotationFailed:"remove-action-annotation-failed",removeActionAnnotationFailed:"remove-action-annotation-failed",beforeSwitchStateHandler:"before-switch-state-handler",switchStateHandler:"switch-state-handler",deactiveStateHandler:"deactive-state-handler",afterSwitchStateHandler:"after-switch-state-handler",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",beforeDocumentRotation:"before-document-rotation",afterDocumentRotation:"after-document-rotation",snapModeChanged:"snap-mode-changed",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",changeReadSpeed:"changeReadSpeed",changeReadVolume:"changeReadVolume",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",perimeterAnnotCreationStart:"perimeter-creation-start",updateDistanceAnnot:"update-distance-annot",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",drawingAnnotCreationStart:"drawing-creation-start",drawingAnnotCreationEnd:"drawing-creation-end",drawingAnnotCreationCancel:"drawing-creation-cancel",addEditImage:"add-edit-image",InkImageSelected:"ink-image-selected",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",sideBarChanged:"sidebar-changed",showWhatsNew:"show-whats-new",disableScroll:"disable-scroll",enableScroll:"enable-scroll",updateScrollableStatus:"update-scrollable-status",selectText:"select-text",changeEnableJS:"change-enable-js",toggleEngineSr2JrSuccess:"toggle-engine-sr-to-jr-success",iconInited:"iconInited",iconAdded:"iconAdded",iconRemoved:"iconRemoved",annotationPermissionChanged:"annotation-premission-changed",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page",designerAssistantStatusChanged:"form-designer-assistant-status-changed",mouseEnter:"mouse-enter",mouseLeave:"mouse-leave",setFromFieldHighlight:"set_form_field_highlight",AddFontMaps:"set_font_map",thumbnailClicked:"thumbnail-clicked",layerActionActived:"layer-action-actived",redeModeShowSidebar:"rede-mode-show-sidebar",gridToggle:"grid-toggle",snapGridToggle:"snap-grid-toggle",toggleCollaborationMode:"toggleCollaborationMode",findReplaceDialogVisibleChange:"find-replace-dialog-visible-change",showAllComments:"show-all-comments",hideAllComments:"hide-all-comments",focusOnControl:"focus-on-control",blurFromObject:"blur-from-object",documentWillPrint:"document-will-print",documentDidPrint:"document-did-print",documentWillSave:"document-will-save",documentDidSave:"document-did-save",verifyDocSignatureEvent:"verify-doc-signature",verifySignatureEvent:"verify-signature",clearSignatureEvent:"clear-signature",viewSignedVersionDocEvent:"view-signed-version",showFieldPropertiesEvent:"show-field-properties",showSignatureVerifyInfoEvent:"show-signature-tusted-info",compareSignedVersionEvent:"compare-signed-version",showCompareSignedVersionResultEvent:"show-compare-signed-version-result",eSignCnShowMultiPageStamp:"eSignCnShowMultiPageStamp",eSignCNAddDateStamp:"eSignCNAddDateStamp",eSignCNCloseStamp:"eSignCNCloseStamp",eSignCNChangePagingSeal:"eSignCNChangePagingSeal",eSignCNOpenProcessSeal:"eSignCNOpenProcessSeal",eSignCnApply:"eSignCnApply",eSignCNShowOfflineResult:"eSignCNShowOfflineResult",eSignCnExit:"eSignCnExit",tapField:"tap-field",tapGraphicsObject:"tap-graphics-object",spawnPageSuccess:" spawn-page-success",progressChanged:"progress-changed",togglePageContextMenu:"toggle-page-contextmenu",beforeRenderingVisiblePages:"before-rerendering-visible-pages",afterRenderingVisiblePages:"after-rerendering-visible-pages",localFontLoaded:"local-font-loaded",willToggleAutoScroll:"will-toggle-auto-scroll",showLoading:"show-loading",changeLanguageSuccess:"change-language-success"},Ta);var Fa,Oa,Ra,ja,Da,Ba,Ua=function(){function e(t,n){i(this,e),l(this,"internalGraphicObject",void 0),l(this,"pdfViewer",void 0),this.internalGraphicObject=t,this.pdfViewer=n}return s(e,[{key:"setProperties",value:function(e){var t=this;return n((function(){var n,o,a,i,c,s,l,u;return S(this,(function(p){switch(p.label){case 0:if(!(n=t.pdfViewer.getCurrentPDFDoc()))throw new Error("Unable to apply property modifications. The document is either not open or has been closed. Please ensure the document is open and accessible for editing.");if("page-editor"!==t.pdfViewer.getStateHandlerManager().currentStateHandler.getStateName())throw new Error("Unable to apply property modifications. Current state handler is not page-editor!");for(c in o=n.getPageEditor(),a=t.resolvePropertiesKeyName(e),i=[],a)i.push(c);s=0,p.label=1;case 1:if(!(s<i.length))return[3,4];if(l=i[s],u=a[l],"shading-style-color"===l&&!r(u,Array))throw new Error("The value of the shading style color shoud be an array!");return[4,Fr(t.internalGraphicObject,o,l,u,t.pdfViewer.viewerUI.rootComponent,!0)];case 2:p.sent(),p.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))()}},{key:"resolvePropertiesKeyName",value:function(e){var t={};for(var n in["arrangeAlignment","arrangePagecenter","arrangeAlignment","arrangeDistribute","arrangeRotate","arrangeFlip","arrangeZorder"].forEach((function(n){if(n in e){var r=e[n],o=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))+"-"+r;t[o]=!0,delete e[n]}})),e){var r=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));t[r]=e[n]}return t}}]),e}(),Na=function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"type",get:function(){return me[me.Text]}}]),n}(Ua),La=function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"type",get:function(){return me[me.Path]}},{key:"resolvePropertiesKeyName",value:function(e){var t=p(u(n.prototype),"resolvePropertiesKeyName",this).call(this,e),r=e.shapeBorderColor,o=e.shapeBackgroundColor;return(r||o)&&(t["shape-style-color"]={borderColor:r,backgroundColor:o}),delete t["shape-border-color"],delete t["shape-background-color"],t}}]),n}(Ua),Va=(function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}s(n,[{key:"type",get:function(){return me[me.Image]}}])}(Ua),function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"type",get:function(){return me[me.Shading]}}]),n}(Ua)),za=function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"type",get:function(){return me[me.All]}}]),n}(Ua);function Ha(e){return function(t){if(t)return"number"===e.element.getAttribute("type")?t.replace(/\D+$/,""):t}}!function(e){e.VERTICALLY="vertically",e.HORIZONTALLY="horizontally",e.BOTH="both"}(Fa||(Fa={})),function(e){e.VERTICALLY="vertically",e.HORIZONTALLY="horizontally",e.LEFT="left",e.RIGHT="right",e.TOP="top",e.BOTTOM="bottom"}(Oa||(Oa={})),function(e){e.VERTICALLY="vertically",e.HORIZONTALLY="horizontally"}(Ra||(Ra={})),function(e){e.CLOCKWISE="clockwise",e.COUNTERCLOCKWISE="counter-clockwise"}(ja||(ja={})),function(e){e.VERTICALLY="vertically",e.HORIZONTALLY="horizontally"}(Da||(Da={})),function(e){e.TO_BACK="to-back",e.TO_FRONT="to-front"}(Ba||(Ba={}));var Ka=w.PDFViewCtrl,$a=Ka.ViewerEvents,Wa=w.vendors.jQuery,Ga=w.UIConsts.COMPONENT_EVENTS,Ya=function(e){g(r,e);var t=x(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then((function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])})).then((function(e){var n=b(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()}))}},{key:"stateIn",value:function(){var e=this.component.parent;e.is("dropdown")&&e.selectable&&(e.select(this.component),e.separate&&e.iconElement.setAttribute("aria-pressed","true"),e.addCSSClass("selected"))}},{key:"stateOut",value:function(){var e=this.component.parent;e.is("dropdown")&&e.selectable&&(e.separate&&e.iconElement.setAttribute("aria-pressed","false"),e.removeCSSClass("selected"))}},{key:"changeBtnState",value:function(){"touch-up-editor"===this.getPDFUI().pdfViewer.getStateHandlerManager().currentStateHandler.getStateName()?(this.component.active(),this.stateIn()):(this.component.deactive(),this.stateOut())}},{key:"mounted",value:function(){var e=this;p(u(r.prototype),"mounted",this).call(this),this.changeBtnState(),this.addDestroyHook(this.getPDFUI().addViewerEventListener(Ma.toolbarTabsClicked,(function(t){t&&["edit-tab","home-tab"].includes(t.name)&&e.changeBtnState()})))}},{key:"handle",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=this.getPDFUI();o.getStateHandlerManager().then((function(e){if(e.getCurrentStates()===pt){var a=pt.getType();vt(o),"joinSplit"===a?pt.joinSplit2EditText(o,e.pdfViewer):pt.activateType(o,e.pdfViewer,"touchup",!1)}else{var i,c,s;if(n)r.selectedPages.length>=1&&(c=r.selectedPages[0].pageRender,s=r.selectedPages[0].rectArray),(i=[c.index]).push([[s[0].start,s[0].end]]);pt.activateType(o,e.pdfViewer,"touchup",!1,i)}e.switchTo(pt.getStateName()),t.changeBtnState()})),n||(this.openRightTextEditPanel(o,n),o.getPDFDocRender().then((function(e){e.$ui.find(".fv__mark-selection-blank").remove()})))}},{key:"openRightTextEditPanel",value:function(e,t){return n((function(){var n,r,o,a;return S(this,(function(i){switch(i.label){case 0:return[4,e.getComponentByName("sidebar-right")];case 1:return(n=i.sent())?[3,3]:[4,e.getComponentByName("edit-properties")];case 2:return(r=i.sent())?(!t&&r&&(r.setHost({},X.TouchUp),r.disable()),[2]):[2];case 3:return n.showRightFormatPanel(X.TouchUp),[4,e.getComponentByName("sidebar-right-tabs")];case 4:return(o=i.sent())?(o.openTab("edit-properties-panel"),o.setActivetab("edit-properties-panel"),[4,e.getComponentByName("edit-properties")]):[2];case 5:return a=i.sent(),!t&&a&&(a.setHost({},X.TouchUp),a.disable()),[2]}}))}))()}},{key:"postlink",value:function(){var e=this;this.addDestroyHook(this.getPDFUI().addViewerEventListener("switch-state-handler",(function(t,n,r){if(vt(e.getPDFUI()),["page-editor","touch-up-editor"].indexOf(t.getStateName())>-1){if(r&&r.disableRightPanel)return;if("findReplace"===pt.getType())return;e.openRightTextEditPanel(e.getPDFUI(),0)}})))}}],[{key:"getName",value:function(){return"EditTextController"}},{key:"permission",get:function(){return w.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),r}(w.Controller),Ja=function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then((function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])})).then((function(e){var n=b(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()}))}},{key:"handle",value:function(){var e=this.getPDFUI();e.getStateHandlerManager().then((function(t){t.getCurrentStates()===pt?("touchup"===pt.getType()&&St.trigger("OnDeactivate"),vt(e),pt.activateType(e,t.pdfViewer,"joinSplit")):pt.activateType(e,t.pdfViewer,"joinSplit"),t.switchTo(pt.getStateName())}))}}],[{key:"getName",value:function(){return"JoinSplitController"}},{key:"permission",get:function(){return w.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),n}(w.Controller),qa=function(e){g(r,e);var t=x(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"destroy",value:function(){pt.prototype.getPDFUI=function(){}}},{key:"init",value:function(e){var t,r=this;this.pdfUI=e,pt.prototype.getPDFUI=function(){return e},e.getPDFViewer().then((function(t){r.viewer=t,t.getStateHandlerManager().register(Ho),t.getStateHandlerManager().register(pt),t.getScrollWrap().addScrollEventListener((function(){return r.updatePageMatrix(100)}));var n=Be()((function(){switch(e.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()){case"page-editor":case"touch-up-editor":break;default:return}r.updatePageMatrix()}),100);e.getComponentByName("sidebar").then((function(e){e&&(e.on(Ga.RESIZE,n),e.on(Ga.HIDDEN,n))}))})),e.getRootComponent().then((t=n((function(t){var n,r;return S(this,(function(o){switch(o.label){case 0:return[4,t.waitForComponentLifecycle("edit-properties","mounted")];case 1:return n=b.apply(void 0,[o.sent(),1]),(r=n[0])?(Wa(r.element).on("pointerup",".icon-btn[name]",(function(){switch(e.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()){case"page-editor":case"touch-up-editor":break;default:return}N.getElement().focus()})),[2]):[2]}}))})),function(e){return t.apply(this,arguments)}));var o,a=!0;e.addViewerEventListener((l(o={},$a.zoomToSuccess,(function(){return r.updatePageMatrix(100)})),l(o,$a.changeViewModeSuccess,(function(){return r.updatePageMatrix(100)})),l(o,Ka.Events.openFileSuccess,(function(e){jt.hide(),r.textToolStyle&&r.setTextToolStyle(r.textToolStyle),a=!0})),l(o,$a.switchStateHandler,(function(t,n){["touch-up-editor","page-editor"].includes(t.getStateName())||e.getComponentByName("edit-properties").then((function(t){t&&[X.TextObject,X.PathObject,X.ImageObject,X.ShadingObject,X.FormXObject,X.TouchUp].indexOf(t.hostType)>-1&&e.getComponentByName("sidebar-right-tabs").then((function(e){e&&e.openTabs.length>1&&e.closeTab("edit-properties-panel")}))}))})),l(o,"pageeditor-started",(function(){r.editingObjectToolStyle&&a&&r.setEditingObjectToolStyle(r.editingObjectToolStyle),a=!1})),l(o,"switch-touchup",(function(t){var n=t.type,r=void 0===n?"touchup":n,o=e.pdfViewer.getStateHandlerManager();pt.setType(r),o.getCurrentStates()!==pt&&(pt.activateType(e,o.pdfViewer,r,!1),o.switchTo(pt.getStateName()))})),l(o,$a.pageAdded,(function(){r.reInitPageEditor()})),l(o,$a.pageMoved,(function(){r.reInitPageEditor()})),l(o,$a.pagesMoved,(function(){r.reInitPageEditor()})),l(o,$a.pageRemoved,(function(){r.reInitPageEditor()})),l(o,$a.pagesRemoved,(function(){r.reInitPageEditor()})),l(o,$a.insertPages,(function(){r.reInitPageEditor()})),l(o,$a.importPages,(function(){r.reInitPageEditor()})),l(o,$a.beforePageRotationChanged,(function(t,n,r){return e.getPDFDocRender().then((function(e){e.doc.getTouchup().handleEvent("OnAfterRotatePage",t.getIndex(),n)}))})),l(o,Ma.textSplited,(function(){r.deactivate()})),o)),e.registerDialog("pageEditorProps",(function(){if(!r.dialog)return e.getComponentByName("template-container").then((function(e){var t=r.dialog=e.append($o()({AdditionalFamilies:w.shared.AdditionalFamilies,BaseFontFamilies:w.shared.BaseFontFamilies}),[{target:"PE-lineStyle",config:{selectorClass:"fv__ui-border-style-selector",options:[{value:0,class:"fv__ui-line-style-0",lable:!1},{value:1,class:"fv__ui-line-style-1",lable:!1},{value:2,class:"fv__ui-line-style-2",lable:!1},{value:3,class:"fv__ui-line-style-3",lable:!1},{value:4,class:"fv__ui-line-style-4",lable:!1},{value:5,class:"fv__ui-line-style-5",lable:!1},{value:6,class:"fv__ui-line-style-6",lable:!1}]}}]);t.open(e.getRoot()),t.show()}));r.dialog.show()}))}},{key:"reInitPageEditor",value:function(){this.pdfUI.getCurrentPDFDoc().then((function(e){e.api.reInitPageEditor(e.id)}))}},{key:"updatePageMatrix",value:function(e){var t=this.viewer,n=t.getStateHandlerManager().currentStateHandler;switch(n.getStateName()){case"page-editor":n.setMatrix(t,0,e);break;case"touch-up-editor":ht(t,1,e)}}},{key:"beforeMounted",value:function(e){}},{key:"fragments",value:function(){return[]}},{key:"receiveAction",value:function(e,t){var n=this[e];if("function"==typeof n)return n.apply(this,t)}},{key:"getActiveObject",value:function(){var e=this.pdfUI.pdfViewer,t=e.getCurrentPDFDoc();return t?"page-editor"!==e.getStateHandlerManager().currentStateHandler.getStateName()?Promise.resolve():t.getPageEditor().getActiveObject().then((function(t){return t&&function(e,t){switch(e.json.type){case 1:return new Na(e,t);case 2:return new La(e,t);case 4:return new Va(e,t);default:return new za(e,t)}}(t,e)})):Promise.resolve()}},{key:"onClick",value:function(e,t){var n,r=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.pdfUI.pdfViewer;if(!a.getCurrentPDFDoc())return Promise.resolve();if("page-editor"!==a.getStateHandlerManager().currentStateHandler.getStateName())return Promise.resolve();if(o){var i=a.getPDFPageRender(e);if(!i)return Promise.resolve();n=i.transformPoint({point:t,srcType:"pdf",destType:"PDFViewerPort"})}else n=Promise.resolve(t);return n.then((function(t){var n=devicePixelRatio||1,o=[{type:"EditorPage",value:e},{type:"PointF",value:[t.x*n,t.y*n]}];return a.eventEmitter.emit("PageEditor_onStartClick"),St.trigger("OnHitObjectTest",y(o)).then((function(){return St.trigger("OnLButtonDown",y(o).concat([0])).then((function(){return St.trigger("OnLButtonUp",y(o).concat([0])).then((function(){r.pdfUI.getComponentByName("sidebar-right").then((function(e){e&&e.hide()}))}))}))})).finally((function(){a.eventEmitter.emit("PageEditor_onEndClick")}))}))}},{key:"activate",value:function(e){var t=this;return Promise.all([this.pdfUI.getCurrentPDFDoc(),this.pdfUI.getStore()]).then((function(n){var r=b(n,2),o=r[0],a=r[1];if(o)return t.pdfUI.getStateHandlerManager().then((function(n){return a.dispatch(we,xe),n.switchTo(Ho.getStateName(),{disableRightPanel:!0}),o.getPageEditor().setObjectFilter(ce[e]).then((function(){return t.pdfUI.getComponentByName("sidebar-right").then((function(e){e&&e.hide()})),t.pdfUI.getComponentByName("edit-object-ribbon-dropdown").then((function(t){if(t){var n=t.getComponentByName(e);n&&Wa(n.element).addClass("active").siblings().removeClass("active")}}))}))}))}))}},{key:"deactivate",value:function(){var e=this;return this.pdfUI.getStateHandlerManager().then((function(t){return t.switchTo("hand"),e.pdfUI.getComponentByName("edit-object-ribbon-dropdown").then((function(e){if(e){var t=e.getComponentByName("All");t&&Wa(t.element).removeClass("active").siblings().removeClass("active")}}))}))}},{key:"activateTouchup",value:function(){var e=this;return this.pdfUI.getPDFDocRender().then((function(t){if(t.getUserPermission().getValue()&e.constructor.permission){if(!t.doc)return;return e.pdfUI.getStateHandlerManager().then((function(t){var n=t.getCurrentStates(),r=Promise.resolve();return n===pt&&"touchup"===n.getType()||(t.switchTo(pt.getStateName()),r=pt.activateType(e.pdfUI,t.pdfViewer,"touchup",!1)),r.then((function(t){return e.pdfUI.getComponentByName("edit-text").then((function(t){t&&(e.pdfUI.getComponentByName("sidebar-right").then((function(e){e&&e.hide()})),t.controller.changeBtnState())}))}))}))}throw new Error("No permission to edit document.")}))}},{key:"deactivateTouchup",value:function(){return this.pdfUI.getStateHandlerManager().then((function(e){e.switchTo("hand")}))}},{key:"changeTextColorByRect",value:function(e){var t=this;return this.pdfUI.getPDFDocRender().then((function(n){if(n.getUserPermission().getValue()&t.constructor.permission){var r=t.pdfUI.pdfViewer,o=r.getCurrentPDFDoc();if(!o)return Promise.resolve();var a=r.getStateHandlerManager().getCurrentStates();if(a!==pt||"touchup"!==a.getType())return Promise.resolve();var i=o.getTouchup(),c=e.pageIndex,s=e.rect,l=e.color,u=o.getPageCount();if(c<0||c>=u)throw new Error("Invalid page index.");if(!s||Object.values(s).some((function(e){return void 0===e}))||s.left===s.right&&s.top===s.bottom)throw new Error("Invalid rect.");if(!l)throw new Error("Invalid color.");return i.handleEvent("ChangeTextColorByRect",{page:c,rect:s,textColor:l}).catch((function(e){throw new Error(e.message)}))}throw new Error("No permission to edit document.")}))}},{key:"loadStyleConfigFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"touchup",t=this;return n((function(){var n,r,o;return S(this,(function(a){switch(a.label){case 0:return n=t.pdfUI.pdfViewer,(r=n.getCurrentPDFDoc())?t.advEditorConfigFilebuffer?[3,3]:("assets/advEditor",o=Ka.shared.resolvePath(n.libPath,"assets/advEditor","advedit-interaction-config-default.pdf"),[4,fetch(o)]):[2,Promise.resolve()];case 1:return[4,a.sent().blob()];case 2:t.advEditorConfigFilebuffer=a.sent(),a.label=3;case 3:return[2,r.loadAdvEditorConfigFile(t.advEditorConfigFilebuffer,e)]}}))}))()}},{key:"setTextToolStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return n((function(){var n,r;return S(this,(function(o){switch(o.label){case 0:return n=t.pdfUI.pdfViewer,(r=n.getCurrentPDFDoc())?[4,t.loadStyleConfigFile("touchup")]:[2,Promise.resolve()];case 1:if(!o.sent())throw new Error("Failed to load the text tool style configuration file.");return e.cursor&&(e.editTextCaret=e.cursor),t.textToolStyle=e,[2,r.setAdvEditorTextToolStyle(e)]}}))}))()}},{key:"setEditingObjectToolStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return n((function(){var n,r;return S(this,(function(o){switch(o.label){case 0:return n=t.pdfUI.pdfViewer,(r=n.getCurrentPDFDoc())?[4,t.loadStyleConfigFile("pageEditor")]:[2,Promise.resolve()];case 1:if(!o.sent())throw new Error("Please activate the pageEditor first.");return e.addShapeBox&&(e.editShapeBox=e.addShapeBox),t.editingObjectToolStyle=e,[2,r.setAdvEditorEditingObjectToolStyle(e)]}}))}))()}}],[{key:"getName",value:function(){return"page-editor"}},{key:"getLoader",value:function(){return k()}},{key:"permission",get:function(){return w.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}},{key:"initOnLoad",value:function(){var e=w.modular.module("page-editor",[]);e.registerController(Ya),e.registerController(Ja),e.registerPreConfiguredComponent("edit-text",{template:'<ribbon-button name="edit-text" icon-class="fv__icon-edit-touch-up" @tooltip text="page-editor:buttons.edit-text"></ribbon-button>',config:[{target:"edit-text",tooltip:{title:"page-editor:buttons.edit-text"},callback:Ya}]}),e.registerPreConfiguredComponent("join-split",{template:'<ribbon-button name="join-split" icon-class="fv__icon-edit-join-split" @tooltip text="page-editor:buttons.join-split"></ribbon-button>',config:[{target:"join-split",tooltip:{title:"page-editor:buttons.join-split"},callback:Ja}]}),e.registerPreConfiguredComponent("join",{template:'<ribbon-button name="join-split-join" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-join" @tooltip text="page-editor:buttons.join"></ribbon-button>',config:[{target:"join-split-join",tooltip:{title:"page-editor:buttons.join"},callback:function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then((function(e){e.getTouchup().handleEvent("JoinBoxes")}))}}],[{key:"getName",value:function(){return"join"}}]),n}(w.Controller)}]}),e.registerPreConfiguredComponent("split",{template:'<ribbon-button name="join-split-split" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-split" @tooltip text="page-editor:buttons.split"></ribbon-button>',config:[{target:"join-split-split",tooltip:{title:"page-editor:buttons.split"},callback:function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then((function(e){e.getTouchup().handleEvent("SplitBoxes")}))}}],[{key:"getName",value:function(){return"split"}}]),n}(w.Controller)}]}),e.registerPreConfiguredComponent("link",{template:'<ribbon-button name="join-split-link" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-link" @tooltip text="page-editor:buttons.link"></ribbon-button>',config:[{target:"join-split-link",tooltip:{title:"page-editor:buttons.link"},callback:function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then((function(e){e.getTouchup().handleEvent("LinkBoxes")}))}}],[{key:"getName",value:function(){return"link"}}]),n}(w.Controller)}]}),e.registerPreConfiguredComponent("unlink",{template:'<ribbon-button name="join-split-unlink" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-unlink" @tooltip text="page-editor:buttons.unlink"></ribbon-button>',config:[{target:"join-split-unlink",tooltip:{title:"page-editor:buttons.unlink"},callback:function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then((function(e){e.getTouchup().handleEvent("UnlinkBoxes")}))}}],[{key:"getName",value:function(){return"unlink"}}]),n}(w.Controller)}]}),e.registerPreConfiguredComponent("select-none",{template:'<ribbon-button name="join-split-select-none" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-select-none" @tooltip text="page-editor:buttons.select-none"></ribbon-button>',config:[{target:"join-split-select-none",tooltip:{title:"page-editor:buttons.select-none"},callback:function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then((function(e){e.getTouchup().handleEvent("SelectNone")}))}}],[{key:"getName",value:function(){return"select-none"}}]),n}(w.Controller)}]}),e.registerPreConfiguredComponent("close",{template:'<ribbon-button name="join-split-close" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-close" @tooltip text="page-editor:buttons.close"></ribbon-button>',config:[{target:"join-split-close",tooltip:{title:"page-editor:buttons.close"},callback:function(e){g(n,e);var t=x(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"handle",value:function(){var e=this;this.getPDFUI().getStateHandlerManager().then((function(t){t.switchTo("hand"),e.getPDFUI().getComponentByName("edit-tab").then((function(e){e.active()}))}))}}],[{key:"getName",value:function(){return"close"}}]),n}(w.Controller)}]}),e.registerController(da),e.registerController(Pa),e.registerPreConfiguredComponent("edit-object-ribbon-dropdown",{template:ha()()}),e.registerController(Sa),e.registerPreConfiguredComponent("add-text-button",{template:'<ribbon-button name="fv--plugin-PageEditor-add-text" icon-class="fv__icon-menu-add-text" @controller="page-editor:AddTextController" @tooltip tooltip-title="page-editor:addText.title">page-editor:addText.title</ribbon-button>'}),e.registerController(Ea),e.registerPreConfiguredComponent("add-image-button",{template:'<ribbon-button name="fv--plugin-PageEditor-add-image" icon-class="fv__icon-menu-add-image" @controller="page-editor:AddImageAdvController" @tooltip tooltip-title="page-editor:addImage.title" class="fx-ribbon-hidden-dropdown" @var.self="$component" not-dropdown="true">\n                <dropdown @on.selected="self.select($args[0])" selected="0">\n                    <file-selector ribbon-icon="fx-icon-ribbon_edit_add_images-32" icon-class="fv__icon-edit-add-image" accept=".bmp,.jpg,.jpeg,.jpf,.jpx,.jp2,.j2k,.jpc,.j2c,.png,.tiff,.tif,.exif,.gif" text="page-editor:addImage.title"></file-selector>\n                </dropdown>\n            </ribbon-button>'}),e.registerController(Aa),e.registerPreConfiguredComponent("add-shapes-ribbon-dropdown",{template:_a()()}),e.getRegistry().registerPipe("format_number",Ha)}}]),r}(w.UIXAddon);Object.assign(w.addons,{},{page_editor:f(h({},e),{AddImageAdvController:Ea,AddShapesController:Aa,AddTextController:Sa,EditObjectController:Pa,EditTextController:Ya,JoinSplitController:Ja})})})(),a=a.default})()));