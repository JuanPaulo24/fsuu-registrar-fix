!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],o):"object"==typeof exports?exports.ExportFormUIXAddon=o(require("UIExtension")):t.ExportFormUIXAddon=o(t.UIExtension)}(self,(t=>(()=>{var o={922:t=>{t.exports=null},616:o=>{"use strict";o.exports=t}},e={};function n(t){var r=e[t];if(void 0!==r)return r.exports;var l=e[t]={exports:{}};return o[t](l,l.exports,n),l.exports}n.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return n.d(o,{a:o}),o},n.d=(t,o)=>{for(var e in o)n.o(o,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},n.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o);var r={};return(()=>{"use strict";function t(o,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](o):t(o,e)}function o(o,e){if(!t(o,e))throw new TypeError("Cannot call a class as a function")}function e(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}function i(t,o){return i=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},i(t,o)}function a(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&i(t,o)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function p(t,o){return!o||"object"!=((e=o)&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):o;var e}function f(t){var o=c();return function(){var e,n=u(t);if(o){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return p(this,e)}}n.d(r,{default:()=>A});var s=n(616),d=n(922),x=n.n(d);function m(t,o){var e=t.lastIndexOf(".");return-1!==e&&(t=t.substring(0,e)),t+=o}var b=s.PDFViewCtrl.shared.download,v=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then((function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".xml"),(o.isStaticXFA()||o.isDynamicXFA()?o.exportXFAToFile("xml"):o.exportFormToFile(2)).then((function(t){"blob"in t&&(t=t.blob),b(t,e,"application/xml")}))}))}}],[{key:"getName",value:function(){return"ExportToXMLController"}}]),n}(s.Controller),h=s.PDFViewCtrl.shared.download,y=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then((function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".fdf"),o.exportFormToFile(0).then((function(t){h(t,e,"application/vnd.fdf")}))}))}}],[{key:"getName",value:function(){return"ExportToFDFController"}}]),n}(s.Controller),F=s.PDFViewCtrl.shared.download,g=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then((function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".xfdf"),o.exportFormToFile(1).then((function(t){F(t,e,"application/vnd.adobe.xfdf")}))}))}}],[{key:"getName",value:function(){return"ExportToXFDFController"}}]),n}(s.Controller),w=s.PDFViewCtrl.shared.download,D=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then((function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".csv"),o.exportFormToFile(3).then((function(t){w(t,e,"application/csv")}))}))}}],[{key:"getName",value:function(){return"ExportToCSVController"}}]),n}(s.Controller),P=s.PDFViewCtrl.shared.download,C=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then((function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".txt"),o.exportFormToFile(4).then((function(t){P(t,e,"application/txt")}))}))}}],[{key:"getName",value:function(){return"ExportToTXTController"}}]),n}(s.Controller),E=s.PDFViewCtrl.shared.download,_=(s.PDFViewCtrl.Consts.PDFDocPermission,function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then((function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".xdp"),o.exportXFAToFile("xdp").then((function(t){E(t.blob,e,"application/vnd.adobe.xdp")}))}))}}],[{key:"getName",value:function(){return"ExportToXDPController"}}]),n}(s.Controller));function T(t,o,e,n,r,l,i){try{var a=t[l](i),u=a.value}catch(t){return void e(t)}a.done?o(u):Promise.resolve(u).then(n,r)}function k(t,o,e){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,o,e){var n=function(t,o){for(;!Object.prototype.hasOwnProperty.call(t,o)&&null!==(t=u(t)););return t}(t,o);if(n){var r=Object.getOwnPropertyDescriptor(n,o);return r.get?r.get.call(e||t):r.value}},k(t,o,e||t)}function I(t,o){(null==o||o>t.length)&&(o=t.length);for(var e=0,n=new Array(o);e<o;e++)n[e]=t[e];return n}function O(t,o){return function(t){if(Array.isArray(t))return t}(t)||function(t,o){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,l=[],i=!0,a=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(l.push(n.value),!o||l.length!==o);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==e.return||e.return()}finally{if(a)throw r}}return l}}(t,o)||function(t,o){if(t){if("string"==typeof t)return I(t,o);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?I(t,o):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,o){var e,n,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(i=0)),i;)try{if(e=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=o.call(t,i)}catch(t){a=[6,t],n=0}finally{e=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var V=s.PDFViewCtrl.Events,S=s.PDFViewCtrl.Consts.PDFDocPermission,X=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,[{key:"changePermission",value:function(t){var o,e,n=this.getPDFUI().getPDFDocRender().then((function(t){return t&&t.getUserPermission().getValue()})),r=this;Promise.all([t&&!t.isDestroyed&&t.hasForm(),n]).then((o=function(o){var e,n,l,i,a,u;return U(this,(function(c){switch(c.label){case 0:return e=O(o,2),n=e[0],l=e[1],(a=t)?[4,t.isXFA()]:[3,2];case 1:a=c.sent(),c.label=2;case 2:return i=a,t&&(l&S.Extract&&(n||i)||t.isDynamicXFA())?r.component.unlock&&r.component.unlock():r.component.lock&&r.component.lock(),["export-to-fdf","export-to-xfdf","export-to-csv","export-to-txt"].map((function(o){var e=r.component.getComponentByName(o);t&&i?e.hide():e.show()})),u=r.component.getComponentByName("export-to-xdp"),t&&i?u.show():u.hide(),[2]}}))},e=function(){var t=this,e=arguments;return new Promise((function(n,r){var l=o.apply(t,e);function i(t){T(l,n,r,i,a,"next",t)}function a(t){T(l,n,r,i,a,"throw",t)}i(void 0)}))},function(t){return e.apply(this,arguments)}))}},{key:"mounted",value:function(){var t=this;k(u(n.prototype),"mounted",this).call(this),this.addDestroyHook(this.getPDFUI().addViewerEventListener(V.recognitionForm,(function(o){t.changePermission(o)})),this.getPDFUI().addViewerEventListener(V.formReloaded,(function(o){t.changePermission(o)})),this.getPDFUI().addViewerEventListener(V.annotationAdd,(function(o){t.getPDFUI().getPDFDocRender().then((function(o){t.changePermission(o.getPDFDoc())}))}))),this.addDestroyHook(this.getPDFUI().addViewerEventListener(V.annotationRemoved,(function(o){t.getPDFUI().getPDFDocRender().then((function(o){t.changePermission(o.getPDFDoc())}))})),this.getPDFUI().addViewerEventListener(V.flattenAnnotation,(function(o,e){t.getPDFUI().getPDFDocRender().then((function(o){t.changePermission(o.getPDFDoc())}))})))}}],[{key:"getName",value:function(){return"ExportFormController"}}]),n}(s.Controller),j=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,null,[{key:"getName",value:function(){return"export-form-ribbon-dropdown"}}]),n}(s.SeniorComponentFactory.createSuperClass({template:'\n    <ribbon-button icon-class="fx-icon-ribbon_form_export-32" @tooltip tooltip-title="export:button-tooltip.title" text="export:ribbon.text" name="export-form" @controller="export-form-module:ExportFormController">\n        <dropdown separate="false">\n            <dropdown-button ribbon-icon="" text="export:export.xml" name="export-to-xml"  @controller="export-form-module:ExportToXMLController" icon-class="fv__icon-toolbar-to-xml-file">\n                export:export.xml\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.fdf" name="export-to-fdf"  @controller="export-form-module:ExportToFDFController" icon-class="fv__icon-toolbar-to-fdf-file">\n                export:export.fdf\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.xfdf" name="export-to-xfdf" @controller="export-form-module:ExportToXFDFController"  icon-class="fv__icon-toolbar-to-xfdf-file">\n                export:export.xfdf\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.csv" name="export-to-csv" @controller="export-form-module:ExportToCSVController"  icon-class="fv__icon-toolbar-to-csv-file">\n                export:export.csv\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.txt" name="export-to-txt" @controller="export-form-module:ExportToTXTController"  icon-class="fv__icon-toolbar-to-txt-file">\n                export:export.txt\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.xdp" name="export-to-xdp" @controller="export-form-module:ExportToXDPController"  icon-class="fv__icon-toolbar-to-xdp-file">\n                export:export.xdp\n            </dropdown-button>\n        </dropdown>\n    </ribbon-button>\n    '})),N=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,null,[{key:"getName",value:function(){return"export-form-dropdown"}}]),n}(s.SeniorComponentFactory.createSuperClass({template:'\n        <dropdown @tooltip @controller="export-form-module:ExportFormController"  icon-class="fv__icon-toolbar-export-form" tooltip-title="export:button-tooltip.title" name="export-form" separate="false" selectable="false">\n            <dropdown-button name="export-to-xml"  @controller="export-form-module:ExportToXMLController" icon-class="fv__icon-toolbar-to-xml-file" tabindex="0">\n                export:export.xml\n            </dropdown-button>\n            <dropdown-button name="export-to-fdf"  @controller="export-form-module:ExportToFDFController" icon-class="fv__icon-toolbar-to-fdf-file" tabindex="0">\n                export:export.fdf\n            </dropdown-button>\n            <dropdown-button name="export-to-xfdf" @controller="export-form-module:ExportToXFDFController"  icon-class="fv__icon-toolbar-to-xfdf-file" tabindex="0">\n                export:export.xfdf\n            </dropdown-button>\n            <dropdown-button name="export-to-csv" @controller="export-form-module:ExportToCSVController"  icon-class="fv__icon-toolbar-to-csv-file" tabindex="0">\n                export:export.csv\n            </dropdown-button>\n            <dropdown-button name="export-to-txt" @controller="export-form-module:ExportToTXTController"  icon-class="fv__icon-toolbar-to-txt-file" tabindex="0">\n                export:export.txt\n            </dropdown-button>\n        </dropdown>\n    '})),A=function(t){a(n,t);var e=f(n);function n(){return o(this,n),e.apply(this,arguments)}return l(n,[{key:"fragments",value:function(){return[]}}],[{key:"getName",value:function(){return"exportForm"}},{key:"getLoader",value:function(){return x()}},{key:"initOnLoad",value:function(){var t=s.modular.module("export-form-module",[]);t.registerComponent(N),t.registerComponent(j),t.registerController(X),t.registerController(v),t.registerController(y),t.registerController(g),t.registerController(D),t.registerController(C),t.registerController(_)}}]),n}(s.UIXAddon)})(),r=r.default})()));